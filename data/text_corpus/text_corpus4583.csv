index,text
22915,nowadays the traditional measurement methods applied in ship sections blocks are heavily relied on years of experiences and could hardly meet the shipbuilding requirements due to their complicated and time consuming processes furthermore along with the development of photogrammetry the image based three dimensional 3d reconstruction technology has emerged and become flourishing in this paper we propose a novel measurement method based on image based 3d reconstruction technology to measure the construction deformation of ship blocks with high accuracy in a simple way the scheme only needs photos to rebuild the 3d model of ship block it includes the camera calibration the image preprocessing the feature points matching followed by the steps of dense point cloud generation meshes partition and 3d reconstruction with texture mapping in the step of feature points matching the scale invariant feature transform sift algorithm is used and optimized with the addition of the global vector to reduce the mismatch and enhance the reconstruction accuracy the shipyard experiments with shooting photos of arbitrary steel parts proved that the proposed image based 3d reconstruction technology is able to be applied to measure the ship blocks with satisfied accuracy and less time in shipbuilding industry or other industries with large scale one of a kind product as well keywords non contact measurement imaged based 3d reconstruction structure from motion scale invariant feature transform algorithm feature points extraction 1 introduction 1 1 background the ship hull construction method with the subdivided blocks segmented assembled and erected is widely used in shipbuilding around the world block erection is the process of welding the assembled neighboring blocks together according to a ship section plan to form a larger block on slipways at docks it is a critical phase and often a bottleneck for the timely ship delivery kim et al 2015 whether the block erection could be carried out according to the schedule largely depends on the on time delivery of blocks with their inevitable deformation known such deformation might be incurred by welding inaccurate position of steel parts or accumulated distortion of steel pieces during the sequential fabrication processes jang et al 2007 tajima et al 2007 it is crucial for the shipyard to make sure that the deformation of blocks falls into the range of permitted tolerances and no further corrections is required on the slipway since working conditions are not ideal there owing to factors such as difficult access limited space and hazardous working conditions and time should be spent as short as possible therefore the deformation of blocks should be accurately calculated and following correction measures should be well taken before their being transferred to the slipway currently to tackle this an indispensable step of deformation diagnosis is performed and the construction accuracy of blocks is constantly monitored and measured by experienced workers with laser theodolites or total stations which is deemed as a time consuming and heavily experiences relied procedure kniat 2009 zhang et al 2012 especially with the shrinkage of the shipbuilding market more skilled workers are forced to leave or switch to other industries without their years of occupational skills being transferred this manual measuring method would not be cost effective and reassuring in the long run this together with the rapid development of photogrammetry and computer vision techniques intrigues a challenge is it possible to implement the non contact ship block measurement with the 3d reconstruction technology so that when the block is transferred to the slipway dock to be erected with an adjacent block it is allowance free liu et al 2012 wang et al 2014 shirmohammadi and ferrero 2014 deparday et al 2016 tang et al 2016 1 2 related works monocular vision 3d reconstruction method which is able to obtain the geometric information of the real world object and reconstruct its 3d model is an indispensable part of computer vision technology wang et al 2014 it can be divided into active and passive modes koch et al 2015 the active mode includes structured light method schmalz et al 2012 xiong et al 2013 bosché et al 2015 and contour information method stentoumis et al 2013 saidani and ghorbel 2014 filho et al 2015 it chooses optical scanning to generate the 3d point clouds of objects and is mainly based on optical principle dipanda and woo 2005 jang et al 2013 this mode can produce high precision 3d model but with the assist of cost prohibitively equipment such as 3d laser scanners and furthermore large scale objects with spatial discontinuities i e object edges cannot be reconstructed since there exist the wide spreading disturbances suffered by light from their environments and the scanned data may contain inaccurate data points tang et al 2009 more critically with this method the follow up steps cannot analyze the obtained point cloud the passive method consists of image processing computer vision and photogrammetry technology to process the 2d image of the object and further generate its 3d model wohler 2004 jia et al 2012 caroti et al 2015 this process is also called image based 3d reconstruction because of the high complexity of the sequence images containing large amount of data the accuracy of the obtained 3d model with this method is relatively high in addition the image based 3d reconstruction method also has the following advantages 1 the size and complexity of the object to be measured is almost unlimited 2 some hidden local features can be captured 3 it requires not too much effort and professional skill 4 the equipment is cheap and easy to transport and install koelman 2010 so far image based 3d reconstruction method has demonstrated the promising applications in many fields in the field of civil construction 3d reconstruction technology has been successfully applied to collect as built spatial data of civil infrastructure and it is acceptable to control the average error within 3 and there are cases where the object still cannot be completely reconstructed especially the details bhatla et al 2012 fathi et al 2015 the application of 3d reconstruction technology in navigation has been studied as well the correspondence between image points and 3d space points can be established with adapting 3d reconstruction and terrain matching thereby obtaining precise navigation parameters required for long haul flight the position error can be controlled around 50 m zhu et al 2015 in the field of clinical medicine three dimensional computed tomography 3d ct technologies based on image based 3d reconstruction technology has been widely used in various types of preoperative simulation and actual surgical operations the reconstruction accuracy has reached the nanometer level owing to the expensive equipment and the smaller size of the reconstructed object chen yoshikawa and date 2016 in ecology image based 3d reconstruction techniques have been applied to surveying the distribution of megabenthos over multi hectare regions of the seafloor thornton et al 2016 in archaeology sector the application of 3d recording techniques in archaeology and heritage studies has grown exponentially in the past fifteen years in the case of boudelo 2 excavation de reu recorded the entire excavation process through image based 3d modeling technology and controlled the reconstruction error about 10 mm de reu et al 2014 however its application in shipbuilding industry still poses a challenge the following highlights some typical aspects in shipbuilding sector from a practical perspective 1 the size of ship blocks is comparatively large for example a typical double bottom block could easily reach to 6 0 m length 12 6 m width 1 4 m height 2 information of feature points edges of blocks is often behind a particular obstruction and a significant among of pictures taken from a variety of locations are needed 3 a given measured ship block is usually encompassed with another block stored closely due to the limited space in the shipyard or with cranes unfinished welding parts scaffoldings etc as shown in fig 1 such complicated environment brings many distractions and is detrimental in image processing step 4 the level of accuracy required especially for structure deformation measurement is high while meeting these stringent requirements may not be successful with image based 3d reconstruction method the application of image based 3d reconstruction technology in various fields is compared in terms of the size of reconstructed object the reconstruction precision and the photo shooting environment as shown in table 1 furthermore in the image based 3d reconstruction method the structure from motion sfm method requires fewer operation requirements wider application environment and better precision than other methods meanwhile the sfm method can divide the whole reconstruction processes into several modules and is easy to control and optimize and more robust to environmental noise light and other interferences micusik and wildenauer 2014 javernick et al 2014 cebrián robles and ortega casanova 2016 therefore considering the characteristics of both shipbuilding processes and the image based 3d reconstruction approach the sfm method was chosen in our research to explore the application of computer vision technology in shipbuilding sector this paper explores the steps necessary to implement measurements based on 3d reconstruction technology and especially in feature matching step an optimized method is suggested to improve the reconstruction and measurement accuracy in addition the paper also verifies the feasibility of the method through shipyard experiments it is expected that the proposed approach is able to counter the challenge and prove the feasibility of image based 3d reconstruction technology in shipbuilding and to overcome the limitations of the existing measurement techniques such as heavily relied on experience more time spent complicated operations and less accurate in this paper apart from the introduction in section 1 section 2 presents the overall process of this study and the image based 3d reconstruction measurement method is explained in detail section 3 describes the optimization of the feature points extraction and matching algorithm to improve the efficiency and accuracy of the reconstruction results section 4 verifies the application feasibility of this novel measurement method through the field tests in the shipyard followed by section 5 to wrap up the paper 2 an overview of non contact measurement to measure the ship block an overview of non contact measurement to measure the ship block using image based 3d reconstruction technology is presented here as the flow chart in fig 2 displays it consists of four main steps marked in dark blue i e camera calibration image processing feature points matching and 3d model generation for each step its missions are elaborated with yellow box its corresponding experimental verification step is listed and colored in light red and its involved key algorithms are mentioned and marked in light blue in the end it is expected that measurement data could be obtained by comparing the reconstructed model with the corresponding designed model and thus the accuracy of the target ship block could be calculated in this section first the steps of camera calibration and image processing are delineated in section 2 1 with the example of three groups of work scenario images then the main process of steps of feature points matching and 3d model generation is elaborated in section 2 2 and third the preliminary verification of the non contact method is performed with the studied case of a hand made wooden ship section 2 1 camera calibration and image preprocessing camera calibration and image preprocessing are integral parts of 3d object reconstruction research based on 2d images camera calibration is the basic step to restore the data of the real 3d world image preprocessing is the necessary simplification of the research process under the premise of only studying the structure of objects and can relatively improve the accuracy of the obtained data pollefeys and van gool 1999 habe and nakamura 2012 gonzalez and woods 2017 in this paper zhang s camera calibration method was selected to obtain the parameters and correct the distortion of the image zhang 1999 salvi et al 2002 it not only overcomes the shortcomings of the traditional calibration method that requires high precision calibration of objects but compared with the self calibration method is easy to operate while achieving high precision calibration with only one printed checkerboard used to complete the calibration furthermore the original images obtained by imaging systems must be preprocessed at the beginning since they cannot be directly applied to computer vision system due to various constraints and external random disturbances the purposes of the preprocessing process are listed as follows 1 to enhance the image related information 2 to improve the image quality 3 to weaken the irrelevant information during processing 4 to suppress the unnecessary image distortion 5 to emphasize the important image features in the subsequent image processing pham et al 2012 zeng et al 2012 in this paper the methods of histogram equalization and wiener filtering were chosen to enhance the data and reduce the noise of the original images respectively to verify them the sift algorithm was used to extract the feature points of the images before and after processing through the information of their position size and direction lowe 2004 peng et al 2009 here feature points refer to the points where the gray value of the image in the area changes drastically such as corner points edge and so on fig 3 is the image comparison of three scenarios before and after image preprocessing the left of which are original images and the right are their corresponding ones after being processed the green lines in the figure represent the feature points extracted from the image by the sift algorithm it is obvious that more feature points could be extracted from the images after being preprocessed in three scenarios table 2 lists the numbers of extracted feature points it shows that after image processing the number of feature points extracted from one image has been significantly increased up to 21 times this proves that the selected image processing methods are more capable and suitable for the subsequent work in which the feature points would be matched with the corresponding ones from the rest multiple images and therefore form the three dimensional point cloud 2 2 feature points matching and 3d model generation the main process of steps of feature points matching and 3d model generation is as follows 1 sift algorithm is used to realize the feature points matching in the corrected and preprocessed image 2 the camera position is automatically matched by using sfm method to determine the 3d coordinate system to obtain the sparse point cloud of the object 3 clustering views for multi view stereo cmvs patch based multi view stereo pmvs algorithm are used to generate the dense point cloud 4 the polygon mesh is generated by poisson surface reconstruction and the texture is given to the polygon mesh to polish and finalize the reconstruction model zhang 1999 furukawa and ponce 2009a the detailed description of this method is presented here sfm method is used to generate the sparse point cloud consisting of matching feature points with sift algorithm and defining their 3d coordinates with obtaining the camera position furukawa and ponce 2007 2009b brito 2017 since there are many overlapping points in the sparse point cloud using the sfm method it is necessary to introduce cmvs algorithm from the negative side to cluster the images reduce the amount of miss matching data and thus improve the matching efficiency furthermore it is also necessary to apply the pmvs algorithm to densify the sparse point cloud from the positive aspect furukawa et al 2010 with the help of both cmvs and pmvs algorithm the dense point cloud is obtained to further substantiate the dene point cloud model polygon mesh is required here we use poisson surface reconstruction algorithm to obtain the polygon meshed model because of its enabling of good geometric surface features and detail features furukawa and ponce 2007 berger et al 2017 and this step was finalized by giving the texture to the polygon meshed model which makes it more vivid and animated 2 3 verification of the noncontact measurement method we use a hand made ship section model made of wooden boards to conduct the preliminary verification of the measurement method the verification of a real ship section in shipyard would be described in details in section 4 first we rebuild the 3d model of this hand made ship section according to the sfm method the sift algorithm is applied to perform the feature points matching and to obtain a sparse point cloud of the target and the result is shown in fig 4 furthermore the sparse point cloud is encrypted using the cmvs pmvs algorithm to generate a dense point cloud as displayed in fig 5 fig 6 is the polygon mesh of the model generated by poisson surface reconstruction fig 7 shows the texture of the polygon mesh and thus the 3d model of the hand made ship section is reconstructed after the model is rebuilt the measured length of the 3d model is compared with the corresponding actual length to examine the reconstruction accuracy the results are shown in table 3 the side length of the grid is 30 mm and used as a ruler and therefore its reconstruction length has no error the data in the table shows that although the size error of the reconstructed model is no more than 3 mm there is the error size of 1 0616 mm at the actual length of 10 mm and the error size exceeds 10 of the actual size this reflects the unsatisfactory feature points extraction and matching of small steel parts in real ship measurement thus the algorithm optimization is still needed to reduce the error and improve the reconstruction accuracy 3 optimization of feature points extraction and matching algorithm matching the feature points between the same two images means to determine that a certain point in the previous image corresponds to the same point in the latter image and both are reflecting the same point on the targeting object peng et al 2009 sun et al 2014 the quality of feature points extraction and matching largely determines the efficiency and accuracy of the reconstruction results this section has proposed two schemes to optimize this algorithm since different feature points extraction and matching algorithms have their own advantages and disadvantages the first scheme is to combine multiple chosen algorithms with the intention of suppressing the shortcomings and making full use of each advantage the second scheme is to optimize the sift algorithm 3 1 combination algorithm harris ncc ransac we first propose the combination algorithm of harris corner detection harris normalized cross correlation ncc and random sample consensus ransac based on their characteristics harris corner is the basis of feature points detection and is based on the template to determine whether an arbitrary point is a corner point or a point on an edge or on a smooth surface ram and padmavathi 2016 the ncc algorithm is used to determine the similarity between two images and can effectively reduce the influence of illumination on the image comparison and the results are easily quantified and compared as well sarvaiya et al 2009 the advantage of the ransac algorithm is that it can robustly estimate model parameters for example to estimate high precision parameters from a data set containing a large number of outliers safy et al 2013 here we use the harris operator corner point to detect and extract the corner points as feature points kim et al 2015 and these feature points are used as initial matching pairs of ncc algorithm then correct these matching pairs and perform the preliminary screening in the meantime the ransac algorithm is applied in the matching process to detect and extract mismatch points chum et al 2003 finally the initial matching pairs are calculated and the mismatch points are eliminated due to the complex characteristics of the shipbuilding processes the captured images contain not only the target but also many other surrounding objects and there exist many mismatched feature points in order to verify the effectiveness of this combination algorithm we use the original images taken from the shipyard without preprocessing to find the wrong match pairs the match result is shown in fig 8 in which two original images of the same object were displayed and the matching points between the two images with both the combination algorithm and the sift algorithm were connected by yellow and blue lines respectively the data listed in table 4 shows that the combination algorithm is able to reduce the mismatched point rate 3 2 sift algorithm combined with global vector the second approach to optimize the feature points extraction and matching is based on the sift algorithm it is known that in real world if there are multiple similar regions in the image the feature points obtained by the sift algorithm would have great similarities resulting in mismatches to tackle this problem the sift algorithm combined with global vector was proposed originally a descriptor of sift represents the local characteristic of a feature point here a global vector was added to distinguish the similar local features mortensen et al 2005 cao et al 2010 it is used to calculate the curvature of the pixel in the nearby region of a feature point in order to reduce the mismatch caused by multiple similar matching points in one feature point the ratio of the nearest neighbor and the next nearest neighbor feature points was compared and analyzed thus the chance of matching failure caused by the local deviation in similar regions is reduced the same original images in fig 8 has been used here to compare the effectiveness of the sift algorithm and the sift algorithm combined with the global vector as shown in fig 9 in which the matching points were connected by blue lines too as can be seen from table 5 the improved algorithm has a significant increase in the number of matching feature points which is more preferable for 3d reconstruction 3 2 1 comparison of experimental results after algorithm optimization the sift algorithm has a remarkable feature that is the small neighborhoods around the two feature points have similarities if only the local information is considered it will inevitably lead to the mismatch after adding the global vector the pair of mismatched points is eliminated this shows that compared with the original sift algorithm the feature points extracted by the sift algorithm combined with the global information can better describe the edge information of the hull section it can be seen from section 3 1 and 3 2 that the combination algorithm reduces the number of matching points by 21 1 while reducing the mismatch rate only by 1 7 meanwhile sufficient matching points are also an important prerequisite for good 3d reconstruction the sift algorithm combined with the global vector not only significantly reduces the mismatch rate 7 6 but also greatly increases the number of matching points actually after numerous image tests the minimum number of matching points can be increased by 19 and further improve the matching effect in this paper the sift algorithm combined with global vector is finally selected to be applied to image based 3d reconstruction non contact measurement method and the accuracy comparison experiment was carried out by using the hand made wooden model described in section 2 3 the data of the comparison in table 6 shows the errors above 0 5 mm are reduced by a maximum of nearly 70 and with a minimum of 1 38 therefore it is proved that the sift algorithm combined with the global vector could improve the accuracy of the 3d reconstruction model 4 experimental verification in this section the field tests in shipyard were conducted to verify the application feasibility of this novel measurement method in the shipbuilding industry four arbitrary steel parts were chosen in a section assembly workshop in the shipyard their corresponding 3d reconstruction models were obtained after the implementation of the above described 3d reconstruction method the accuracy of the 3d reconstruction model was analyzed through the comparison of dimensions either with the real ones or with the ones provided by workers on the site firstly the specially calibrated hand held camera was used to shoot the steel parts from different angles and directions the shooting process includes a 90 degree rotating camera to shoot more than 1 3 of the total number of photos the sfm algorithm and the sift algorithm combined with global vector have been used to generate the sparse 3d point cloud reconstruction model after the feature points are matched the outline of the structure can be vaguely viewed and the results of four steel parts are shown in fig 10 their corresponding dense 3d point cloud models are obtained as displayed in fig 11 with the help of cmvs pmvs algorithm furthermore the piecewise polygonal mesh models of four steel parts are produced by poisson surface reconstruction and the result is shown in fig 12 it enriches the details of the structure after attaching the texture to the polygon mesh fig 13 shows that even the position and size of the stickers on the tested steel parts could be clearly spotted therefore the reconstruction models of the field tests show that the proposed method could realize the complete restoration of steel parts and the reconstructed model has no defects compared with the measured structure it can be clearly seen that not only the local features are obvious but also the edges are very neat and easy to measure 4 1 results analysis the reconstructed model can be interfaced with software such as autocad to obtain its 3d dimensions which makes available the further comparison with the real size to analyze its accuracy the measurement of four steel parts is shown in fig 14 the left images are the steel models after importing the 3d reconstruction model into autocad software and the right images are the real objects with the required measurement dimensions to further verify the accuracy of this approach the measurements of these four steel parts with the existing method employed by workers in the shipyard were performed as well since these steel parts have not yet been assembled to form a larger section the workers usually measure them with an electronic level meter and a plummet instead of laser theodolite the data of actual length reconstruction length from the model and the measured length provided by workers of these steel parts are compared and listed in table 7 among small size steel part 1 3 4 the shortest length is 81 mm and the longest one 1190 mm and the span of the dimension has reached ten times while the relative error generated with the existing method ranges from 0 1 to 3 2 the one generated with the 3d reconstruction method ranges from 0 1 to 3 7 additionally the size of some parts such as the diameter of the hole in steel part 3 cannot be obtained by the existing method therefore for small size steel parts the proposed approach compared with the existing technology is easier to operate without losing accuracy and is able to provide measurements of all dimensions for steel part 2 with medium size the error rate generated with the 3d reconstruction method is about 0 1 0 8 while the corresponding one with the existing technology is less than 0 2 this indicates that the proposed method may not be as accurate as the existing technology when the measured target has larger size and still needs to be improved furthermore for steel part 2 it is interesting to find that the maximum error rate 1 829 occurs when actual length is the smallest with the value of 350 mm this indicates that it is not easy for 3d reconstruction model to capture the details of local features the ship construction accuracy requires that the error of the length and width of the ship block erection is 8 mm the deviation of the center line is not more than 15 mm plane 10 mm surface 15 mm and the distortion of the section assembly is not more than 25 mm plane 20 mm surface 25 mm it is known from the above data that in general for the 3d reconstruction of the steel parts the accuracy can be controlled within 3 indicating that it is feasible to apply the non contact measurement method based on sfm 3d reconstruction to shipbuilding industries according to the data of steel part 1 and 3 the error of the reconstruction size of the small and medium size sections can be controlled within 5 mm however from the data of steel part 2 the error of medium and large size sections is a little more than the accepted range and the method for the local features described above needs to be improved 5 conclusions in this paper a non contact measurement method for shipbuilding is proposed which combines the image based 3d reconstruction technology and the photogrammetry technology for feature points extraction and matching the sift algorithm combined with global vector were proved to be able to increase the feature points matching points and thus to improve quality of 3d reconstruction and the accuracy of measurement the shipyard experiments verified that the proposed image based 3d reconstruction technology is able to be applied to measure the ship blocks with satisfied accuracy which indicates that this novel measurement method could replace the traditional one with the advantages of easier operation less time and less depending on the occupational skills furthermore the obtained 3d reconstructed model could also be used for simulating the ship block erection on slipways at docks an indispensable step towards the target of digitalizing shipbuilding processes the next step focuses on the improvement of the 3d reconstruction accuracy of targets with large dimensions like automatically analyzing the point cloud data based on point cloud data edge detection in the future to get the full pictures of giant ship sections or blocks and to further build more accurate models it is also considered to install the rail tracks for infrared cameras to realize the all around shooting inside the workshop for the outdoor worksite unmanned aerial vehicle uav with cameras may facilitate the carrying out of shooting in all directions acknowledgment the authors gratefully acknowledge the sponsorship provided by tsueishi group zhou shan shipbuilding inc especially the assistance from the project coordinator mr kejie ma is highly appreciated and the expertise of the site manager of section assembly mr bohai xu is of great value to the research 
22915,nowadays the traditional measurement methods applied in ship sections blocks are heavily relied on years of experiences and could hardly meet the shipbuilding requirements due to their complicated and time consuming processes furthermore along with the development of photogrammetry the image based three dimensional 3d reconstruction technology has emerged and become flourishing in this paper we propose a novel measurement method based on image based 3d reconstruction technology to measure the construction deformation of ship blocks with high accuracy in a simple way the scheme only needs photos to rebuild the 3d model of ship block it includes the camera calibration the image preprocessing the feature points matching followed by the steps of dense point cloud generation meshes partition and 3d reconstruction with texture mapping in the step of feature points matching the scale invariant feature transform sift algorithm is used and optimized with the addition of the global vector to reduce the mismatch and enhance the reconstruction accuracy the shipyard experiments with shooting photos of arbitrary steel parts proved that the proposed image based 3d reconstruction technology is able to be applied to measure the ship blocks with satisfied accuracy and less time in shipbuilding industry or other industries with large scale one of a kind product as well keywords non contact measurement imaged based 3d reconstruction structure from motion scale invariant feature transform algorithm feature points extraction 1 introduction 1 1 background the ship hull construction method with the subdivided blocks segmented assembled and erected is widely used in shipbuilding around the world block erection is the process of welding the assembled neighboring blocks together according to a ship section plan to form a larger block on slipways at docks it is a critical phase and often a bottleneck for the timely ship delivery kim et al 2015 whether the block erection could be carried out according to the schedule largely depends on the on time delivery of blocks with their inevitable deformation known such deformation might be incurred by welding inaccurate position of steel parts or accumulated distortion of steel pieces during the sequential fabrication processes jang et al 2007 tajima et al 2007 it is crucial for the shipyard to make sure that the deformation of blocks falls into the range of permitted tolerances and no further corrections is required on the slipway since working conditions are not ideal there owing to factors such as difficult access limited space and hazardous working conditions and time should be spent as short as possible therefore the deformation of blocks should be accurately calculated and following correction measures should be well taken before their being transferred to the slipway currently to tackle this an indispensable step of deformation diagnosis is performed and the construction accuracy of blocks is constantly monitored and measured by experienced workers with laser theodolites or total stations which is deemed as a time consuming and heavily experiences relied procedure kniat 2009 zhang et al 2012 especially with the shrinkage of the shipbuilding market more skilled workers are forced to leave or switch to other industries without their years of occupational skills being transferred this manual measuring method would not be cost effective and reassuring in the long run this together with the rapid development of photogrammetry and computer vision techniques intrigues a challenge is it possible to implement the non contact ship block measurement with the 3d reconstruction technology so that when the block is transferred to the slipway dock to be erected with an adjacent block it is allowance free liu et al 2012 wang et al 2014 shirmohammadi and ferrero 2014 deparday et al 2016 tang et al 2016 1 2 related works monocular vision 3d reconstruction method which is able to obtain the geometric information of the real world object and reconstruct its 3d model is an indispensable part of computer vision technology wang et al 2014 it can be divided into active and passive modes koch et al 2015 the active mode includes structured light method schmalz et al 2012 xiong et al 2013 bosché et al 2015 and contour information method stentoumis et al 2013 saidani and ghorbel 2014 filho et al 2015 it chooses optical scanning to generate the 3d point clouds of objects and is mainly based on optical principle dipanda and woo 2005 jang et al 2013 this mode can produce high precision 3d model but with the assist of cost prohibitively equipment such as 3d laser scanners and furthermore large scale objects with spatial discontinuities i e object edges cannot be reconstructed since there exist the wide spreading disturbances suffered by light from their environments and the scanned data may contain inaccurate data points tang et al 2009 more critically with this method the follow up steps cannot analyze the obtained point cloud the passive method consists of image processing computer vision and photogrammetry technology to process the 2d image of the object and further generate its 3d model wohler 2004 jia et al 2012 caroti et al 2015 this process is also called image based 3d reconstruction because of the high complexity of the sequence images containing large amount of data the accuracy of the obtained 3d model with this method is relatively high in addition the image based 3d reconstruction method also has the following advantages 1 the size and complexity of the object to be measured is almost unlimited 2 some hidden local features can be captured 3 it requires not too much effort and professional skill 4 the equipment is cheap and easy to transport and install koelman 2010 so far image based 3d reconstruction method has demonstrated the promising applications in many fields in the field of civil construction 3d reconstruction technology has been successfully applied to collect as built spatial data of civil infrastructure and it is acceptable to control the average error within 3 and there are cases where the object still cannot be completely reconstructed especially the details bhatla et al 2012 fathi et al 2015 the application of 3d reconstruction technology in navigation has been studied as well the correspondence between image points and 3d space points can be established with adapting 3d reconstruction and terrain matching thereby obtaining precise navigation parameters required for long haul flight the position error can be controlled around 50 m zhu et al 2015 in the field of clinical medicine three dimensional computed tomography 3d ct technologies based on image based 3d reconstruction technology has been widely used in various types of preoperative simulation and actual surgical operations the reconstruction accuracy has reached the nanometer level owing to the expensive equipment and the smaller size of the reconstructed object chen yoshikawa and date 2016 in ecology image based 3d reconstruction techniques have been applied to surveying the distribution of megabenthos over multi hectare regions of the seafloor thornton et al 2016 in archaeology sector the application of 3d recording techniques in archaeology and heritage studies has grown exponentially in the past fifteen years in the case of boudelo 2 excavation de reu recorded the entire excavation process through image based 3d modeling technology and controlled the reconstruction error about 10 mm de reu et al 2014 however its application in shipbuilding industry still poses a challenge the following highlights some typical aspects in shipbuilding sector from a practical perspective 1 the size of ship blocks is comparatively large for example a typical double bottom block could easily reach to 6 0 m length 12 6 m width 1 4 m height 2 information of feature points edges of blocks is often behind a particular obstruction and a significant among of pictures taken from a variety of locations are needed 3 a given measured ship block is usually encompassed with another block stored closely due to the limited space in the shipyard or with cranes unfinished welding parts scaffoldings etc as shown in fig 1 such complicated environment brings many distractions and is detrimental in image processing step 4 the level of accuracy required especially for structure deformation measurement is high while meeting these stringent requirements may not be successful with image based 3d reconstruction method the application of image based 3d reconstruction technology in various fields is compared in terms of the size of reconstructed object the reconstruction precision and the photo shooting environment as shown in table 1 furthermore in the image based 3d reconstruction method the structure from motion sfm method requires fewer operation requirements wider application environment and better precision than other methods meanwhile the sfm method can divide the whole reconstruction processes into several modules and is easy to control and optimize and more robust to environmental noise light and other interferences micusik and wildenauer 2014 javernick et al 2014 cebrián robles and ortega casanova 2016 therefore considering the characteristics of both shipbuilding processes and the image based 3d reconstruction approach the sfm method was chosen in our research to explore the application of computer vision technology in shipbuilding sector this paper explores the steps necessary to implement measurements based on 3d reconstruction technology and especially in feature matching step an optimized method is suggested to improve the reconstruction and measurement accuracy in addition the paper also verifies the feasibility of the method through shipyard experiments it is expected that the proposed approach is able to counter the challenge and prove the feasibility of image based 3d reconstruction technology in shipbuilding and to overcome the limitations of the existing measurement techniques such as heavily relied on experience more time spent complicated operations and less accurate in this paper apart from the introduction in section 1 section 2 presents the overall process of this study and the image based 3d reconstruction measurement method is explained in detail section 3 describes the optimization of the feature points extraction and matching algorithm to improve the efficiency and accuracy of the reconstruction results section 4 verifies the application feasibility of this novel measurement method through the field tests in the shipyard followed by section 5 to wrap up the paper 2 an overview of non contact measurement to measure the ship block an overview of non contact measurement to measure the ship block using image based 3d reconstruction technology is presented here as the flow chart in fig 2 displays it consists of four main steps marked in dark blue i e camera calibration image processing feature points matching and 3d model generation for each step its missions are elaborated with yellow box its corresponding experimental verification step is listed and colored in light red and its involved key algorithms are mentioned and marked in light blue in the end it is expected that measurement data could be obtained by comparing the reconstructed model with the corresponding designed model and thus the accuracy of the target ship block could be calculated in this section first the steps of camera calibration and image processing are delineated in section 2 1 with the example of three groups of work scenario images then the main process of steps of feature points matching and 3d model generation is elaborated in section 2 2 and third the preliminary verification of the non contact method is performed with the studied case of a hand made wooden ship section 2 1 camera calibration and image preprocessing camera calibration and image preprocessing are integral parts of 3d object reconstruction research based on 2d images camera calibration is the basic step to restore the data of the real 3d world image preprocessing is the necessary simplification of the research process under the premise of only studying the structure of objects and can relatively improve the accuracy of the obtained data pollefeys and van gool 1999 habe and nakamura 2012 gonzalez and woods 2017 in this paper zhang s camera calibration method was selected to obtain the parameters and correct the distortion of the image zhang 1999 salvi et al 2002 it not only overcomes the shortcomings of the traditional calibration method that requires high precision calibration of objects but compared with the self calibration method is easy to operate while achieving high precision calibration with only one printed checkerboard used to complete the calibration furthermore the original images obtained by imaging systems must be preprocessed at the beginning since they cannot be directly applied to computer vision system due to various constraints and external random disturbances the purposes of the preprocessing process are listed as follows 1 to enhance the image related information 2 to improve the image quality 3 to weaken the irrelevant information during processing 4 to suppress the unnecessary image distortion 5 to emphasize the important image features in the subsequent image processing pham et al 2012 zeng et al 2012 in this paper the methods of histogram equalization and wiener filtering were chosen to enhance the data and reduce the noise of the original images respectively to verify them the sift algorithm was used to extract the feature points of the images before and after processing through the information of their position size and direction lowe 2004 peng et al 2009 here feature points refer to the points where the gray value of the image in the area changes drastically such as corner points edge and so on fig 3 is the image comparison of three scenarios before and after image preprocessing the left of which are original images and the right are their corresponding ones after being processed the green lines in the figure represent the feature points extracted from the image by the sift algorithm it is obvious that more feature points could be extracted from the images after being preprocessed in three scenarios table 2 lists the numbers of extracted feature points it shows that after image processing the number of feature points extracted from one image has been significantly increased up to 21 times this proves that the selected image processing methods are more capable and suitable for the subsequent work in which the feature points would be matched with the corresponding ones from the rest multiple images and therefore form the three dimensional point cloud 2 2 feature points matching and 3d model generation the main process of steps of feature points matching and 3d model generation is as follows 1 sift algorithm is used to realize the feature points matching in the corrected and preprocessed image 2 the camera position is automatically matched by using sfm method to determine the 3d coordinate system to obtain the sparse point cloud of the object 3 clustering views for multi view stereo cmvs patch based multi view stereo pmvs algorithm are used to generate the dense point cloud 4 the polygon mesh is generated by poisson surface reconstruction and the texture is given to the polygon mesh to polish and finalize the reconstruction model zhang 1999 furukawa and ponce 2009a the detailed description of this method is presented here sfm method is used to generate the sparse point cloud consisting of matching feature points with sift algorithm and defining their 3d coordinates with obtaining the camera position furukawa and ponce 2007 2009b brito 2017 since there are many overlapping points in the sparse point cloud using the sfm method it is necessary to introduce cmvs algorithm from the negative side to cluster the images reduce the amount of miss matching data and thus improve the matching efficiency furthermore it is also necessary to apply the pmvs algorithm to densify the sparse point cloud from the positive aspect furukawa et al 2010 with the help of both cmvs and pmvs algorithm the dense point cloud is obtained to further substantiate the dene point cloud model polygon mesh is required here we use poisson surface reconstruction algorithm to obtain the polygon meshed model because of its enabling of good geometric surface features and detail features furukawa and ponce 2007 berger et al 2017 and this step was finalized by giving the texture to the polygon meshed model which makes it more vivid and animated 2 3 verification of the noncontact measurement method we use a hand made ship section model made of wooden boards to conduct the preliminary verification of the measurement method the verification of a real ship section in shipyard would be described in details in section 4 first we rebuild the 3d model of this hand made ship section according to the sfm method the sift algorithm is applied to perform the feature points matching and to obtain a sparse point cloud of the target and the result is shown in fig 4 furthermore the sparse point cloud is encrypted using the cmvs pmvs algorithm to generate a dense point cloud as displayed in fig 5 fig 6 is the polygon mesh of the model generated by poisson surface reconstruction fig 7 shows the texture of the polygon mesh and thus the 3d model of the hand made ship section is reconstructed after the model is rebuilt the measured length of the 3d model is compared with the corresponding actual length to examine the reconstruction accuracy the results are shown in table 3 the side length of the grid is 30 mm and used as a ruler and therefore its reconstruction length has no error the data in the table shows that although the size error of the reconstructed model is no more than 3 mm there is the error size of 1 0616 mm at the actual length of 10 mm and the error size exceeds 10 of the actual size this reflects the unsatisfactory feature points extraction and matching of small steel parts in real ship measurement thus the algorithm optimization is still needed to reduce the error and improve the reconstruction accuracy 3 optimization of feature points extraction and matching algorithm matching the feature points between the same two images means to determine that a certain point in the previous image corresponds to the same point in the latter image and both are reflecting the same point on the targeting object peng et al 2009 sun et al 2014 the quality of feature points extraction and matching largely determines the efficiency and accuracy of the reconstruction results this section has proposed two schemes to optimize this algorithm since different feature points extraction and matching algorithms have their own advantages and disadvantages the first scheme is to combine multiple chosen algorithms with the intention of suppressing the shortcomings and making full use of each advantage the second scheme is to optimize the sift algorithm 3 1 combination algorithm harris ncc ransac we first propose the combination algorithm of harris corner detection harris normalized cross correlation ncc and random sample consensus ransac based on their characteristics harris corner is the basis of feature points detection and is based on the template to determine whether an arbitrary point is a corner point or a point on an edge or on a smooth surface ram and padmavathi 2016 the ncc algorithm is used to determine the similarity between two images and can effectively reduce the influence of illumination on the image comparison and the results are easily quantified and compared as well sarvaiya et al 2009 the advantage of the ransac algorithm is that it can robustly estimate model parameters for example to estimate high precision parameters from a data set containing a large number of outliers safy et al 2013 here we use the harris operator corner point to detect and extract the corner points as feature points kim et al 2015 and these feature points are used as initial matching pairs of ncc algorithm then correct these matching pairs and perform the preliminary screening in the meantime the ransac algorithm is applied in the matching process to detect and extract mismatch points chum et al 2003 finally the initial matching pairs are calculated and the mismatch points are eliminated due to the complex characteristics of the shipbuilding processes the captured images contain not only the target but also many other surrounding objects and there exist many mismatched feature points in order to verify the effectiveness of this combination algorithm we use the original images taken from the shipyard without preprocessing to find the wrong match pairs the match result is shown in fig 8 in which two original images of the same object were displayed and the matching points between the two images with both the combination algorithm and the sift algorithm were connected by yellow and blue lines respectively the data listed in table 4 shows that the combination algorithm is able to reduce the mismatched point rate 3 2 sift algorithm combined with global vector the second approach to optimize the feature points extraction and matching is based on the sift algorithm it is known that in real world if there are multiple similar regions in the image the feature points obtained by the sift algorithm would have great similarities resulting in mismatches to tackle this problem the sift algorithm combined with global vector was proposed originally a descriptor of sift represents the local characteristic of a feature point here a global vector was added to distinguish the similar local features mortensen et al 2005 cao et al 2010 it is used to calculate the curvature of the pixel in the nearby region of a feature point in order to reduce the mismatch caused by multiple similar matching points in one feature point the ratio of the nearest neighbor and the next nearest neighbor feature points was compared and analyzed thus the chance of matching failure caused by the local deviation in similar regions is reduced the same original images in fig 8 has been used here to compare the effectiveness of the sift algorithm and the sift algorithm combined with the global vector as shown in fig 9 in which the matching points were connected by blue lines too as can be seen from table 5 the improved algorithm has a significant increase in the number of matching feature points which is more preferable for 3d reconstruction 3 2 1 comparison of experimental results after algorithm optimization the sift algorithm has a remarkable feature that is the small neighborhoods around the two feature points have similarities if only the local information is considered it will inevitably lead to the mismatch after adding the global vector the pair of mismatched points is eliminated this shows that compared with the original sift algorithm the feature points extracted by the sift algorithm combined with the global information can better describe the edge information of the hull section it can be seen from section 3 1 and 3 2 that the combination algorithm reduces the number of matching points by 21 1 while reducing the mismatch rate only by 1 7 meanwhile sufficient matching points are also an important prerequisite for good 3d reconstruction the sift algorithm combined with the global vector not only significantly reduces the mismatch rate 7 6 but also greatly increases the number of matching points actually after numerous image tests the minimum number of matching points can be increased by 19 and further improve the matching effect in this paper the sift algorithm combined with global vector is finally selected to be applied to image based 3d reconstruction non contact measurement method and the accuracy comparison experiment was carried out by using the hand made wooden model described in section 2 3 the data of the comparison in table 6 shows the errors above 0 5 mm are reduced by a maximum of nearly 70 and with a minimum of 1 38 therefore it is proved that the sift algorithm combined with the global vector could improve the accuracy of the 3d reconstruction model 4 experimental verification in this section the field tests in shipyard were conducted to verify the application feasibility of this novel measurement method in the shipbuilding industry four arbitrary steel parts were chosen in a section assembly workshop in the shipyard their corresponding 3d reconstruction models were obtained after the implementation of the above described 3d reconstruction method the accuracy of the 3d reconstruction model was analyzed through the comparison of dimensions either with the real ones or with the ones provided by workers on the site firstly the specially calibrated hand held camera was used to shoot the steel parts from different angles and directions the shooting process includes a 90 degree rotating camera to shoot more than 1 3 of the total number of photos the sfm algorithm and the sift algorithm combined with global vector have been used to generate the sparse 3d point cloud reconstruction model after the feature points are matched the outline of the structure can be vaguely viewed and the results of four steel parts are shown in fig 10 their corresponding dense 3d point cloud models are obtained as displayed in fig 11 with the help of cmvs pmvs algorithm furthermore the piecewise polygonal mesh models of four steel parts are produced by poisson surface reconstruction and the result is shown in fig 12 it enriches the details of the structure after attaching the texture to the polygon mesh fig 13 shows that even the position and size of the stickers on the tested steel parts could be clearly spotted therefore the reconstruction models of the field tests show that the proposed method could realize the complete restoration of steel parts and the reconstructed model has no defects compared with the measured structure it can be clearly seen that not only the local features are obvious but also the edges are very neat and easy to measure 4 1 results analysis the reconstructed model can be interfaced with software such as autocad to obtain its 3d dimensions which makes available the further comparison with the real size to analyze its accuracy the measurement of four steel parts is shown in fig 14 the left images are the steel models after importing the 3d reconstruction model into autocad software and the right images are the real objects with the required measurement dimensions to further verify the accuracy of this approach the measurements of these four steel parts with the existing method employed by workers in the shipyard were performed as well since these steel parts have not yet been assembled to form a larger section the workers usually measure them with an electronic level meter and a plummet instead of laser theodolite the data of actual length reconstruction length from the model and the measured length provided by workers of these steel parts are compared and listed in table 7 among small size steel part 1 3 4 the shortest length is 81 mm and the longest one 1190 mm and the span of the dimension has reached ten times while the relative error generated with the existing method ranges from 0 1 to 3 2 the one generated with the 3d reconstruction method ranges from 0 1 to 3 7 additionally the size of some parts such as the diameter of the hole in steel part 3 cannot be obtained by the existing method therefore for small size steel parts the proposed approach compared with the existing technology is easier to operate without losing accuracy and is able to provide measurements of all dimensions for steel part 2 with medium size the error rate generated with the 3d reconstruction method is about 0 1 0 8 while the corresponding one with the existing technology is less than 0 2 this indicates that the proposed method may not be as accurate as the existing technology when the measured target has larger size and still needs to be improved furthermore for steel part 2 it is interesting to find that the maximum error rate 1 829 occurs when actual length is the smallest with the value of 350 mm this indicates that it is not easy for 3d reconstruction model to capture the details of local features the ship construction accuracy requires that the error of the length and width of the ship block erection is 8 mm the deviation of the center line is not more than 15 mm plane 10 mm surface 15 mm and the distortion of the section assembly is not more than 25 mm plane 20 mm surface 25 mm it is known from the above data that in general for the 3d reconstruction of the steel parts the accuracy can be controlled within 3 indicating that it is feasible to apply the non contact measurement method based on sfm 3d reconstruction to shipbuilding industries according to the data of steel part 1 and 3 the error of the reconstruction size of the small and medium size sections can be controlled within 5 mm however from the data of steel part 2 the error of medium and large size sections is a little more than the accepted range and the method for the local features described above needs to be improved 5 conclusions in this paper a non contact measurement method for shipbuilding is proposed which combines the image based 3d reconstruction technology and the photogrammetry technology for feature points extraction and matching the sift algorithm combined with global vector were proved to be able to increase the feature points matching points and thus to improve quality of 3d reconstruction and the accuracy of measurement the shipyard experiments verified that the proposed image based 3d reconstruction technology is able to be applied to measure the ship blocks with satisfied accuracy which indicates that this novel measurement method could replace the traditional one with the advantages of easier operation less time and less depending on the occupational skills furthermore the obtained 3d reconstructed model could also be used for simulating the ship block erection on slipways at docks an indispensable step towards the target of digitalizing shipbuilding processes the next step focuses on the improvement of the 3d reconstruction accuracy of targets with large dimensions like automatically analyzing the point cloud data based on point cloud data edge detection in the future to get the full pictures of giant ship sections or blocks and to further build more accurate models it is also considered to install the rail tracks for infrared cameras to realize the all around shooting inside the workshop for the outdoor worksite unmanned aerial vehicle uav with cameras may facilitate the carrying out of shooting in all directions acknowledgment the authors gratefully acknowledge the sponsorship provided by tsueishi group zhou shan shipbuilding inc especially the assistance from the project coordinator mr kejie ma is highly appreciated and the expertise of the site manager of section assembly mr bohai xu is of great value to the research 
22916,an aircraft carrier is characterized by a superstructure where different systems are installed this configuration is similar to a set of bluff bodies with sharp edges where massive flow separation appears in the wake depending on the wind over deck wod conditions the flow field changes dramatically hence aircraft performances are affected due to the adverse aerodynamic effects generated flight envelopes are needed to determine aircraft operating range in situ measurements are costly and time consuming numerical simulations are providing some solutions to this problem however they have to be validated by matching simulation results to those from experimental measurements in the present paper the study of the flow configuration at different wind angles has been conducted particle image velocimetry technique was used to obtain flow information due to the accurate results provided non dimensional velocity and turbulence maps are presented in order to provide flow field characterization keywords wind direction wind tunnel particle image velocimetry aircraft carrier 1 introduction aircraft carriers are affected by a combination of factors such as weather ship s motion ship configuration and sea conditions platt 1998 the maritime environmental interface can be divided in two major regions plus a smooth transition region platt 1998 the near region is heavily influenced by the superstructure antennas radomes masts and chimney among others elements of the ship platt 1998 however the ship s air wake also affects the far field increasing the unsteadiness which can reach distances several times the ship s size platt 1998 kang et al 2016 lumsden 2003 as stated sea conditions affect the ship s motion due to wave action rolling pitching and heaving are the resulting movements maslov et al 1999a rolling and pitching are narrow band processes i e slightly damped which are initialized at the natural frequency of the ship this implies that large amplitudes can be caused by high energetic waves especially for roll which results in a limiting factor platt 1998 however a correct modelling of these effects are difficult in wind tunnel maslov et al 1999a therefore the investigations in the present paper are restricted to yawing condition analysis considering the ship configuration the superstructure could be defined as a bluff body with sharp edges where a massive flow separation appears in its wake maslov et al 1999a rhoades and healey 1992 with high reynolds number of the order of 107 109 platt 1998 the complex vortex system and the high turbulent regions that appear in the near field maslov et al 1999a could affect aircraft operation platt 1998 furthermore wind over deck wod conditions modify the flow structure where the general character of the air wake changes dramatically platt 1998 kang et al 2016 rhoades and healey 1992 polsky 2002 previous researches developed at inta showed that the flight path of the aircraft carrier under study is affected by the wind conditions at windward the ski jump system generates adverse effect for aircraft take off performances bardera mora et al 2016 previous researchers have indicated that one of the most critical regions for helicopter operations is located downstream the island maslov et al 1999b brownell et al 2012 nacakli et al 2012 findlay and ghee 2006 at cross wind conditions the flow field is detached by the island solid structure and would interact with helicopter operations bardera mora et al 2017 notice that high and low frequency disturbances i e outside the 0 2 hz 2 hz range are damped by the rotor system and corrective control respectively shafer and ghee 2005 however within that frequency range the unsteady loads generated are considered to be the critical cases of study due to the high energy mcruer 1994 kääriä et al 2013 flight envelopes are needed to determine safe aircraft operating range numerical simulations save time and money as well as it allows to obtain results at more conditions however they have to be validated by matching simulation results to those from experimental measurements kang et al 2016 wind tunnel experimental investigation are useful to reduce in situ measurements which are costly and time expensive and to provide data supporting numerical computation although the overall geometry and the sea shear layer are not properly simulated the results obtained with this technique would present interesting results kang et al 2016 several investigations about the flow around frigates have been performed by both numerical and experimental methods forrest and owen 2010 yuan et al 2018a 2018b providing insight about the flow developed on the flight deck of frigates but some differences with the aircraft carrier aerodynamics are found when analysing the flow structures provoked by the curved ski jump ramp and the propagation of these aerodynamic structures along the flight deck regarding aircraft carriers aerodynamics although similar studies were carried out in the past for flat deck aircraft carriers lumsden 2003 this paper shows the investigation of the flow field for different wind over deck conditions in order to fill a void found in the study of aircraft carriers with ski jump ramp configuration the novelty of this work is to present measurements of the velocity field and turbulence intensity from 90 to 90 above the flight deck of an aircraft carrier equipped with ski jump ramp by using particle image velocimetry a non intrusive technique of quantitative visualization the flow structure was studied in the region of interest which is affected by the superstructure and other elements which constitute the ship configuration the results can be used to determine the flight envelopes for each aircraft type and to identify the conditions that might cause operational problems in addition the advantages presented by experimental and numerical investigation to predict air wake configuration could be used as a design tool to address air operations early in a ship design 2 experimental setup 2 1 aircraft carrier model the aircraft carrier studied has a similar configuration to an american lhd landing helicopter dock this ship is characterized by a flight deck ended in a ski jump ramp to facilitate take off operations and a superstructure where radomes antennas stacks and other systems are installed see fig 1 a 1 100 scaled ship model was selected to avoid wind tunnel blockage effects barlow et al 1999 which implies that the maximum model ship cross section lower than 10 of the wind tunnel area at crosswind condition extreme position the main ship model dimensions are indicated in fig 2 in millimetres as it can be observed the ship only represents the structure above the waterline which is subjected to aerodynamic interferences furthermore freestream velocity u and the piv laser sheet location for a relative wind of 90 is also indicated as a particular case study the spot studied is also indicated as spot 4 in fig 2 this spot was chosen among other from 1 to 6 painted along the landing flight deck because it is located in the middle of flight deck and it is very representative for wind ahead flow condition and it is inside the wake of isle produced when blowing cross wind height elevation of spot 4 is 5 cm from the flight deck of the model corresponding to 5 m at full scale airflow in this spot was studied by using a square piv window size of 3 9 3 9 mm2 2 2 relative wind as stated different relative wind velocity directions have been studied assuming a ship in rectilinear cruise along x b axis at constant speed v s that induces a wind velocity v i and atmospheric wind v w with an incident angle of β with respect to x b axis of the aircraft carrier the relative wind velocity v r is defined as a result of the contributions of these velocities as given by the following vector expression 1 v r v w v i v w v s where v i is the induced velocity by a consequence of the ship motion given by the following expression 2 v i v s v s i the relative wind velocity vector can be express in an equivalent form 3 v r v r cos ψ i sin ψ j where ψ is the relative wind angle i and j are the unitary vectors in axes directions and the vector relative wind velocity is 4 v r v w cos β v s i v w sin β j on the other hand v r is the modulus of relative wind velocity is given by 5 v r v w 2 v s 2 2 v w v s cos β where β is the atmospheric wind angle the wind angles ratio is given by 6 sin ψ sin β v w v r and finally the relative wind angle is 7 tan ψ v w sin β v w cos β v s fig 3 shows a schematic where the velocity vectors and the different angles are indicated by using a body axes system ox b y b z b fixed to the ship during wind tunnel tests the relative wind velocity is simulated by the wind tunnel speed u notice that the velocity direction is obtained by changing the yaw angle spinning around z axis of ship model furthermore considering that the piv laser sheet is located parallel to the free stream velocity of the wind tunnel it is possible to determine the coordinate transformation between piv maps and the aircraft carrier emplacement in a classical form by means of a rotation matrix barlow et al 1999 the angle ψ variation implies that the vertical axis of piv and aircraft carrier keep constant see fig 4 2 3 wind tunnel the experimental tests were carried out in the facilities of the instituto nacional de técnica aeroespacial inta spain the low speed wind tunnel has a maximum speed of 60 m s and a turbulence intensity lower than 0 5 of the free stream this tunnel has a closed circuit with an open test section with a nozzle of 2 3 m2 see fig 5 the model studied was supported by a platform see fig 6 which simulates the sea surface in addition the streamlined leading and trailing edges minimize boundary layer development of the platform the tests were conducted at 10 m s of airspeed which implies that the reynolds number during the experiments 1 8 105 beam based reynolds number was higher than 104 considered the critical one for structures with sharp edges healey 1992 it is believed that the flow over such sharp edged bluff body structures is insensitive to reynolds number above the aforementioned limit 2 4 particle image velocimetry particle image velocimetry piv is a technique which uses instantaneous flow field information to obtain flow characteristics piv has resulted in a highly valued tool in the study of fluid mechanics prasad 2000 due to the high accuracy kompenhans et al 1996 the ability to obtain quantitative information and the capability to make global velocity measurements the flow information was obtained by using laskin nozzle atomizers echols and young 1963 which generate olive oil tracer particles with a diameter of the order of 1 μm kähler et al 2002 the characteristics of these tracer particles allow to scatter enough light and avoid buoyancy and inertial problems these particles were illuminated with two neodymium yttrium aluminium garnet nd yag lasers with a maximum energy of 190 mj per pulse a frequency of 10 hz and a pulse separation time δt of 25 μs a total of 200 pair of images were recorded by a high resolution ccd camera 2048 2048 pixels which captured the scattered light these images were subsampled into small interrogation window of 32 32 pixels in size prasad 2000 and an overlapping of 50 in both directions following the nyquist sampling criteria raffel et al 1998 adrian 1991 adrian and westerweel 2011 the camera field of view fov was 250 250 mm2 spurious vectors were eliminated by using a post processing analysis with a local mean filter of 3 3 pixels in size the velocity vectors in each interrogation window were computed based on the particle displacement and the pulse separation time the particle displacement was computed implementing a cross correlation analysis between each pair of images in the last years this process has been accelerated by means of advanced computational methods willert and gharib 1991 the most important feature of the actual implementation of digital piv dpiv technique is the use of 2d fast fourier transform fft to simplify and speed up the computational process prasad 2000 considering the similarity between spatial cross correlation and convolution and the fourier transform properties the particle displacement can be obtained as follows 8 φ c r o s s x z f 1 g 1 ζ η g 2 ζ η where ℱ 1 is the inverse fourier transform g 1 and g 2 are the fourier transforms of the light intensity distributions of each pair of images g 2 is the complex conjugated of g 2 and ζ η are the components in the correlation plane the stronger peak obtained with this algorithm corresponds to the averaged motion of the particles within the interrogation window this correlation peak is located with sub pixel accuracy by fitting a gaussian curve prasad 2000 3 results the results obtained in the different tests are presented in the following pages where the non dimensional velocity and turbulence intensity are calculated as stated the velocity maps are computed using the non dimensional variable u u m a g u based on the wind tunnel speed u at each experimental case the streamlines are also plotted to provide information about the direction and configuration of the region studied the flow field velocity can be observed in fig 7 for each angle tested considering that the laser sheet position of the piv does not change along the tests and the model ship spins around spot 4 to obtain the required incident angle the flow configuration observed depends on the aircraft carrier structure located in the region upstream the laser sheet hence black dashed line indicates the location of the laser sheet plane as well as the wind direction and the solid red line indicates the side of the laser sheet recorded by the piv camera which is centred in the spot 4 from previous investigations bardera mora et al 2016 it was observed that a recirculation bubble appeared over the ski jump ramp at zero incidence angle condition however spot 4 regions show a uniform flow so it is not affected by that turbulent region generated at the bow for slight tilt of wind direction 15 maps are showing low deflection of streamlines although upwash case would be affected in a higher degree by the proximity to the sharp edges of the flight deck the velocity maps show that downwash wod presents a bigger influenced region this interference could be due to the lateral effects generated by the island presence higher wind incidence angles 30 produce a stronger deviation of the streamlines as it can be observed for case 30 the island presence has high influence on upwash wind in contrast for 30 downwash case shows that the sharp edge of the flight deck generates a flow detachment but a lower region is perturbed at angles of 60 and 90 the flow structure is characterized by a region which hold a recirculation bubble similar flow configuration appears at 60 and 90 where a flow detachment appears due to the flight deck geometry at positive angles a higher low velocity region appears but the streamlines show different flow structure at 60 a recirculation bubble zone does not appeared however at crosswind the separated flow structure is clearly defined the turbulence intensity maps t i σ u u are also represented in fig 8 which were computed based on the total standard deviation of the velocity σ u and the wind tunnel speed this variable shows the variation of the velocity at each measured point with respect to the free stream velocity u when wind is blowing at moderate angles of incidence from 0 to 30 the turbulence intensity is about 20 which means that low velocity fluctuations are generated for higher incidence angles the maps show high level of turbulence rising up to 40 denoting the formation of turbulent shear layers which bound the recirculation bubbles observed in the velocity maps 4 conclusions aircraft carriers are affected by a combination of factors such as weather ship s motion ship configuration and sea conditions regarding the superstructure presence the wind incidence angle conditions modify the flow structure where the general character of the air wake changes dramatically depending on the ship and aircraft configurations flight envelopes are needed to determine at each operational case different wind conditions have been experimentally investigated for a representative spot of an aircraft carrier by means of particle image velocimetry piv which is a non intrusive technique spot 4 is considered the most important location for helicopters operations which is located over the flight deck at half length the flight deck and affected by the superstructure and sharp edges piv measurements of velocity and turbulence have been presented by classical maps showing very interesting results from a safety point of view at ahead wind conditions and 15 the region is slightly perturbed by the surroundings which implies that helicopter operations would have low interferences at higher wod it can be appreciated that the region of interest is badly modified by the sharp edges due to island and flight deck configuration specially 60 and 90 cases revealed a highly turbulent structure of the separated flow above the flight deck which would produce strong velocity gradients in the helicopter paths during landing and taking off operations thus this investigation provides insight about the flow as a way to perform and assessment of potential risks for helicopter operations concluding as a lesson learned that flow coming from 60 and 90 produces very turbulent shear layers and high risk conditions so that helicopters must avoid on board operations when these conditions are present regarding that the aircraft presence induces flow configuration variation future investigations could be carried out to study the aircraft ship dynamic interface furthermore other spot locations would be another interesting research field due to the asymmetric configuration of the ship finally a solution to mitigate the adverse effects generated at high wod conditions by means of flow control devices is an interesting research field which could result in a wider operational range 
22916,an aircraft carrier is characterized by a superstructure where different systems are installed this configuration is similar to a set of bluff bodies with sharp edges where massive flow separation appears in the wake depending on the wind over deck wod conditions the flow field changes dramatically hence aircraft performances are affected due to the adverse aerodynamic effects generated flight envelopes are needed to determine aircraft operating range in situ measurements are costly and time consuming numerical simulations are providing some solutions to this problem however they have to be validated by matching simulation results to those from experimental measurements in the present paper the study of the flow configuration at different wind angles has been conducted particle image velocimetry technique was used to obtain flow information due to the accurate results provided non dimensional velocity and turbulence maps are presented in order to provide flow field characterization keywords wind direction wind tunnel particle image velocimetry aircraft carrier 1 introduction aircraft carriers are affected by a combination of factors such as weather ship s motion ship configuration and sea conditions platt 1998 the maritime environmental interface can be divided in two major regions plus a smooth transition region platt 1998 the near region is heavily influenced by the superstructure antennas radomes masts and chimney among others elements of the ship platt 1998 however the ship s air wake also affects the far field increasing the unsteadiness which can reach distances several times the ship s size platt 1998 kang et al 2016 lumsden 2003 as stated sea conditions affect the ship s motion due to wave action rolling pitching and heaving are the resulting movements maslov et al 1999a rolling and pitching are narrow band processes i e slightly damped which are initialized at the natural frequency of the ship this implies that large amplitudes can be caused by high energetic waves especially for roll which results in a limiting factor platt 1998 however a correct modelling of these effects are difficult in wind tunnel maslov et al 1999a therefore the investigations in the present paper are restricted to yawing condition analysis considering the ship configuration the superstructure could be defined as a bluff body with sharp edges where a massive flow separation appears in its wake maslov et al 1999a rhoades and healey 1992 with high reynolds number of the order of 107 109 platt 1998 the complex vortex system and the high turbulent regions that appear in the near field maslov et al 1999a could affect aircraft operation platt 1998 furthermore wind over deck wod conditions modify the flow structure where the general character of the air wake changes dramatically platt 1998 kang et al 2016 rhoades and healey 1992 polsky 2002 previous researches developed at inta showed that the flight path of the aircraft carrier under study is affected by the wind conditions at windward the ski jump system generates adverse effect for aircraft take off performances bardera mora et al 2016 previous researchers have indicated that one of the most critical regions for helicopter operations is located downstream the island maslov et al 1999b brownell et al 2012 nacakli et al 2012 findlay and ghee 2006 at cross wind conditions the flow field is detached by the island solid structure and would interact with helicopter operations bardera mora et al 2017 notice that high and low frequency disturbances i e outside the 0 2 hz 2 hz range are damped by the rotor system and corrective control respectively shafer and ghee 2005 however within that frequency range the unsteady loads generated are considered to be the critical cases of study due to the high energy mcruer 1994 kääriä et al 2013 flight envelopes are needed to determine safe aircraft operating range numerical simulations save time and money as well as it allows to obtain results at more conditions however they have to be validated by matching simulation results to those from experimental measurements kang et al 2016 wind tunnel experimental investigation are useful to reduce in situ measurements which are costly and time expensive and to provide data supporting numerical computation although the overall geometry and the sea shear layer are not properly simulated the results obtained with this technique would present interesting results kang et al 2016 several investigations about the flow around frigates have been performed by both numerical and experimental methods forrest and owen 2010 yuan et al 2018a 2018b providing insight about the flow developed on the flight deck of frigates but some differences with the aircraft carrier aerodynamics are found when analysing the flow structures provoked by the curved ski jump ramp and the propagation of these aerodynamic structures along the flight deck regarding aircraft carriers aerodynamics although similar studies were carried out in the past for flat deck aircraft carriers lumsden 2003 this paper shows the investigation of the flow field for different wind over deck conditions in order to fill a void found in the study of aircraft carriers with ski jump ramp configuration the novelty of this work is to present measurements of the velocity field and turbulence intensity from 90 to 90 above the flight deck of an aircraft carrier equipped with ski jump ramp by using particle image velocimetry a non intrusive technique of quantitative visualization the flow structure was studied in the region of interest which is affected by the superstructure and other elements which constitute the ship configuration the results can be used to determine the flight envelopes for each aircraft type and to identify the conditions that might cause operational problems in addition the advantages presented by experimental and numerical investigation to predict air wake configuration could be used as a design tool to address air operations early in a ship design 2 experimental setup 2 1 aircraft carrier model the aircraft carrier studied has a similar configuration to an american lhd landing helicopter dock this ship is characterized by a flight deck ended in a ski jump ramp to facilitate take off operations and a superstructure where radomes antennas stacks and other systems are installed see fig 1 a 1 100 scaled ship model was selected to avoid wind tunnel blockage effects barlow et al 1999 which implies that the maximum model ship cross section lower than 10 of the wind tunnel area at crosswind condition extreme position the main ship model dimensions are indicated in fig 2 in millimetres as it can be observed the ship only represents the structure above the waterline which is subjected to aerodynamic interferences furthermore freestream velocity u and the piv laser sheet location for a relative wind of 90 is also indicated as a particular case study the spot studied is also indicated as spot 4 in fig 2 this spot was chosen among other from 1 to 6 painted along the landing flight deck because it is located in the middle of flight deck and it is very representative for wind ahead flow condition and it is inside the wake of isle produced when blowing cross wind height elevation of spot 4 is 5 cm from the flight deck of the model corresponding to 5 m at full scale airflow in this spot was studied by using a square piv window size of 3 9 3 9 mm2 2 2 relative wind as stated different relative wind velocity directions have been studied assuming a ship in rectilinear cruise along x b axis at constant speed v s that induces a wind velocity v i and atmospheric wind v w with an incident angle of β with respect to x b axis of the aircraft carrier the relative wind velocity v r is defined as a result of the contributions of these velocities as given by the following vector expression 1 v r v w v i v w v s where v i is the induced velocity by a consequence of the ship motion given by the following expression 2 v i v s v s i the relative wind velocity vector can be express in an equivalent form 3 v r v r cos ψ i sin ψ j where ψ is the relative wind angle i and j are the unitary vectors in axes directions and the vector relative wind velocity is 4 v r v w cos β v s i v w sin β j on the other hand v r is the modulus of relative wind velocity is given by 5 v r v w 2 v s 2 2 v w v s cos β where β is the atmospheric wind angle the wind angles ratio is given by 6 sin ψ sin β v w v r and finally the relative wind angle is 7 tan ψ v w sin β v w cos β v s fig 3 shows a schematic where the velocity vectors and the different angles are indicated by using a body axes system ox b y b z b fixed to the ship during wind tunnel tests the relative wind velocity is simulated by the wind tunnel speed u notice that the velocity direction is obtained by changing the yaw angle spinning around z axis of ship model furthermore considering that the piv laser sheet is located parallel to the free stream velocity of the wind tunnel it is possible to determine the coordinate transformation between piv maps and the aircraft carrier emplacement in a classical form by means of a rotation matrix barlow et al 1999 the angle ψ variation implies that the vertical axis of piv and aircraft carrier keep constant see fig 4 2 3 wind tunnel the experimental tests were carried out in the facilities of the instituto nacional de técnica aeroespacial inta spain the low speed wind tunnel has a maximum speed of 60 m s and a turbulence intensity lower than 0 5 of the free stream this tunnel has a closed circuit with an open test section with a nozzle of 2 3 m2 see fig 5 the model studied was supported by a platform see fig 6 which simulates the sea surface in addition the streamlined leading and trailing edges minimize boundary layer development of the platform the tests were conducted at 10 m s of airspeed which implies that the reynolds number during the experiments 1 8 105 beam based reynolds number was higher than 104 considered the critical one for structures with sharp edges healey 1992 it is believed that the flow over such sharp edged bluff body structures is insensitive to reynolds number above the aforementioned limit 2 4 particle image velocimetry particle image velocimetry piv is a technique which uses instantaneous flow field information to obtain flow characteristics piv has resulted in a highly valued tool in the study of fluid mechanics prasad 2000 due to the high accuracy kompenhans et al 1996 the ability to obtain quantitative information and the capability to make global velocity measurements the flow information was obtained by using laskin nozzle atomizers echols and young 1963 which generate olive oil tracer particles with a diameter of the order of 1 μm kähler et al 2002 the characteristics of these tracer particles allow to scatter enough light and avoid buoyancy and inertial problems these particles were illuminated with two neodymium yttrium aluminium garnet nd yag lasers with a maximum energy of 190 mj per pulse a frequency of 10 hz and a pulse separation time δt of 25 μs a total of 200 pair of images were recorded by a high resolution ccd camera 2048 2048 pixels which captured the scattered light these images were subsampled into small interrogation window of 32 32 pixels in size prasad 2000 and an overlapping of 50 in both directions following the nyquist sampling criteria raffel et al 1998 adrian 1991 adrian and westerweel 2011 the camera field of view fov was 250 250 mm2 spurious vectors were eliminated by using a post processing analysis with a local mean filter of 3 3 pixels in size the velocity vectors in each interrogation window were computed based on the particle displacement and the pulse separation time the particle displacement was computed implementing a cross correlation analysis between each pair of images in the last years this process has been accelerated by means of advanced computational methods willert and gharib 1991 the most important feature of the actual implementation of digital piv dpiv technique is the use of 2d fast fourier transform fft to simplify and speed up the computational process prasad 2000 considering the similarity between spatial cross correlation and convolution and the fourier transform properties the particle displacement can be obtained as follows 8 φ c r o s s x z f 1 g 1 ζ η g 2 ζ η where ℱ 1 is the inverse fourier transform g 1 and g 2 are the fourier transforms of the light intensity distributions of each pair of images g 2 is the complex conjugated of g 2 and ζ η are the components in the correlation plane the stronger peak obtained with this algorithm corresponds to the averaged motion of the particles within the interrogation window this correlation peak is located with sub pixel accuracy by fitting a gaussian curve prasad 2000 3 results the results obtained in the different tests are presented in the following pages where the non dimensional velocity and turbulence intensity are calculated as stated the velocity maps are computed using the non dimensional variable u u m a g u based on the wind tunnel speed u at each experimental case the streamlines are also plotted to provide information about the direction and configuration of the region studied the flow field velocity can be observed in fig 7 for each angle tested considering that the laser sheet position of the piv does not change along the tests and the model ship spins around spot 4 to obtain the required incident angle the flow configuration observed depends on the aircraft carrier structure located in the region upstream the laser sheet hence black dashed line indicates the location of the laser sheet plane as well as the wind direction and the solid red line indicates the side of the laser sheet recorded by the piv camera which is centred in the spot 4 from previous investigations bardera mora et al 2016 it was observed that a recirculation bubble appeared over the ski jump ramp at zero incidence angle condition however spot 4 regions show a uniform flow so it is not affected by that turbulent region generated at the bow for slight tilt of wind direction 15 maps are showing low deflection of streamlines although upwash case would be affected in a higher degree by the proximity to the sharp edges of the flight deck the velocity maps show that downwash wod presents a bigger influenced region this interference could be due to the lateral effects generated by the island presence higher wind incidence angles 30 produce a stronger deviation of the streamlines as it can be observed for case 30 the island presence has high influence on upwash wind in contrast for 30 downwash case shows that the sharp edge of the flight deck generates a flow detachment but a lower region is perturbed at angles of 60 and 90 the flow structure is characterized by a region which hold a recirculation bubble similar flow configuration appears at 60 and 90 where a flow detachment appears due to the flight deck geometry at positive angles a higher low velocity region appears but the streamlines show different flow structure at 60 a recirculation bubble zone does not appeared however at crosswind the separated flow structure is clearly defined the turbulence intensity maps t i σ u u are also represented in fig 8 which were computed based on the total standard deviation of the velocity σ u and the wind tunnel speed this variable shows the variation of the velocity at each measured point with respect to the free stream velocity u when wind is blowing at moderate angles of incidence from 0 to 30 the turbulence intensity is about 20 which means that low velocity fluctuations are generated for higher incidence angles the maps show high level of turbulence rising up to 40 denoting the formation of turbulent shear layers which bound the recirculation bubbles observed in the velocity maps 4 conclusions aircraft carriers are affected by a combination of factors such as weather ship s motion ship configuration and sea conditions regarding the superstructure presence the wind incidence angle conditions modify the flow structure where the general character of the air wake changes dramatically depending on the ship and aircraft configurations flight envelopes are needed to determine at each operational case different wind conditions have been experimentally investigated for a representative spot of an aircraft carrier by means of particle image velocimetry piv which is a non intrusive technique spot 4 is considered the most important location for helicopters operations which is located over the flight deck at half length the flight deck and affected by the superstructure and sharp edges piv measurements of velocity and turbulence have been presented by classical maps showing very interesting results from a safety point of view at ahead wind conditions and 15 the region is slightly perturbed by the surroundings which implies that helicopter operations would have low interferences at higher wod it can be appreciated that the region of interest is badly modified by the sharp edges due to island and flight deck configuration specially 60 and 90 cases revealed a highly turbulent structure of the separated flow above the flight deck which would produce strong velocity gradients in the helicopter paths during landing and taking off operations thus this investigation provides insight about the flow as a way to perform and assessment of potential risks for helicopter operations concluding as a lesson learned that flow coming from 60 and 90 produces very turbulent shear layers and high risk conditions so that helicopters must avoid on board operations when these conditions are present regarding that the aircraft presence induces flow configuration variation future investigations could be carried out to study the aircraft ship dynamic interface furthermore other spot locations would be another interesting research field due to the asymmetric configuration of the ship finally a solution to mitigate the adverse effects generated at high wod conditions by means of flow control devices is an interesting research field which could result in a wider operational range 
22917,this paper investigates different methods for compensating the mean and slowly varying environmental loads and unmodeled dynamics bias loads in dynamic positioning of marine vessels four different methods are compared using the bias estimate from an observer tuned to estimate position and velocity well using a wave filtered version of this bias load using the estimate from a separate observer tuned to work well for estimating the bias loads and finally traditional integral action on the tracking errors the results show that the bias from the bias observer is the best solution both in transients and steady state standard integral action matches the steady state performance but is slower in transients the estimate from the observer used for position and velocity is fast in transients but too oscillatory in the bias state the wave filtered version of this has less oscillations but falls short compared to the other methods due to added phase lag from the extra wave filter using a bias estimate from an observer has benefits over typical integral action such as the possibility of offline or open loop tuning and avoiding integral windup issues for the comparison study a 6 dof simulation model of a supply vessel is used keywords dynamic positioning control design observers integral control 1 introduction in control systems for dynamic positioning dp of marine vessels it is common to include integral action to compensate for the mean and slowly varying environmental disturbances and unmodeled dynamics when using a model based observer the sum of the environmental disturbances and unmodeled dynamics is estimated in what is typically called a bias load fossen and strand 1999 use of this bias load estimate in feedback instead of integral action has been proposed by loria et al 2000 however for output feedback designs it is common in the literature sørensen 2011 to include integral action in the controller even though this load is estimated in the observer one reason for this could be the assumption that the bias estimate from the observer is too oscillatory to give good performance when used in feedback integral action is therefore introduced and tuned such that it is slow calm small oscillations and works well in steady state recently however there have been much focus on dp during transient conditions e g due to sudden large wave trains ice loads frequent setpoint changes etc and the question has been asked if a slow integral action is suitable as seen for instance in refsnes and sørensen 2007 værnø et al 2016 værnø et al 2017 kjerstad and skjetne 2016 lindegaard 2003 and as discussed in brodtkorb et al 2016 and in brodtkorb et al 2018 the bias load can vary rapidly even for common situations such as heading changes in these instances effective compensation of the bias load is beneficial in the following we compare four different approaches for compensating the bias loads with special focus on transient events this problem received some attention by værnø et al 2016 but here the discussion is more rigorous a typical dp system is evaluated through numerical studies and model scale experiments in tannuri and morishita 2006 and a model based kalman filter is presented for dp by fossen and perez 2009 initially proposed by balchen et al 1976 a robust controller presented by du et al 2015 uses a high gain observer in addition to neural networks to compensate for the unknown environmental disturbances typically fault tolerance and robustness are system design properties that are considered blanke et al 2003 for an overview of the dp system and a historical overview see sørensen 2011 and the references therein in this paper we refer to the bias compensation by a term b ˆ in the control law where b ˆ is the estimated bias in an observer integral action on the other hand refers to an integral term ζ in the control law with ζ η ˆ η d t that is it integrates the tracking error based on the estimated vessel state η ˆ using the bias estimate from a model based observer instead of typical integral action on the output tracking errors has some benefits first if we use the bias estimate from an observer instead of integral action windup issues in the integrator are of no concern however it should be noted that if a separate observer is added to estimate the bias load this adds similar complexity as an anti windup filter in the controller perez 2009 another benefit of using a bias estimate from an observer is tuning it is easier to tune an observer since you only need offline data series in addition you can use optimization methods to find satisfactory gains an advantage of using the integral action is that it can be tuned independently of the bias response time this means for instance that the integral action can be tuned slow to account for steady state offsets whereas the bias estimate in the observer can be made faster and letting it live its own life this tuning separation also applies if there is a separate observer to estimate the bias load the main contribution of this paper is an in depth study into several best practices of compensating the unknown environmental loads and unmodeled dynamics for dp of marine vessels the analysis of performance is made fair by the use of optimization in tuning of all observers and also a thorough tuning of controller and integral action the results are demonstrated through a high fidelity simulation study to the authors knowledge such a comparison does not exist in the literature this study is important as it allows for research based design choices to be made when developing dp control systems notation and terminology a column vector is stated as col x y z x y z ℝ 0 denotes positive real numbers and s represents the angle defined on the interval π π 2 problem formulation there are two reference frames typically used for dp the north east down ned frame and body frame for operations in confined areas such as dp the ned frame can be assumed to be a non rotating global and inertial frame this is a tangent plane to the earth with the x axis pointing north y axis pointing east and z axis pointing down to the center of the earth the body frame is a local frame with origin typically midships in the centerline and waterline of the vessel with the x axis pointing to the bow y axis to starboard and z axis down we separate between a simulation verification model svm and a control design model cdm the svm is intended for observer and controller verification and is a high fidelity model the cdm includes the dynamics that is most important for the operation for low speed application such as dp this typically implies that the coriolis centripetal and nonlinear damping loads are omitted from the model as shown by værnø et al 2019 including nonlinear damping gives a slight improvement however because the improvement is not significant and because it is not important for this study it is not included in the cdm of this paper 2 1 control design model we consider the 3 degrees of freedom dof cdm fossen 2011 1a ξ a w ξ e w w w 1b η r ψ ν 1c b w b 1d m ν d ν r ψ b τ τ w i n d 1e y η c w ξ v y where ξ ℝ 6 in 1a is the first order wave induced dynamics of the vessel and 1b 1d is the low frequency vessel dynamics the first order wave induced dynamics makes the vessel oscillate about the setpoint at the wave frequency compensating this oscillatory motion causes extra wear and tear on the thrusters and it is often not possible due to thruster limitations for both of these reasons we separate between the low frequency and wave frequency dynamics the wave frequency dynamics ξ in 1a are modeled by a mass spring damper dynamics where a w is a hurwitz matrix that contains the damping ratio and the peak frequency of the incident waves and w w ℝ 6 is white noise sørensen 2013 the vector η col η n η e ψ ℝ 2 s in 1b contains the low frequency north east position and heading respectively and ν col u v r ℝ 3 is the surge sway velocity in the body frame and the yaw rate respectively the rotation matrix r ψ rotates a 3 dof vector from the body to the ned frame according to 2 r ψ cos ψ sin ψ 0 sin ψ cos ψ 0 0 0 1 τ col τ s u r g e τ s w a y τ y a w ℝ 3 is the generalized control vector in the body frame τ w i n d ℝ 3 is the wind load which is measured and b col b n b e b ψ ℝ 3 is the bias load vector and w b ℝ 3 is white noise the vector b constitutes the sum of the low frequency loads such as the slowly varying second order wave loads current loads and unmodeled dynamics from errors in the mass added mass hydrodynamic damping wind loads and thrust mappings the bias load vector is assumed constant or slowly varying in the ned frame finally the measurement vector y is the sum of low frequency north east position and heading η the wave frequency north east position and heading c w ξ where c ω 0 3 3 i 3 3 and the measurement noise v y ℝ 3 2 2 model based observer to estimate the low frequency position η velocity ν and the bias b a nonlinear observer nlo similar to the observer proposed by fossen and strand 1999 is chosen the observer is given by 3a ξ ˆ a w ξ ˆ k 1 y 3b η ˆ r ψ ν ˆ k 2 y 3c b ˆ k 3 y 3d m ν ˆ d ν ˆ r ψ b ˆ τ τ w i n d k 4 r ψ y 3e y ˆ η ˆ c w ξ ˆ where ξ ˆ ℝ 6 η ˆ ℝ 2 s b ˆ ℝ 3 and ν ˆ ℝ 3 are the state estimates the injection gains k 1 k 11 k 12 ℝ 6 3 k 2 k 3 k 4 ℝ 3 3 are non negative matrices and y y y ˆ is the measurement error the matrices k 3 and k 4 are constant whereas k 1 and k 2 depend on the peak frequency of the wave spectrum to obtain good wave filtering as in fossen and strand 1999 and many later references we assume that a1 r ψ m r ψ ψ w r ψ first because of the low noise on the compass we assume that the measured heading angle ψ m is close to the real heading angle that is the sum of the low frequency heading ψ and the wave frequency heading ψ w second the heading angle due to wave induced motion ψ w is small negligible effect on the rotation matrix the assumption is justified because the wave induced heading angle is typically less than 1 for normal sea states and less than 5 for extreme sea states thus the measured heading angle is used instead of the low frequency heading angle in the rotation matrix 2 3 controller the controller τ is given by a feedback part τ f b and a reference feedforward part τ f f 4a τ τ f b τ f f 4b τ f f d ν d t m ν d t τ w i n d 4c τ f b τ n p d τ b r where τ n p d is a nonlinear proportional derivative npd controller given by 4d τ n p d k p r ψ η ˆ η d t k d ν ˆ ν d t and η d ℝ 2 s ν d ℝ 3 and ν d t ℝ 3 are bounded references generated by a guidance system k p ℝ 3 3 and k d ℝ 3 3 are positive definite gain matrices and τ b r is a bias rejection term to compensate for r ψ b in 1d designs for τ b r is the main focus of this paper and will be elaborated in section 2 4 2 4 methods for bias compensation in the following four methods for compensating the bias load τ b r in 4c are presented method 1 direct compensation method 2 wave filtered bias estimate method 3 separate bias observer method 4 integral action all the methods use estimates of η and ν from the same observer in the npd controller called the position and velocity observer based on 3 in order to obtain meaningful results in the comparison of different versions of τ b r it is important that the observer that provides the estimates of η and ν as well as the npd controller are well tuned details about the tuning for position and velocity observer the npd controller and the bias compensation methods are presented in section 4 4 2 4 1 method 1 direct compensation the first method we consider common in the literature loría and panteley 1999 is to directly use the bias estimate from the position and velocity observer based on 3 tuned for good η and ν estimates that is 5 τ b r r ψ b ˆ 2 4 2 method 2 wave filtered bias estimate when we optimize the observer to work well for position and velocity in transients we observe that the bias estimate is fast but very oscillatory in steady state this is elaborated in section 4 2 by assumption the bias load b from 3 is low frequency but for sufficiently high tuning of the observer 3 the bias estimate will oscillate due to wave induced behavior therefore we suggest to add an extra wave filter on the bias estimate before this is sent to the controller for this method we make the assumption that the bias load contains a wave component in addition to the low frequency part that we want to compensate accordingly we redefine the bias load in 1c to 6 b b l f c w b w where c w b w ℝ 3 and b l f ℝ 3 are the wave frequency and low frequency components of the bias load from 1c respectively in the bias wave filter we treat the bias estimate b ˆ from the observer 3 as the input to the filter and assume that a2 the bias estimate b ˆ from 3c is given as b ˆ b l f c w b w the model used for the bias dynamics has the same wave dynamics as in 3a where 7a b w a w b w e w w b w 7b b l f 0 and the observer is given as 8a b ˆ w a w b ˆ w k b 1 ω 0 b 8b b ˆ l f k b 2 b 8c b ˆ 2 b ˆ l f c w b ˆ w where b b ˆ b ˆ 2 the low frequency estimate of the bias is used in feedback such that τ b r is given as 9 τ b r r ψ b ˆ l f 2 4 3 method 3 separate bias observer the third bias compensation method is to use the bias estimate from a separate observer with the same structure as in 3 but with a tuning optimized to find a bias estimate that closely resembles the true low frequency bias load let us denote the estimate from this bias observer as b ˆ b o and then τ b r is given as 10 τ b r r ψ b ˆ b o 2 4 4 method 4 integral action the last method we consider is perhaps the most common choice for τ b r and that is integral action in the control law sørensen 2011 a new integral state ζ is defined with dynamics 11 ζ η ˆ η d t such that 12 τ b r k i r ψ ζ 2 5 problem statement we consider both the case where the bias b is slowly varying for long periods of time and also the case when b changes rapidly due to transient events the objective is to compare the four different model based approaches for τ b r to compensate the bias loads in order to gain insight on the efficiency of the methods and make conclusions on when the best overall closed loop performance is obtained the comparisons will be based on closed loop key performance indicators kpis that measure the low frequency positioning performance and thrust utilization 3 setup and implementation to test the different bias compensation methods an svm is used along with two different test maneuvers that include a combination of transients and longer periods of steady state 3 1 simulation verification model the simulation model is a 6 dof high fidelity model of a platform supply vessel with main parameters given in table 1 the model is based on building blocks from the mss toolbox fossen and perez 2004 and includes coriolis centripetal forces and linear and nonlinear damping see appendix a to give a realistic load variation with heading angle of the vessel lookup tables are used to calculate the loads acting on the vessel the model is subject to waves from a sea state taken from the jonswap 1 1 joint north sea wave project spectrum with a significant wave height of 6 m and a peak frequency of 0 53 rad s the mean incident wave direction is 190 head waves in the north east frame price and bishop 1974 the simulation also includes a current with a speed of 0 5 m s and direction of 30 the sensor models include realistic noise and sensor effects the gps is updated at 1 hz and the compass is updated at 10 hz the vessel is controlled by 4 which operates at 1 hz in addition a first order lowpass thrust dynamics with a 5 s time constant is included 3 2 maneuvers for the simulations presented in section 5 two maneuvers are performed both with the environmental conditions described in section 3 1 above one training maneuver which is used to tune the observers and controller and one test maneuver that uses the same tuning this is to verify that the tuning is not an overfit to the training maneuver both maneuvers are 1500 s in duration for the training maneuver there is a combined north east setpoint change and heading change of 90 at 300 s and at 600 s there is a change of 45 in the direction of the current the current direction changes as a first order filtered step response with time constant of 30 s this is an exaggerated case not necessarily very realistic designed to challenge the algorithms this gives three transient events for a short time frame and about the last half of the maneuver the conditions are steady in order to compare the steady state performance as well the test maneuver has a combined north east setpoint and heading change at 300 s where the heading changes 70 and at 500 s there is also a combined setpoint and heading change with a heading change of 50 finally at 800 s there is a pure heading change of 90 3 3 closed loop performance evaluation to evaluate the closed loop positioning performance of the algorithms combinations of the following metrics are used 13a j η c t 0 t f η n η d n η e η d e 180 π ψ ψ d d t 13b j τ u v c t 0 t f τ s u r g e τ s w a y d t 13c j τ r c t 0 t f τ y a w d t where the states and the elements of τ are defined in 1 and t 0 and t f are the initial and final time of the interval j η c is a positioning performance metric whereas j τ u v c and j τ r c are control effort metrics 4 tuning in this section the tuning for the observers npd controller and the bias compensation methods are presented the maneuver used in the tuning is the training maneuver described in section 3 2 4 1 derivative free optimization for tuning in order to allow for a fair comparison of the bias compensation methods optimization is used to find observer tuning classic optimization methods are not applicable due to a lack of information about the gradient hessian or higher order derivatives thus derivative free optimization dfo is used specifically the matlab function fminsearch to illustrate how dfo works consider the example where we have one state variable x ℝ where the objective is to minimize the error x x x ˆ and x ˆ is our state estimate the observer has an injection gain k ℝ and we select a cost function that depends on the injection gain and the time of the interval j k t i n t where t i n t t f t 0 and t f and t 0 are the final and initial time of the interval we initialize the dfo by selecting an initial guess for k and the dfo evaluates the cost of j thereafter the dfo algorithm selects values close to the initial k value to see if they provide a lower cost for j it then selects the k that gave the lowest value and repeats the process note that the dfo can get stuck in a local minimum so several runs with varying initial conditions have to be performed the different observer performance evaluations metrics used in this paper are 14a j η ˆ t 0 t f η n η ˆ n η e η ˆ e 180 π ψ ψ ˆ d t 14b j ν ˆ t 0 t f u u ˆ v v ˆ 180 π r r ˆ d t 14c j b ˆ n t 0 t f b n b ˆ n d t 14d j b ˆ e t 0 t f b e b ˆ e d t 14e j b ˆ ψ t 0 t f b ψ b ˆ ψ d t where the states are defined in 1 and the estimates in 3 4 2 tuning of position and velocity observer the injection gains k 1 and k 2 in 3 for the wave and η dynamics are found by the tuning rules proposed by fossen and strand 1999 which give good wave filtering the tuning for k 3 and k 4 is optimized for finding good η and ν estimates and is found by derivative free optimization the corresponding cost function j used in the dfo is then 15 j j η ˆ c ν j ν ˆ where j η ˆ and j ν ˆ are given by 14a and 14b and c ν ℝ 0 is a scaling parameter set such that the contributions from the velocity estimation error c ν j ν ˆ and the position estimation errors are balanced the value we used was c ν 7 the vessel is controlled by 4 using state estimates together with the integral action 11 12 the tuning of the observer is found in several iterations and for each iteration the observer tuning is updated with the resulting dfo tuning from the previous run thereafter a new closed loop run was performed serving as the dataset of the next round of dfo runs until the observer tuning converged the resulting bias estimate from the observer tuned with 15 along with the actual bias load found by solving for b in 1d are shown in fig 1 note that the bias estimate tracks the actual mean bias load well but since the bias estimation is not part of the evaluation function 15 it is quite oscillatory in steady state 4 3 npd controller tuning the tuning for the nonlinear pd controller is given by the tuning rules outlined in fossen 2011 by specifying desired eigenfrequencies and damping ratios of the response as if the system is linear that is by setting the rotation matrix to identity thereafter the tuning is adjusted through trial and error using the well tuned η and ν estimates from the position and velocity observer 4 4 tuning of the bias compensation methods 4 4 1 tuning method 1 direct compensation the tuning of method 1 is given by the tuning of the position and velocity observer as outlined in section 4 2 no further tuning is needed 4 4 2 tuning method 2 wave filtered bias estimate method 2 uses the bias estimate b ˆ from the position and velocity observer in section 4 2 as input that is the bias estimate used in method 1 the tuning of the matrices k b 1 and k b 2 in the wave filter of 8 are found by the tuning rules proposed by fossen and strand 1999 that is k b 1 and k b 2 are similar to k 1 and k 2 in 3 respectively 4 4 3 tuning method 3 bias observer for method 3 the cost function j b o used in the dfo is 16 j b o c b n j b ˆ e c b e j b ˆ n c b ψ j b ˆ ψ where j b ˆ n j b ˆ e and j b ˆ ψ are given by 14c 14e and c b n c b e c b ψ ℝ 0 are scaling parameters to balance the contributions from the three bias terms the values used were c b n 0 587 c b e 1 and c b ψ 0 055 this is to make the observer equally responsive to all the three bias forces for instance in the training dataset the north bias force is larger than the east bias force over the maneuver an equal weighting with c b n c b e would have made the observer more aggressive in observing the north bias with the chosen weights this is avoided the dfo tuning process is similar to that of section 4 2 4 4 4 tuning method 4 integral action for method 4 the tuning for k i in 12 was found through extensive trial and error starting at the tuning given in fossen 2011 in the following we provide a reasonable documentation for a good k i tuning where it is shown that k i values above and below the chosen tuning are less optimal to document the choice of a good k i tuning the cost function j η c from 13a is shown for several values of k i in table 2 applied on the maneuver described in section 3 2 as the main maneuver the different values for k i in table 2 are given as k i j ρ j k i 1 j 1 5 where ρ j j 1 5 are positive scalars that satisfy ρ j 1 ρ j j 1 4 the results of the table clearly show that k i 3 gives the minimum value and the lower and higher values of k i give less optimal performance 5 results and discussion 5 1 simulation results results for the four different bias rejection methods are presented in the following see table 3 for a summary of the methods the vessel performs the two different maneuvers presented in section 3 2 the results on the training maneuver are shown in fig 2 fig 5 and table 4 fig 2 has three plots the upper left plot shows the low frequency position and heading for the run with method 1 the lower left plot shows the different bias rejection terms in surge only and the right plot shows the cumulative error j η c of the positioning performance from 13a table 4 shows all the performance indices from 13 both for the whole maneuver and also for the steady state time interval from 1000 to 1500 s fig 5 shows the thrust kpis j τ u v c in 13b and j τ r c in 13c for the training maneuver and the test maneuver the results for the training maneuver show that method 3 the bias observer has the best overall performance it is both fast over transients and calm in steady state as seen from table 4 and from fig 5 the thrust effort of methods 3 and 4 are about equal and lower than methods 1 and 2 which also are approximately equal during the steady period the thrust effort of all four methods are similar but methods 3 and 4 have a lower positioning error than methods 1 and 2 fig 3 shows the bias rejection terms in surge for the four different methods in the upper plot this is the same as the lower left plot of fig 2 zooming in on the transient at 600 s the lower plot of fig 3 shows the difference between τ b r and true bias force for the different methods for the respective simulations as observed from fig 3 all four methods are quite fast in the transient with method 4 as the slowest in steady state method 4 is very calm while methods 2 and 3 are much calmer than method 1 as observed methods 1 and 2 have similar closed loop performance even though method 2 has smaller oscillations than method 1 it also has a slight lag due to the extra filter as observed from fig 3 the lag seems to make method 2 underperform method 1 during transients and the two effects lower oscillations and added lag cancel in steady state making the two methods similar in their steady state performance method 3 has a good balance between steady state and transient performance and therefore has a better overall performance compared to methods 1 and 2 the results for the test maneuver is shown in fig 4 fig 5 and table 5 the tuning used for the observers and controllers are the same as those used for the training maneuver similar type of results are seen in the test maneuver there are more transient events and less steady state than in the training maneuver that is why method 4 performs worse overall in positioning performance than in the training maneuver however note that method 4 has the lowest thrust consumption method 3 still performs best and method 4 has the best steady state behavior and method 3 has close to the same steady state performance this shows that the same tuning and observations also apply well for the test maneuver 5 2 general discussion the findings presented in section 5 1 justify that using a bias estimate from a separate bias observer with tuning optimized to estimate the bias is the best way of compensating the bias loads in dp this is better than the traditional integral action based on the tracking errors since it mainly outperforms the integral action in transients in addition the results show that using the bias estimate in feedback from a single observer optimized for position and velocity estimates underperforms compared to using the separate bias observer both in transients and in steady state the wave filtered version of this bias estimate from the position and velocity observer underperforms the non wave filtered version seemingly due to the added phase lag from the extra wave filter using a separate bias observer is the best option among those presented in the paper direct integral action and bias compensation from the single position velocity bias observer have similar performance if there are longer periods of steady state conditions integral action is better than the single observer bias compensation and vice versa for transient conditions 6 conclusion in this paper four methods for compensating the mean and slowly varying environmental loads and unmodeled dynamics for dp of marine vessels have been investigated a high fidelity simulation model was used to compare the methods using two different maneuvers one training maneuver for tuning and one test maneuver for verification all methods were tuned to work well for the training maneuver then this tuning was applied for the test maneuver to verify the gains and similar performances were shown the standard integral action was compared to three variations of using the bias estimate from a model based observer the results indicated that the best method to compensate the bias loads was using the bias estimate from a separate bias observer for which the tuning was optimized to estimate the bias loads this method displayed both the best transient and steady state behavior given the maneuvers in this paper acknowledgements this work was supported by the research council of norway partly through the centre of excellence ntnu amos project no 223254 and partly through centre for research based innovation move project no 237929 the authors would like to thank vincenzo calabrò from norwegian subsea for helpful discussion and input appendix simulation verification model the kinetics used in the svm of the supply vessel see section 3 1 is sørensen 2013 17 m ν c r b ν ν c a ν r ν r d l ν d n l ν r g η τ τ e n v where m ℝ 6 6 is the inertia matrix c r b ν ℝ 6 6 and c a ν r ℝ 6 6 are the rigid body and added mass coriolis matrices respectively ν ℝ 6 and ν r ℝ 6 are the velocity and relative velocity respectively d l ℝ 6 6 is the linear damping matrix d n l ν r ℝ 6 is the non linear damping vector g ℝ 6 6 is the restoring matrix τ ℝ 6 is the thrust vector and τ e n v ℝ 6 is the environmental load vector the inertia matrix for the svm is a sum of the rigid body mass and the added mass m m r b m a 18 m r b m i 3 3 m s r g b m s r g b i b 10 8 0 0615 0 0 0 0 3198 0 0 0 0615 0 0 3198 0 0 1414 0 0 0 0615 0 0 1414 0 0 0 3198 0 31 4290 0 0 7355 0 3198 0 0 1414 0 4 2767 0 0 0 1414 0 0 7355 0 16 6653 19 m a 10 8 0 0053 0 0 0036 0 0 7101 0 0 0 0518 0 0 1135 0 0 0095 0 0036 0 0 1993 0 1 9683 0 0 0 1128 0 2 6167 0 1 9025 0 7070 0 1 9664 0 177 7000 0 0 0 0095 0 1 9082 0 15 2660 where m is the mass of the ship here m 6150 tons and i b i g m s 2 r g b where i g is the inertia matrix about the body s center of gravity r g b col 2 3 m 0 5 2 m the matrix s λ where λ col λ 1 λ 2 λ 3 ℝ 3 denotes a skew symmetric matrix 20 s λ 0 λ 3 λ 2 λ 3 0 λ 1 λ 2 λ 1 0 the rigid body and added mass coriolis matrices are calculated online during simulations from the inertia matrices m r b and m a given above and the velocity ν and relative velocity ν r the rigid body coriolis can be written as fossen 2011 21 c r b ν 0 3 3 m s ν 1 m s ν 2 s r g b m s ν 1 m s r g b s ν 2 s i b ν 2 where the linear and angular velocities are written as ν 1 col u v w ν 2 col p q r the added mass coriolis is calculated in a similar way see sørensen 2013 for a complete representation the nonlinear damping is calculated from a look up table the linear damping matrix d l and restoring force matrix g are d l 10 8 0 0017 0 0 0 0 0115 0 0 0 0014 0 0 0147 0 0 0065 0 0 0 0387 0 0 0891 0 0 0 0147 0 1 6800 0 0 0338 0 0115 0 0 0891 0 16 5299 0 0 0 0065 0 0 0338 0 0 6386 g 10 9 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0141 0 0 0324 0 0 0 0 0 1931 0 0 0 0 0 0324 0 4 2977 0 0 0 0 0 0 0 
22917,this paper investigates different methods for compensating the mean and slowly varying environmental loads and unmodeled dynamics bias loads in dynamic positioning of marine vessels four different methods are compared using the bias estimate from an observer tuned to estimate position and velocity well using a wave filtered version of this bias load using the estimate from a separate observer tuned to work well for estimating the bias loads and finally traditional integral action on the tracking errors the results show that the bias from the bias observer is the best solution both in transients and steady state standard integral action matches the steady state performance but is slower in transients the estimate from the observer used for position and velocity is fast in transients but too oscillatory in the bias state the wave filtered version of this has less oscillations but falls short compared to the other methods due to added phase lag from the extra wave filter using a bias estimate from an observer has benefits over typical integral action such as the possibility of offline or open loop tuning and avoiding integral windup issues for the comparison study a 6 dof simulation model of a supply vessel is used keywords dynamic positioning control design observers integral control 1 introduction in control systems for dynamic positioning dp of marine vessels it is common to include integral action to compensate for the mean and slowly varying environmental disturbances and unmodeled dynamics when using a model based observer the sum of the environmental disturbances and unmodeled dynamics is estimated in what is typically called a bias load fossen and strand 1999 use of this bias load estimate in feedback instead of integral action has been proposed by loria et al 2000 however for output feedback designs it is common in the literature sørensen 2011 to include integral action in the controller even though this load is estimated in the observer one reason for this could be the assumption that the bias estimate from the observer is too oscillatory to give good performance when used in feedback integral action is therefore introduced and tuned such that it is slow calm small oscillations and works well in steady state recently however there have been much focus on dp during transient conditions e g due to sudden large wave trains ice loads frequent setpoint changes etc and the question has been asked if a slow integral action is suitable as seen for instance in refsnes and sørensen 2007 værnø et al 2016 værnø et al 2017 kjerstad and skjetne 2016 lindegaard 2003 and as discussed in brodtkorb et al 2016 and in brodtkorb et al 2018 the bias load can vary rapidly even for common situations such as heading changes in these instances effective compensation of the bias load is beneficial in the following we compare four different approaches for compensating the bias loads with special focus on transient events this problem received some attention by værnø et al 2016 but here the discussion is more rigorous a typical dp system is evaluated through numerical studies and model scale experiments in tannuri and morishita 2006 and a model based kalman filter is presented for dp by fossen and perez 2009 initially proposed by balchen et al 1976 a robust controller presented by du et al 2015 uses a high gain observer in addition to neural networks to compensate for the unknown environmental disturbances typically fault tolerance and robustness are system design properties that are considered blanke et al 2003 for an overview of the dp system and a historical overview see sørensen 2011 and the references therein in this paper we refer to the bias compensation by a term b ˆ in the control law where b ˆ is the estimated bias in an observer integral action on the other hand refers to an integral term ζ in the control law with ζ η ˆ η d t that is it integrates the tracking error based on the estimated vessel state η ˆ using the bias estimate from a model based observer instead of typical integral action on the output tracking errors has some benefits first if we use the bias estimate from an observer instead of integral action windup issues in the integrator are of no concern however it should be noted that if a separate observer is added to estimate the bias load this adds similar complexity as an anti windup filter in the controller perez 2009 another benefit of using a bias estimate from an observer is tuning it is easier to tune an observer since you only need offline data series in addition you can use optimization methods to find satisfactory gains an advantage of using the integral action is that it can be tuned independently of the bias response time this means for instance that the integral action can be tuned slow to account for steady state offsets whereas the bias estimate in the observer can be made faster and letting it live its own life this tuning separation also applies if there is a separate observer to estimate the bias load the main contribution of this paper is an in depth study into several best practices of compensating the unknown environmental loads and unmodeled dynamics for dp of marine vessels the analysis of performance is made fair by the use of optimization in tuning of all observers and also a thorough tuning of controller and integral action the results are demonstrated through a high fidelity simulation study to the authors knowledge such a comparison does not exist in the literature this study is important as it allows for research based design choices to be made when developing dp control systems notation and terminology a column vector is stated as col x y z x y z ℝ 0 denotes positive real numbers and s represents the angle defined on the interval π π 2 problem formulation there are two reference frames typically used for dp the north east down ned frame and body frame for operations in confined areas such as dp the ned frame can be assumed to be a non rotating global and inertial frame this is a tangent plane to the earth with the x axis pointing north y axis pointing east and z axis pointing down to the center of the earth the body frame is a local frame with origin typically midships in the centerline and waterline of the vessel with the x axis pointing to the bow y axis to starboard and z axis down we separate between a simulation verification model svm and a control design model cdm the svm is intended for observer and controller verification and is a high fidelity model the cdm includes the dynamics that is most important for the operation for low speed application such as dp this typically implies that the coriolis centripetal and nonlinear damping loads are omitted from the model as shown by værnø et al 2019 including nonlinear damping gives a slight improvement however because the improvement is not significant and because it is not important for this study it is not included in the cdm of this paper 2 1 control design model we consider the 3 degrees of freedom dof cdm fossen 2011 1a ξ a w ξ e w w w 1b η r ψ ν 1c b w b 1d m ν d ν r ψ b τ τ w i n d 1e y η c w ξ v y where ξ ℝ 6 in 1a is the first order wave induced dynamics of the vessel and 1b 1d is the low frequency vessel dynamics the first order wave induced dynamics makes the vessel oscillate about the setpoint at the wave frequency compensating this oscillatory motion causes extra wear and tear on the thrusters and it is often not possible due to thruster limitations for both of these reasons we separate between the low frequency and wave frequency dynamics the wave frequency dynamics ξ in 1a are modeled by a mass spring damper dynamics where a w is a hurwitz matrix that contains the damping ratio and the peak frequency of the incident waves and w w ℝ 6 is white noise sørensen 2013 the vector η col η n η e ψ ℝ 2 s in 1b contains the low frequency north east position and heading respectively and ν col u v r ℝ 3 is the surge sway velocity in the body frame and the yaw rate respectively the rotation matrix r ψ rotates a 3 dof vector from the body to the ned frame according to 2 r ψ cos ψ sin ψ 0 sin ψ cos ψ 0 0 0 1 τ col τ s u r g e τ s w a y τ y a w ℝ 3 is the generalized control vector in the body frame τ w i n d ℝ 3 is the wind load which is measured and b col b n b e b ψ ℝ 3 is the bias load vector and w b ℝ 3 is white noise the vector b constitutes the sum of the low frequency loads such as the slowly varying second order wave loads current loads and unmodeled dynamics from errors in the mass added mass hydrodynamic damping wind loads and thrust mappings the bias load vector is assumed constant or slowly varying in the ned frame finally the measurement vector y is the sum of low frequency north east position and heading η the wave frequency north east position and heading c w ξ where c ω 0 3 3 i 3 3 and the measurement noise v y ℝ 3 2 2 model based observer to estimate the low frequency position η velocity ν and the bias b a nonlinear observer nlo similar to the observer proposed by fossen and strand 1999 is chosen the observer is given by 3a ξ ˆ a w ξ ˆ k 1 y 3b η ˆ r ψ ν ˆ k 2 y 3c b ˆ k 3 y 3d m ν ˆ d ν ˆ r ψ b ˆ τ τ w i n d k 4 r ψ y 3e y ˆ η ˆ c w ξ ˆ where ξ ˆ ℝ 6 η ˆ ℝ 2 s b ˆ ℝ 3 and ν ˆ ℝ 3 are the state estimates the injection gains k 1 k 11 k 12 ℝ 6 3 k 2 k 3 k 4 ℝ 3 3 are non negative matrices and y y y ˆ is the measurement error the matrices k 3 and k 4 are constant whereas k 1 and k 2 depend on the peak frequency of the wave spectrum to obtain good wave filtering as in fossen and strand 1999 and many later references we assume that a1 r ψ m r ψ ψ w r ψ first because of the low noise on the compass we assume that the measured heading angle ψ m is close to the real heading angle that is the sum of the low frequency heading ψ and the wave frequency heading ψ w second the heading angle due to wave induced motion ψ w is small negligible effect on the rotation matrix the assumption is justified because the wave induced heading angle is typically less than 1 for normal sea states and less than 5 for extreme sea states thus the measured heading angle is used instead of the low frequency heading angle in the rotation matrix 2 3 controller the controller τ is given by a feedback part τ f b and a reference feedforward part τ f f 4a τ τ f b τ f f 4b τ f f d ν d t m ν d t τ w i n d 4c τ f b τ n p d τ b r where τ n p d is a nonlinear proportional derivative npd controller given by 4d τ n p d k p r ψ η ˆ η d t k d ν ˆ ν d t and η d ℝ 2 s ν d ℝ 3 and ν d t ℝ 3 are bounded references generated by a guidance system k p ℝ 3 3 and k d ℝ 3 3 are positive definite gain matrices and τ b r is a bias rejection term to compensate for r ψ b in 1d designs for τ b r is the main focus of this paper and will be elaborated in section 2 4 2 4 methods for bias compensation in the following four methods for compensating the bias load τ b r in 4c are presented method 1 direct compensation method 2 wave filtered bias estimate method 3 separate bias observer method 4 integral action all the methods use estimates of η and ν from the same observer in the npd controller called the position and velocity observer based on 3 in order to obtain meaningful results in the comparison of different versions of τ b r it is important that the observer that provides the estimates of η and ν as well as the npd controller are well tuned details about the tuning for position and velocity observer the npd controller and the bias compensation methods are presented in section 4 4 2 4 1 method 1 direct compensation the first method we consider common in the literature loría and panteley 1999 is to directly use the bias estimate from the position and velocity observer based on 3 tuned for good η and ν estimates that is 5 τ b r r ψ b ˆ 2 4 2 method 2 wave filtered bias estimate when we optimize the observer to work well for position and velocity in transients we observe that the bias estimate is fast but very oscillatory in steady state this is elaborated in section 4 2 by assumption the bias load b from 3 is low frequency but for sufficiently high tuning of the observer 3 the bias estimate will oscillate due to wave induced behavior therefore we suggest to add an extra wave filter on the bias estimate before this is sent to the controller for this method we make the assumption that the bias load contains a wave component in addition to the low frequency part that we want to compensate accordingly we redefine the bias load in 1c to 6 b b l f c w b w where c w b w ℝ 3 and b l f ℝ 3 are the wave frequency and low frequency components of the bias load from 1c respectively in the bias wave filter we treat the bias estimate b ˆ from the observer 3 as the input to the filter and assume that a2 the bias estimate b ˆ from 3c is given as b ˆ b l f c w b w the model used for the bias dynamics has the same wave dynamics as in 3a where 7a b w a w b w e w w b w 7b b l f 0 and the observer is given as 8a b ˆ w a w b ˆ w k b 1 ω 0 b 8b b ˆ l f k b 2 b 8c b ˆ 2 b ˆ l f c w b ˆ w where b b ˆ b ˆ 2 the low frequency estimate of the bias is used in feedback such that τ b r is given as 9 τ b r r ψ b ˆ l f 2 4 3 method 3 separate bias observer the third bias compensation method is to use the bias estimate from a separate observer with the same structure as in 3 but with a tuning optimized to find a bias estimate that closely resembles the true low frequency bias load let us denote the estimate from this bias observer as b ˆ b o and then τ b r is given as 10 τ b r r ψ b ˆ b o 2 4 4 method 4 integral action the last method we consider is perhaps the most common choice for τ b r and that is integral action in the control law sørensen 2011 a new integral state ζ is defined with dynamics 11 ζ η ˆ η d t such that 12 τ b r k i r ψ ζ 2 5 problem statement we consider both the case where the bias b is slowly varying for long periods of time and also the case when b changes rapidly due to transient events the objective is to compare the four different model based approaches for τ b r to compensate the bias loads in order to gain insight on the efficiency of the methods and make conclusions on when the best overall closed loop performance is obtained the comparisons will be based on closed loop key performance indicators kpis that measure the low frequency positioning performance and thrust utilization 3 setup and implementation to test the different bias compensation methods an svm is used along with two different test maneuvers that include a combination of transients and longer periods of steady state 3 1 simulation verification model the simulation model is a 6 dof high fidelity model of a platform supply vessel with main parameters given in table 1 the model is based on building blocks from the mss toolbox fossen and perez 2004 and includes coriolis centripetal forces and linear and nonlinear damping see appendix a to give a realistic load variation with heading angle of the vessel lookup tables are used to calculate the loads acting on the vessel the model is subject to waves from a sea state taken from the jonswap 1 1 joint north sea wave project spectrum with a significant wave height of 6 m and a peak frequency of 0 53 rad s the mean incident wave direction is 190 head waves in the north east frame price and bishop 1974 the simulation also includes a current with a speed of 0 5 m s and direction of 30 the sensor models include realistic noise and sensor effects the gps is updated at 1 hz and the compass is updated at 10 hz the vessel is controlled by 4 which operates at 1 hz in addition a first order lowpass thrust dynamics with a 5 s time constant is included 3 2 maneuvers for the simulations presented in section 5 two maneuvers are performed both with the environmental conditions described in section 3 1 above one training maneuver which is used to tune the observers and controller and one test maneuver that uses the same tuning this is to verify that the tuning is not an overfit to the training maneuver both maneuvers are 1500 s in duration for the training maneuver there is a combined north east setpoint change and heading change of 90 at 300 s and at 600 s there is a change of 45 in the direction of the current the current direction changes as a first order filtered step response with time constant of 30 s this is an exaggerated case not necessarily very realistic designed to challenge the algorithms this gives three transient events for a short time frame and about the last half of the maneuver the conditions are steady in order to compare the steady state performance as well the test maneuver has a combined north east setpoint and heading change at 300 s where the heading changes 70 and at 500 s there is also a combined setpoint and heading change with a heading change of 50 finally at 800 s there is a pure heading change of 90 3 3 closed loop performance evaluation to evaluate the closed loop positioning performance of the algorithms combinations of the following metrics are used 13a j η c t 0 t f η n η d n η e η d e 180 π ψ ψ d d t 13b j τ u v c t 0 t f τ s u r g e τ s w a y d t 13c j τ r c t 0 t f τ y a w d t where the states and the elements of τ are defined in 1 and t 0 and t f are the initial and final time of the interval j η c is a positioning performance metric whereas j τ u v c and j τ r c are control effort metrics 4 tuning in this section the tuning for the observers npd controller and the bias compensation methods are presented the maneuver used in the tuning is the training maneuver described in section 3 2 4 1 derivative free optimization for tuning in order to allow for a fair comparison of the bias compensation methods optimization is used to find observer tuning classic optimization methods are not applicable due to a lack of information about the gradient hessian or higher order derivatives thus derivative free optimization dfo is used specifically the matlab function fminsearch to illustrate how dfo works consider the example where we have one state variable x ℝ where the objective is to minimize the error x x x ˆ and x ˆ is our state estimate the observer has an injection gain k ℝ and we select a cost function that depends on the injection gain and the time of the interval j k t i n t where t i n t t f t 0 and t f and t 0 are the final and initial time of the interval we initialize the dfo by selecting an initial guess for k and the dfo evaluates the cost of j thereafter the dfo algorithm selects values close to the initial k value to see if they provide a lower cost for j it then selects the k that gave the lowest value and repeats the process note that the dfo can get stuck in a local minimum so several runs with varying initial conditions have to be performed the different observer performance evaluations metrics used in this paper are 14a j η ˆ t 0 t f η n η ˆ n η e η ˆ e 180 π ψ ψ ˆ d t 14b j ν ˆ t 0 t f u u ˆ v v ˆ 180 π r r ˆ d t 14c j b ˆ n t 0 t f b n b ˆ n d t 14d j b ˆ e t 0 t f b e b ˆ e d t 14e j b ˆ ψ t 0 t f b ψ b ˆ ψ d t where the states are defined in 1 and the estimates in 3 4 2 tuning of position and velocity observer the injection gains k 1 and k 2 in 3 for the wave and η dynamics are found by the tuning rules proposed by fossen and strand 1999 which give good wave filtering the tuning for k 3 and k 4 is optimized for finding good η and ν estimates and is found by derivative free optimization the corresponding cost function j used in the dfo is then 15 j j η ˆ c ν j ν ˆ where j η ˆ and j ν ˆ are given by 14a and 14b and c ν ℝ 0 is a scaling parameter set such that the contributions from the velocity estimation error c ν j ν ˆ and the position estimation errors are balanced the value we used was c ν 7 the vessel is controlled by 4 using state estimates together with the integral action 11 12 the tuning of the observer is found in several iterations and for each iteration the observer tuning is updated with the resulting dfo tuning from the previous run thereafter a new closed loop run was performed serving as the dataset of the next round of dfo runs until the observer tuning converged the resulting bias estimate from the observer tuned with 15 along with the actual bias load found by solving for b in 1d are shown in fig 1 note that the bias estimate tracks the actual mean bias load well but since the bias estimation is not part of the evaluation function 15 it is quite oscillatory in steady state 4 3 npd controller tuning the tuning for the nonlinear pd controller is given by the tuning rules outlined in fossen 2011 by specifying desired eigenfrequencies and damping ratios of the response as if the system is linear that is by setting the rotation matrix to identity thereafter the tuning is adjusted through trial and error using the well tuned η and ν estimates from the position and velocity observer 4 4 tuning of the bias compensation methods 4 4 1 tuning method 1 direct compensation the tuning of method 1 is given by the tuning of the position and velocity observer as outlined in section 4 2 no further tuning is needed 4 4 2 tuning method 2 wave filtered bias estimate method 2 uses the bias estimate b ˆ from the position and velocity observer in section 4 2 as input that is the bias estimate used in method 1 the tuning of the matrices k b 1 and k b 2 in the wave filter of 8 are found by the tuning rules proposed by fossen and strand 1999 that is k b 1 and k b 2 are similar to k 1 and k 2 in 3 respectively 4 4 3 tuning method 3 bias observer for method 3 the cost function j b o used in the dfo is 16 j b o c b n j b ˆ e c b e j b ˆ n c b ψ j b ˆ ψ where j b ˆ n j b ˆ e and j b ˆ ψ are given by 14c 14e and c b n c b e c b ψ ℝ 0 are scaling parameters to balance the contributions from the three bias terms the values used were c b n 0 587 c b e 1 and c b ψ 0 055 this is to make the observer equally responsive to all the three bias forces for instance in the training dataset the north bias force is larger than the east bias force over the maneuver an equal weighting with c b n c b e would have made the observer more aggressive in observing the north bias with the chosen weights this is avoided the dfo tuning process is similar to that of section 4 2 4 4 4 tuning method 4 integral action for method 4 the tuning for k i in 12 was found through extensive trial and error starting at the tuning given in fossen 2011 in the following we provide a reasonable documentation for a good k i tuning where it is shown that k i values above and below the chosen tuning are less optimal to document the choice of a good k i tuning the cost function j η c from 13a is shown for several values of k i in table 2 applied on the maneuver described in section 3 2 as the main maneuver the different values for k i in table 2 are given as k i j ρ j k i 1 j 1 5 where ρ j j 1 5 are positive scalars that satisfy ρ j 1 ρ j j 1 4 the results of the table clearly show that k i 3 gives the minimum value and the lower and higher values of k i give less optimal performance 5 results and discussion 5 1 simulation results results for the four different bias rejection methods are presented in the following see table 3 for a summary of the methods the vessel performs the two different maneuvers presented in section 3 2 the results on the training maneuver are shown in fig 2 fig 5 and table 4 fig 2 has three plots the upper left plot shows the low frequency position and heading for the run with method 1 the lower left plot shows the different bias rejection terms in surge only and the right plot shows the cumulative error j η c of the positioning performance from 13a table 4 shows all the performance indices from 13 both for the whole maneuver and also for the steady state time interval from 1000 to 1500 s fig 5 shows the thrust kpis j τ u v c in 13b and j τ r c in 13c for the training maneuver and the test maneuver the results for the training maneuver show that method 3 the bias observer has the best overall performance it is both fast over transients and calm in steady state as seen from table 4 and from fig 5 the thrust effort of methods 3 and 4 are about equal and lower than methods 1 and 2 which also are approximately equal during the steady period the thrust effort of all four methods are similar but methods 3 and 4 have a lower positioning error than methods 1 and 2 fig 3 shows the bias rejection terms in surge for the four different methods in the upper plot this is the same as the lower left plot of fig 2 zooming in on the transient at 600 s the lower plot of fig 3 shows the difference between τ b r and true bias force for the different methods for the respective simulations as observed from fig 3 all four methods are quite fast in the transient with method 4 as the slowest in steady state method 4 is very calm while methods 2 and 3 are much calmer than method 1 as observed methods 1 and 2 have similar closed loop performance even though method 2 has smaller oscillations than method 1 it also has a slight lag due to the extra filter as observed from fig 3 the lag seems to make method 2 underperform method 1 during transients and the two effects lower oscillations and added lag cancel in steady state making the two methods similar in their steady state performance method 3 has a good balance between steady state and transient performance and therefore has a better overall performance compared to methods 1 and 2 the results for the test maneuver is shown in fig 4 fig 5 and table 5 the tuning used for the observers and controllers are the same as those used for the training maneuver similar type of results are seen in the test maneuver there are more transient events and less steady state than in the training maneuver that is why method 4 performs worse overall in positioning performance than in the training maneuver however note that method 4 has the lowest thrust consumption method 3 still performs best and method 4 has the best steady state behavior and method 3 has close to the same steady state performance this shows that the same tuning and observations also apply well for the test maneuver 5 2 general discussion the findings presented in section 5 1 justify that using a bias estimate from a separate bias observer with tuning optimized to estimate the bias is the best way of compensating the bias loads in dp this is better than the traditional integral action based on the tracking errors since it mainly outperforms the integral action in transients in addition the results show that using the bias estimate in feedback from a single observer optimized for position and velocity estimates underperforms compared to using the separate bias observer both in transients and in steady state the wave filtered version of this bias estimate from the position and velocity observer underperforms the non wave filtered version seemingly due to the added phase lag from the extra wave filter using a separate bias observer is the best option among those presented in the paper direct integral action and bias compensation from the single position velocity bias observer have similar performance if there are longer periods of steady state conditions integral action is better than the single observer bias compensation and vice versa for transient conditions 6 conclusion in this paper four methods for compensating the mean and slowly varying environmental loads and unmodeled dynamics for dp of marine vessels have been investigated a high fidelity simulation model was used to compare the methods using two different maneuvers one training maneuver for tuning and one test maneuver for verification all methods were tuned to work well for the training maneuver then this tuning was applied for the test maneuver to verify the gains and similar performances were shown the standard integral action was compared to three variations of using the bias estimate from a model based observer the results indicated that the best method to compensate the bias loads was using the bias estimate from a separate bias observer for which the tuning was optimized to estimate the bias loads this method displayed both the best transient and steady state behavior given the maneuvers in this paper acknowledgements this work was supported by the research council of norway partly through the centre of excellence ntnu amos project no 223254 and partly through centre for research based innovation move project no 237929 the authors would like to thank vincenzo calabrò from norwegian subsea for helpful discussion and input appendix simulation verification model the kinetics used in the svm of the supply vessel see section 3 1 is sørensen 2013 17 m ν c r b ν ν c a ν r ν r d l ν d n l ν r g η τ τ e n v where m ℝ 6 6 is the inertia matrix c r b ν ℝ 6 6 and c a ν r ℝ 6 6 are the rigid body and added mass coriolis matrices respectively ν ℝ 6 and ν r ℝ 6 are the velocity and relative velocity respectively d l ℝ 6 6 is the linear damping matrix d n l ν r ℝ 6 is the non linear damping vector g ℝ 6 6 is the restoring matrix τ ℝ 6 is the thrust vector and τ e n v ℝ 6 is the environmental load vector the inertia matrix for the svm is a sum of the rigid body mass and the added mass m m r b m a 18 m r b m i 3 3 m s r g b m s r g b i b 10 8 0 0615 0 0 0 0 3198 0 0 0 0615 0 0 3198 0 0 1414 0 0 0 0615 0 0 1414 0 0 0 3198 0 31 4290 0 0 7355 0 3198 0 0 1414 0 4 2767 0 0 0 1414 0 0 7355 0 16 6653 19 m a 10 8 0 0053 0 0 0036 0 0 7101 0 0 0 0518 0 0 1135 0 0 0095 0 0036 0 0 1993 0 1 9683 0 0 0 1128 0 2 6167 0 1 9025 0 7070 0 1 9664 0 177 7000 0 0 0 0095 0 1 9082 0 15 2660 where m is the mass of the ship here m 6150 tons and i b i g m s 2 r g b where i g is the inertia matrix about the body s center of gravity r g b col 2 3 m 0 5 2 m the matrix s λ where λ col λ 1 λ 2 λ 3 ℝ 3 denotes a skew symmetric matrix 20 s λ 0 λ 3 λ 2 λ 3 0 λ 1 λ 2 λ 1 0 the rigid body and added mass coriolis matrices are calculated online during simulations from the inertia matrices m r b and m a given above and the velocity ν and relative velocity ν r the rigid body coriolis can be written as fossen 2011 21 c r b ν 0 3 3 m s ν 1 m s ν 2 s r g b m s ν 1 m s r g b s ν 2 s i b ν 2 where the linear and angular velocities are written as ν 1 col u v w ν 2 col p q r the added mass coriolis is calculated in a similar way see sørensen 2013 for a complete representation the nonlinear damping is calculated from a look up table the linear damping matrix d l and restoring force matrix g are d l 10 8 0 0017 0 0 0 0 0115 0 0 0 0014 0 0 0147 0 0 0065 0 0 0 0387 0 0 0891 0 0 0 0147 0 1 6800 0 0 0338 0 0115 0 0 0891 0 16 5299 0 0 0 0065 0 0 0338 0 0 6386 g 10 9 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0141 0 0 0324 0 0 0 0 0 1931 0 0 0 0 0 0324 0 4 2977 0 0 0 0 0 0 0 
22918,in this paper sloshing coupled ship motions are solved numerically in a time domain approach in which the external flow and sloshing are computed respectively with linear diffraction radiation theory and the arbitrary lagrangian eulerian method this numerical method simplifies and improves the coupled ship motion predictions large amplitude excitation is also investigated and soft spring and hard spring phenomena which are predicted by the perturbation theory are observed the sloshing induced pressure in the coupled ship motion model is compared and found to be consistent with that from a prescribed motion model in this numerical method the structure flexibility of the tank wall could be included without additional computational effort keywords sloshing sloshing coupled ship motions arbitrary lagrangian eulerian method sloshing induced pressure sloshing tank flexibility 1 introduction partially filled tanks in an open sea voyaged or offshore moored floating structure will experience sloshing in waves the volume of fluid is large in a partially filled tank of present days offshore units and therefore the sloshing may affect the ship motions greatly this kind of problem is termed sloshing coupled ship motions problem has been widely studied in recent ten years sloshing coupled ship motion problem is frequently studied by a time domain approach though frequency domain approach was attempted based on potential theory molin et al 2002 the time domain approach is advanced by its merit in handling a nonlinear dynamical system which becomes true when sloshing becomes violent an early well known research by time domain approach was conducted by rognebakke and faltinsen 2003 in their research two dimensional experiments and time domain simulation were implemented the sloshing is computed based on multimodal method faltinsen and timokha 2001 which produces favorable result especially when the sloshing intensity is small relative to the fluid filled depth the accuracy on the sloshing load prediction was reported to be sensitive to the chosen damping factor for the resonant sloshing cases the optimized damping parameter for different filling ratio may be inconsistent and the estimation of a proper value is not straightforward another recent attempt to solve this coupling problem based on potential theory is by huang et al 2018 the rankine source is used as the green function in the computation of the boundary value problem for sloshing implying that an instantaneous free surface condition is to be obtained for each time step and the sloshing is solved nonlinearly however an artificial parameter named energy dissipation coefficient has to be proposed the energy dissipation coefficient should be calibrated by the comparison between the experimental and numerical results among a variety of the proposed coefficient values since the energy dissipation coefficient may be varied due to different excitation frequencies and sloshing intensity the estimation of the energy dissipation coefficient and thus the time domain simulation is of uncertainty another similar time domain potential solver in computing sloshing liquid for the coupled ship motion problem was reported by zhao et al 2018 and the coupling between ship motions and internal sloshing is implemented in time domain through an iteration approach zhao et al 2014a zhao et al 2014b and zhao et al 2014c use bem in computing both internal sloshing and external ship motions for 2d problem it is not suprised that many researchers shift their attention to the computational fluid dynamics cfd technique to solve the sloshing coupled problems though the computing time may be intimidating kim et al 2007 is an early attempt by employing the cfd technique based on finite difference method fdm in sloshing computation the comparison between the experimental results and their numerical results shows a good agreement in general nam et al 2009 also applies fdm in the study of the coupled behavior between hull and an anti roll tank art the fdm which employs the structure grids confronts difficulties in computing the free surface resulting poor prediction when resonant sloshing occurred the finite volume method fvm and finite element method fem are of geometric flexibility because of their unstructured grids with curved shape which are convenient in handling complex geometry such as the nonlinear sloshing free surface due to the popularity of fvm in computational fluid dynamics many studies on sloshing problem have been carried out with fvm especially with a volume of fluid vof free surface tracking technique additionally lee et al 2007 saripilli and sen 2018 the sloshing coupling problem solved with a fvm was later developed jiang et al 2015 and the consistent between numerical and experimental results was reported other methods in modelling sloshing liquid have also been examined such as a smooth particle hydrodynamics sph solver by cercos pita et al 2016 serván camas et al 2016 and bulian and cercos pita 2018 fem based cfd has its own advantages beside its unstructured grids the fem may be more suitable for computing a fluid domain with complex geometric representation and be able to construct a higher order accurate method dick 2009 fem has been widely used in structural mechanics because the partial differential formulation could be replaced by an equivalent variation formulation without obstacle this would not be true for the application of fem in cfd however the history of cfd advises that an equivalent fem formulation could be finally obtained with a certain time and the developments in fem based cfd is persistent in this very problem on sloshing coupled ship motions fem is tempting it has been shown from above cited studies that the sloshing coupled ship motion problem does not require very complex partial differential equations to govern the fluid motion and that the navier stokes equations are applicable implying fem would not be harder than a fvm in this specific problem fem solution based arbitrary lagrangian eulerian ale method hirt et al 1974 is popular in computing continuum mechanics with large shear deformation such as flow problem and is more suitable for a moving boundary problem challa 2014 studied the sloshing problem with a prescribed tank motion the numerical predictions are in good agreement with the experimental results in this study the major effort is on the application of ale method for the sloshing coupled ship motion problems in ale method the sloshing free surface nonlinearity is considered automatically and no arbitrary parameter is needed the sloshing coupled ship motions in terms of response excitation amplitude ratio are first computed and compared with the experimental results further coupled ship motions with various excitation amplitude are investigated to illustrate the soft spring and hard spring phenomena for a typical nonlinear dynamical system the sloshing induced pressure in this model is also studied and compared with that obtained from a prescribed motion model in addition the tank wall flexibility can be included through the fluid structure interaction algorithm without additional computational effort 2 numerical modelling 2 1 arbitrary lagrangia eulerian formulation for sloshing traditional numerical method in solving fluid mechanics frequently employs an eulerian description with the mesh fixed in space the fixed mesh enables the material experience a large degree of deformation however for the fluid problem that involves the free surface computation eulerian description experiences some difficulties as it does not directly track the material boundary at free surface the lagrangian description which is widely used in solid mechanics enables meshes to move with the material therefore it is suitable in computing the domain with deformable and moving material boundaries ale method is another appropriate numerical method in handling fluid dynamics problems which involve complex material boundary deformation such as the free surface of an open water the ale method shares the merits from both lagrangian and eulerian description in each time step of computation ale method will first experience a lagranagian phase in which all physics such as stress computation boundary condition and contact algorithms are performed and then the ale method will perform an advection phase during which the deformed mesh will be remapped and the state variables such as mass momentum and energy will be updated through the computation of these variables passing through the mesh boundary since ale method enables meshes to move in an arbitrary manner it is suitable in solving flow problem with complex free surface evolution such as the sloshing problem to solve the sloshing coupled ship motions problem with ale method two coordinate systems should be first defined a coordinate system fixed in the moving tank is referred as ale coordinate and another coordinate system which is an inertial coordinate system fixed on earth and termed as lagrangian coordinate is proposed to describe and formulate the governing equations for both fluid motions and tank rigid body motion then the conservation of mass momentum and energy of fluid the general navier stokes equation are formulated in the ale formulations through 1 to 3 1 ρ t ρ d i v v v w ρ 0 2 ρ v t ρ v w v σ f 3 ρ e t ρ v w e σ v f v where ρ is the mass density v is the fluid velocity vector observed in lagrangian coordinate w is the mesh velocity vector observed in lagrangian coordinate σ denotes the cauchy stress tensor f is the specific body force vector e is the specific total energy the above governing equations become pure eulerian description when the mesh velocity w 0 whereas the lagrangian form equations could be established when v w 0 the form of cauchy stress tensor is not varied with either lagrangian or eulerian description but the vectors inside are determined under the lagrangian coordinate challa et al 2010 the numerical implementation of the ale equations are performed in two consecutive phases the lagrangian phase and the advection phase during the lagrangian phase the mesh is assumed to move with exactly the fluid particles which means v w 0 and therefore the mass is automatically conserved as no mass transport between meshes then the governing equations 1 and 2 are reduced to two equilibrium equations 4 and 5 4 ρ v t σ f 5 ρ e t σ v f v equation 4 is first solved with the central difference method advanced in time 6 v n 1 2 v n 1 2 δ t m 1 f e x t n 1 2 f i n t n 1 2 where f e x t is the external vector force discretized from the body forces f in equations 1 through 5 m is component from the lumped mass matrix at corresponding node f i n t is the internal vector force computed from cauchy stress tensor σ souli and shahrour 2012 equation 5 is updated as the 2 6 is finalized and the new position for each node is obtained from 7 x n 1 2 x n 1 2 δ t v n 1 2 at the tank boundary the boundary of fluid mesh conforms to the boundary of the solid mesh of the tank and an additional force component which reflects the contact between the solid and the fluid is a supplement in the last term of equation 6 in this simulation the tank frame is so rigid that the deformation of the tank wall is negligible and therefore the penalty contact algorithm is applicable to determine the contact force between the tank wall and the fluid souli and benson 2013 by the end of lagrangian phase all physics such as stress computation boundary conditions and contact algorithm have been performed as above then the advection phase followed the lagrangian phase is performed without an advection phase the grid would distort since the mesh moves exactly with the fluid particles and thus pure lagrangian description will induce significant errors therefore to decide where each node is to be relocated and the consequent mesh velocity vector w at each time step becomes the key in the advection phase as well as this whole ale algorithm in this simulation the multi material ale method peery and carroll 2000 with node distortion criteria proposed by sharp 1978 is applied to identify the nodes which have to be relocated the multi material ale algorithm is tempting for fluid mechanics especially for the problem with free surface because it allows arbitrary large distortion and flow free surface evolution during the multi material ale algorithm the final location of each node x n 1 2 determined by lagrangian phase will be updated to x u p d a t e n 1 2 which satisfies the node distortion criteria as w x u p d a t e n 1 2 x n 1 2 is obtained for each node the transportation equation for each state variable is to be solved such as for the mass 8 ρ t v w ρ 0 the solution enables the state variables to transform from the old grids to the newly ones and all the physical quantities associated to the new grids are acquired that is the reason why the advection phase is frequently referred as a remapping process souli and shahrour 2012 as the state variables are solved for each time step t i the sloshing load f s l o s h t i acting on the tank frame by the sloshing flow could be simply obtained through direct integration of pressure along tank boundaries 2 2 boundary value problem for ship motions by assuming the inviscid incompressible and irrotational flow outside a ship the external flow can be described with potential flow theory for ship motions problem in general two sets of boundary conditions have been widely used rognebakke and faltinsen 2003 kim et al 2007 jiang et al 2015 and saripilli and sen 2018 employed the traditional boundary conditions of the linear diffraction radiation water wave problems whereas huang et al 2018 and zhao et al 2018 solve the boundary value problems of the external flow directly in time domain through a time domain green function which are commonly used to solve large amplitude ship motions problem in this study following the majority of the works in this kind of problem the boundary conditions of linear diffraction radiation water wave problem are applied for three reasons first all the works as mentioned above with such boundary conditions produce favorable results and the major difference in the computation is believed to be caused by the different approaches in sloshing computation second under regular excitation the most violent sloshing happens when the excitation frequency is near the cancellation frequency at which the sloshing is resonant and the ship motion is almost forzen in this case a large ship motion program may not significantly improve the prediction last the major job in this work does not focus on the development of a more optimized computation for the external flow but concentrates on the nonlinear sloshing computation inside the tank nevertheless a more advanced boundary value problem to solve the external flow deserves study because as external wave amplitude increases the linear diffraction radiation theory will be eventually invalid fortunately most of the benchmark experiments for the coupled ship motion problem were implemented with a moderate excitation allowing the researchers to optimize the sloshing modelling without the burden of external flow computation improvement in the meanwhile then the boundary value problem for the external flow in three dimensional space is summarized 9 2 φ j 0 j 0 1 2 6 10 g φ j z ω 2 φ j 0 for z 0 11 φ j n n j j 1 2 6 on the body surface 12 φ j n φ 0 n j 7 on the body surface 13 φ j n 0 at the sea bottom where the variable with subscripts j 0 j 7 and j 1 2 6 stands for incident diffraction and radiation waves respectively g ω and n are respectively the acceleration of gravity frequency and normal vector on body surface in addition sommerfeld radiation condition for diffraction and radiation wave is the supplement to complete the boundary value problem 14 lim r r φ j r i k φ j 0 j 1 2 6 for the floating body with arbitrary geometry the above boundary value problem is frequently solved numerically with a boundary element method bem in frequency domain faltinsen 1990 with a proper green function newman 1985 and the commercial solvers for this numerical approach such as aqwa and wamit are widely accessed in the industry 2 3 numerical scheme for the sloshing coupled ship motions as the external flow is solved based on the linear diffraction radiation water wave theory the cummins equation in time domain cummins 2010 is applicable in simulating the sloshing coupled ship motions rognebakke and faltinsen 2003 kim et al 2007 jiang et al 2015 in rognebakke and faltinsen 2003 the sloshing coupled ship motions problem for one degree of freedom dof in sway motion have been experimentally studied therefore our formulation to numerically reproduce this one degree of freedom dof sloshing coupled ship motion problem the sloshing coupled sway motion is as follows 15 m a 22 x t b 22 v i s x t x t c 22 x t 0 t h 22 τ x t τ d τ f 22 t 16 f 22 t f 22 s l o s h t f 22 e x c t f 22 a d d t here the subscript 22 stands for the sway motion 1dof motion a is added mass corresponding to the infinite frequency by the linear water wave theory b v i s c and x t are the viscous damping linear spring coefficient and the ship motion time history h τ is the retardation function in general and may be calculated based on either added mass coefficient or the potential damping coefficient ogilvie 1964 for a multiple dof sloshing coupled ship motions problem the formulations similar to those used in kim et al 2007 could be extended from equations 15 and 16 the added mass coefficients and the potential damping coefficients are computed from the linear diffraction radiation water wave problems as mentioned above and no sloshing effect is considered in computing both coefficients f 22 t is the combination of the static and dynamic sloshing load time history f s l o s h t the excitation load time history from incident and diffraction wave outside the ship f e x c t and the additional load time history f a d d t if any acting on the floating system such as the load from a fpso mooring system in the open sea or a prevention bearing in the experimental set up the sloshing load f s l o s h t is updated at each time step by direct integration of the pressure induced by the sloshing liquid inside the tank the sloshing induced pressure is solved from a cfd solver based on the ale formulation equations 1 through 8 whereas f s l o s h t is updated at each time step the excitation load f e x c t is predetermined and calculated based on the linear diffraction radiation theory for the regular wave excitation the excitation load could be obtained as follow 17 f 22 e x c t r t f 22 e x c sin ω n where ω n is the corresponding frequency of the regular wave and f 22 e x c is the combination of the diffraction wave force and froude krylov force amplitudes obtained from a potential solver wamit which solves the boundary value problem of equations 9 through 14 numerically r t is the ramp function as defined 18 r t 1 f o r t t 1 t f o r t t where t is the initial ramp up time f 22 e x c t is also capable to represent a stochastic excitation with initial ramp rognebakke and faltinsen 2003 has justified by investigating the response spectra that for the steady state ship motions with moderate excitation the higher order harmonics in sloshing load is negligible though rather violent sloshing occurs and that a formulation based on constant coefficients without a time integral in the dynamics equation is valid for the steady state motions then a constant coefficient equation could be proposed as follow which obviously simplifies the computation 19 m a 22 ω n x t b 22 ω n x t b 22 v i s x t x t c 22 x t f 22 t where a ω n and b ω n are the added mass and potential damping corresponding to the excitation frequency ω n for a regular wave and all other symbols are the same as defined in the above in this study equation 19 is valid to numerical replication of the cases which were experimentally tested in rognebakke and faltinsen 2003 an explicit difference scheme is applied in solving the differential equations 15 and 19 the floating structure is assumed to be at rest before simulation and a proper time step length is to be chosen based on an empirical time step length 20 δ t 0 9 l c where l is characteristic length of the finite element mesh and c is the sound speed in the material which is water in this case 2 4 numerical validation numerical replication of the sloshing coupled ship sway motion tested by rognebakke and faltinsen 2003 is investigated in this part the sloshing coupled ship sway motion is excited by regular waves which are initially ramped up from zero and the excitation load is computed from the incident wave amplitude used in the experiments rognebakke and faltinsen 2003 proposed a drag coefficient of c d 3 0 for low keulegan carpenter number flow to estimate the viscous damping coefficient b 22 v i s for the external flow for unit width of the floating tank the viscous damping coefficient is 21 b 22 v i s 1 2 ρ c d l where l is the floating tank bottom length used in the experiment the numerical simulation is conducted explicitly at each time step the discretized excitation load is predefined based on the linear water wave theory by equation 17 and the sloshing load is updated at each time step as mentioned in section 2 1 the variables of physical quantity and state variables of the internal fluid domain refered as ale domain are updated at each time step the acceleration of ship motion for the next time step is updated based on equations 15 and 19 since the velocity x t and position x t in current time step are known 3 numerical results and discussion 3 1 comparison between numerical and experimental results the experiments carried out by rognebakke and faltinsen 2003 are used as the benchmark in their experiments a box shaped hull model located inside a wave flume was allowed to move for sway motion only the hull was equiped with two tanks which could be filled with liquid two filling patterns in rognebakke and faltinsen s experiment were investigated one pattern is that two tanks were both partially filled with the same water level and this filling pattern is referred as two tanks filled hereafter the other pattern is that one tank was partially filled with water and the other tank was being empty and this filling pattern is referred as one tank filled hereafter the amount of the sloshing liquid in the two tanks filled pattern is greater than that in the one tank filled pattern but the total mass of floating tank and filled liquid for both patterns are same this causes the one tank filled pattern experienced more violent sloshing than the two tanks filled pattern under the same excitation amplitude same incident wave amplitude generated in the wave flume fig 1 illustrates numerical and experimental results on the sloshing coupled sway motion response ratio under regular excitation for different filling ratios the numerical computation by our ale method is averaged from a 60s steady state time domain results fig 1 also presents the analytical results from rognebakke and faltinsen 2003 with multimodal method and additional numerical results from kim et al 2007 for the one tank filled cases the values computed from present ale method are in agreement with the experimental results on the motion response for whole frequency bands as well as near the cancellation frequency at which the lowest motion response is found huang et al 2018 such phenomena happened at cancellation frequency are caused by the counterbalance between wave load and sloshing load the tank sway motion is initiated as the incident wave front approaches to the tank front and then the sloshing motion is induced by the tank movement at cancellation frequency the sloshing load is almost equal and directionally opposite to the exciting wave load in the linear theory the sloshing load could be exactly equal to the excitation load and this would be true as the excitation amplitude is relatively small however due to the nonlinear effect of sloshing the exact zero response at cancellation frequency would not happen and further the cancellation frequency would not stick on a constant value and would shift from the value in a linear theory faltinsen and timokha 2001 the multimodal results by rognebakke and faltinsen 2003 are unable to predict the sway motion near the cancellation frequency for all one tank filled cases because large amplitude sloshing occurred due to resonant fig 2 which greatly requires computation capability on nonlinear sloshing in their computation the prediction of cancellation frequency and the corresponding sway motion are greatly affected by the damping coefficient for sloshing liquid when the excitation amplitude increased a spray form of sloshing happens fig 2 and the keulegan damping would drastically underestimate the real damping for the sloshing liquid unfortunately if damping ratio for a low keulegan carpenter number flow is invalid for the sloshing flow the estimation of the damping coefficient would be not straightforward even though it could be proposed artificially the fdm sloshing modelling by kim et al 2007 constantly over predicted the motion at the frequency range just above cancellation frequency kim et al 2007 ascribe this over prediction to some unknown damping sources phase shift was observed in the experiments the sloshing flow motion and the induced load will experience phase shift as the excitation frequency transit from below to above the cancellation frequency such phase shift happens instantaneously at cancellation frequency by linear theory but with a certain range of frequencies by nonlinear theory faltinsen and timokha 2009 thus this phenomenon is extraordinarily sensitive to the nonlinear sloshing computation capability and could be another justification on the nonlinear sloshing computation capability for a numerical algorithm in this ale algorithm the multi material arbitrary lagrangian eulerian mmale method allows nodes to move and meshes to be remapped fig 2 shows the nodes relocation and meshes remapping from the time at 24 52s to at 24 54s for one tank filled case with 0 094 m water level and the violent sloshing phenomenon is observed in the ale domain sloshing liquid the grids located far from free surface remain their shape and move almost exactly with tank motion fig 2 a and b for the nodes located at and near the free surface they are moving with the fluid motion the new position of each node is obtained from equations 6 and 7 the grids formed by those nodes are inevitably deformed due to the complex free surface geometry since a lagrangian phase is compulsory in the ale algorithm and the mesh is moving with exactly the fluid particles the free surface no matter how complex it is could be easily tracked and computed thus with the merits of mmale method for meshes remapping and ale algorithm for tracking the complex geometry this ale method is powerful in computing the sloshing problem 3 2 the effect of excitation wave amplitude the linear sloshing model yields acceptable results as the sloshing amplitude is rather small rognebakke and faltinsen 2003 in general under any excitation corresponding to a specific frequency the sloshing amplitude increased as the excitation enhanced when sloshing become violent the dynamical system of the sloshing coupled sway motion becomes nonlinear such dynamical system may also become nonlinear even under moderate excitation when the excitation frequency is near the cancellation frequency in both cases nonlinear sloshing computation is demanded and the efficiency of nonlinear sloshing modelling in the latter case has been discussed in section 3 1 and was shown in fig 1 when the dynamical system of the sloshing coupled sway motion exhibits nonlinearities it may present either a soft spring or hard spring behavior which means the natural frequency of sloshing flow is not constant with different excitation amplitudes when the floating tank filling ratio is above the critical value of 0 3347 faltinsen and timokha 2001 2009 the dynamical system becomes a soft spring system in which the cancellation frequency shifts to the lower band as the excitation amplitude increased rognebakke and faltinsen 2003 three other excitation amplitude sets which are two three and four times of the excitation amplitude used in the experiments by rognebakke and faltinsen 2003 for two tanks filled with 0 186 m water which corresponds to a filling ratio of 0 495 have been implemented with this ale method and the results are illustrated in fig 3 the result value is averaged from the steady state part of the response under an initially ramped regular excitation the soft spring behavior is validated as the excitation amplitude increased the cancellation frequency shifts downwardly is found this further validates our ale method in computing the nonlinear sloshing however for the cases of one tank filled with 0 094 m of water which corresponds to a filling ratio of 0 25 the hard spring behavior is obscure and the upward shift of the cancellation frequency is only found for small amplitudes equal and below the values used in the experiment fig 4 as the excitation amplitude further increased the sloshing becomes highly nonlinear then the hard spring phenomena which are predicted from the perturbation theory for the nonlinear spring mass solution faltinsen and timokha 2009 is not valid it is interesting that when excitation frequencies are far from the cancellation frequency the ratio between response and wave amplitude is consistent for all tested cases with different amplitudes fig 4 when the excitation frequency is far from the cancellation frequency the sloshing surface elevation and the tank motion are quite regular even for the cases of large amplitude excitation fig 5 on the other hand when the excitation frequency is near the cancellation frequency the response becomes unsteady and the averaged ratio between response and excitation wave amplitude changed significantly as the wave amplitude increased fig 6 similar phenomena are also found for other filling ratios fig 3 thus we can conclude that first sloshing coupled ship motion is extremely sensitive to frequency and the excitation amplitude is only important at certain frequency ranges second nonlinear sloshing computation is greatly demanded when the excitation frequencies are near the cancellation frequency 3 3 sloshing induced pressure in both multimodal method rognebakke and faltinsen 2003 and fdm kim et al 2007 the moving boundary condition is applied in solving the sloshing flow the moving boundary condition is set up directly with the relationship between the flow velocity and the moving body motions however in this ale method a fluid structure interaction algorithm the penalty contact algorithm souli and benson 2013 is applied to determine the boundary condition for the sloshing flow confined in the tank challa 2014 studied the prescribed tank motion induced sloshing with ale method and penalty contact algorithm and reported good results in comparison between the numerical computation and the experimental data in terms of sloshing induced pressure in this part the sloshing induced pressure is generated from and compared between two numerical models the first model is the sloshing coupled sway motion model as discussed above and the second model is the prescribed tank motion model in the prescribed tank motion model the prescribed tank motion is obtained from the sloshing coupled sway motion model with same tank parameters and filling condition therefore in both models the tank motions are kept the same comparison on sloshing induced pressure between both numerical models for two tanks filled case with 0 186 m water are investigated for four locations which are located above near and below the still water free surface fig 7 and fig 8 both figures indicate that the sloshing induced pressure from two models is consistent and the sloshing pressure and consequently the sloshing load are the function of tank motion this consistency also validates the accuracy in pressure prediction in our numerical model and is an important premise in extending our present sloshing coupled ship motion model with a fluid structure interaction module both sloshing coupled sway motion model and prescribed tank motion model employ the same contact algorithm the penalty coupling algorithm to compute the fluid structure interaction between tank wall and the fluid producing the induced pressure at tank wall it could be observed in figs 7 and 8 that some high frequency noise contained in the pressure time history for prescribed tank motion model in penalty coupling algorithm the contact between the fluid and solid is formed as a spring mass system souli and benson 2013 since the tank wall material is solid and its rigidity is large the high frequency noise may exist artificial damper could be introduced to damp out those noise souli and benson 2013 however some physical phenomena may be altered therefore in the prescribed tank motion model the high frequency noise is contained since no artificial damper is applied nevertheless the high frequency noise dose not hinder the observation on the quality of the general trend and the averaged value of the sloshing induced pressure in the coupled sloshing model the tank wall is free of moving and vibrating and the damping terms from the external flow could facilitate the system to damp out the high frequency noise therefore the pressure time history for the coupled sloshing model is smoother 3 4 tank wall flexibility effects on sloshing pressure membrane type lng tanks are the popular solutions in present day s lng carrier design the tank wall is composed primarily by the insulation material with a certain thickness such as 160 mm plywood in a mark iii containment system the wall flexibility in a membrane type lng tank may be significant since the insulation material is soft therefore the flexible insulation material will form a deformable boundary for sloshing fluid and it will profoundly alter some physical quantities of the sloshing flow such as the fluid particle velocity and consequently the pressure on the other hand the structural response of the membrane tank wall has been widely studied such as graczyk and moan 2011 and graczyk et al 2007 these studies revealed that the wall flexibility of the containment system will significantly affect the stress variation in the insulation in the previous sections the tank wall is considered to be rigid however in this ale method the flexibility of the tank wall could be included by defining the material properties in the penalty coupling algorithm souli and benson 2013 in this part we have tested two models with same filling pattern and excitation time history both models are implemented with the above mentioned numerical procedure for sloshing coupled sway motion however one model includes the tank wall flexibility whereas the tank wall in the other model is rigid though the excitation time history is the same the movement of each node on tank wall may be slightly different fig 10 for two models because the nodes on the flexible tank wall will experience additional movement ascribe to the structural vibration fig 9 illustrates the pressure comparison between two models the comparison indicates that though the node movement difference between two models is extremely small fig 10 the pressure will be clearly affected as the tank wall flexibility is included and the pressure may be either mitigated or amplified as the wall flexibility is included on the other hand the difference on sway motion between two models is extremely small therefore when the concern is primarily on the sloshing coupled ship motions it is not surprised that the tank wall flexibility could be neglected however ale method is promising that it enables the inclusion of the fluid structure interaction without increasing the computational effort yet the accuracy on the fluid structure interaction between the sloshing flow and the flexible tank wall is beyond this study and requires detailed research in future 4 conclusion in present study a numerical method fem solution based arbitrary lagrangian eulerian ale method is applied in the simulation on sloshing coupled ship motions the numerical results are compared and found in agreement with the experimental results from rognebakke and faltinsen 2003 due to the capability of ale method in computing nonlinear sloshing the numerical prediction is significantly improved in terms of coupled ship motions furthermore the ale method is straight forward and does not require any additional artificial coefficients large amplitude excitation is further investigated numerically as the excitation amplitude increased for the different filling ratio the soft spring and hard spring phenomena are found this further proves the capability of this ale method in computing nonlinear sloshing in this simulation when highly nonlinear sloshing happens the hard spring phenomenon is obscure and assumed to be caused by hihgly nonlinear sloshing phenomena such as the induced spray and local breaking it has been found that sloshing coupled ship motion problem is extremely sensitive to frequency when the excitation frequency is near the cancellation frequency the sloshing becomes nonlinear and the computation on nonlinear sloshing is greatly demanded the sloshing induced pressure from our numerical method is compared with the pressure obtained in a prescribed motion model two groups of pressure time history are in general consistent with each other as the motions in two models are kept the same it implies that the sloshing induced pressure is function of tank motion and it is irrelevant to the approach by which the tank motions be excited finally the tank wall flexibility could be included in this ale method through the penalty coupling algorithm without additional computational effort when the tank wall is flexible the sloshing induced pressure may be affected locally and transiently however it is not surprised that the sloshing coupled motions are generally in consistent with that from a model with rigid tank wall 
22918,in this paper sloshing coupled ship motions are solved numerically in a time domain approach in which the external flow and sloshing are computed respectively with linear diffraction radiation theory and the arbitrary lagrangian eulerian method this numerical method simplifies and improves the coupled ship motion predictions large amplitude excitation is also investigated and soft spring and hard spring phenomena which are predicted by the perturbation theory are observed the sloshing induced pressure in the coupled ship motion model is compared and found to be consistent with that from a prescribed motion model in this numerical method the structure flexibility of the tank wall could be included without additional computational effort keywords sloshing sloshing coupled ship motions arbitrary lagrangian eulerian method sloshing induced pressure sloshing tank flexibility 1 introduction partially filled tanks in an open sea voyaged or offshore moored floating structure will experience sloshing in waves the volume of fluid is large in a partially filled tank of present days offshore units and therefore the sloshing may affect the ship motions greatly this kind of problem is termed sloshing coupled ship motions problem has been widely studied in recent ten years sloshing coupled ship motion problem is frequently studied by a time domain approach though frequency domain approach was attempted based on potential theory molin et al 2002 the time domain approach is advanced by its merit in handling a nonlinear dynamical system which becomes true when sloshing becomes violent an early well known research by time domain approach was conducted by rognebakke and faltinsen 2003 in their research two dimensional experiments and time domain simulation were implemented the sloshing is computed based on multimodal method faltinsen and timokha 2001 which produces favorable result especially when the sloshing intensity is small relative to the fluid filled depth the accuracy on the sloshing load prediction was reported to be sensitive to the chosen damping factor for the resonant sloshing cases the optimized damping parameter for different filling ratio may be inconsistent and the estimation of a proper value is not straightforward another recent attempt to solve this coupling problem based on potential theory is by huang et al 2018 the rankine source is used as the green function in the computation of the boundary value problem for sloshing implying that an instantaneous free surface condition is to be obtained for each time step and the sloshing is solved nonlinearly however an artificial parameter named energy dissipation coefficient has to be proposed the energy dissipation coefficient should be calibrated by the comparison between the experimental and numerical results among a variety of the proposed coefficient values since the energy dissipation coefficient may be varied due to different excitation frequencies and sloshing intensity the estimation of the energy dissipation coefficient and thus the time domain simulation is of uncertainty another similar time domain potential solver in computing sloshing liquid for the coupled ship motion problem was reported by zhao et al 2018 and the coupling between ship motions and internal sloshing is implemented in time domain through an iteration approach zhao et al 2014a zhao et al 2014b and zhao et al 2014c use bem in computing both internal sloshing and external ship motions for 2d problem it is not suprised that many researchers shift their attention to the computational fluid dynamics cfd technique to solve the sloshing coupled problems though the computing time may be intimidating kim et al 2007 is an early attempt by employing the cfd technique based on finite difference method fdm in sloshing computation the comparison between the experimental results and their numerical results shows a good agreement in general nam et al 2009 also applies fdm in the study of the coupled behavior between hull and an anti roll tank art the fdm which employs the structure grids confronts difficulties in computing the free surface resulting poor prediction when resonant sloshing occurred the finite volume method fvm and finite element method fem are of geometric flexibility because of their unstructured grids with curved shape which are convenient in handling complex geometry such as the nonlinear sloshing free surface due to the popularity of fvm in computational fluid dynamics many studies on sloshing problem have been carried out with fvm especially with a volume of fluid vof free surface tracking technique additionally lee et al 2007 saripilli and sen 2018 the sloshing coupling problem solved with a fvm was later developed jiang et al 2015 and the consistent between numerical and experimental results was reported other methods in modelling sloshing liquid have also been examined such as a smooth particle hydrodynamics sph solver by cercos pita et al 2016 serván camas et al 2016 and bulian and cercos pita 2018 fem based cfd has its own advantages beside its unstructured grids the fem may be more suitable for computing a fluid domain with complex geometric representation and be able to construct a higher order accurate method dick 2009 fem has been widely used in structural mechanics because the partial differential formulation could be replaced by an equivalent variation formulation without obstacle this would not be true for the application of fem in cfd however the history of cfd advises that an equivalent fem formulation could be finally obtained with a certain time and the developments in fem based cfd is persistent in this very problem on sloshing coupled ship motions fem is tempting it has been shown from above cited studies that the sloshing coupled ship motion problem does not require very complex partial differential equations to govern the fluid motion and that the navier stokes equations are applicable implying fem would not be harder than a fvm in this specific problem fem solution based arbitrary lagrangian eulerian ale method hirt et al 1974 is popular in computing continuum mechanics with large shear deformation such as flow problem and is more suitable for a moving boundary problem challa 2014 studied the sloshing problem with a prescribed tank motion the numerical predictions are in good agreement with the experimental results in this study the major effort is on the application of ale method for the sloshing coupled ship motion problems in ale method the sloshing free surface nonlinearity is considered automatically and no arbitrary parameter is needed the sloshing coupled ship motions in terms of response excitation amplitude ratio are first computed and compared with the experimental results further coupled ship motions with various excitation amplitude are investigated to illustrate the soft spring and hard spring phenomena for a typical nonlinear dynamical system the sloshing induced pressure in this model is also studied and compared with that obtained from a prescribed motion model in addition the tank wall flexibility can be included through the fluid structure interaction algorithm without additional computational effort 2 numerical modelling 2 1 arbitrary lagrangia eulerian formulation for sloshing traditional numerical method in solving fluid mechanics frequently employs an eulerian description with the mesh fixed in space the fixed mesh enables the material experience a large degree of deformation however for the fluid problem that involves the free surface computation eulerian description experiences some difficulties as it does not directly track the material boundary at free surface the lagrangian description which is widely used in solid mechanics enables meshes to move with the material therefore it is suitable in computing the domain with deformable and moving material boundaries ale method is another appropriate numerical method in handling fluid dynamics problems which involve complex material boundary deformation such as the free surface of an open water the ale method shares the merits from both lagrangian and eulerian description in each time step of computation ale method will first experience a lagranagian phase in which all physics such as stress computation boundary condition and contact algorithms are performed and then the ale method will perform an advection phase during which the deformed mesh will be remapped and the state variables such as mass momentum and energy will be updated through the computation of these variables passing through the mesh boundary since ale method enables meshes to move in an arbitrary manner it is suitable in solving flow problem with complex free surface evolution such as the sloshing problem to solve the sloshing coupled ship motions problem with ale method two coordinate systems should be first defined a coordinate system fixed in the moving tank is referred as ale coordinate and another coordinate system which is an inertial coordinate system fixed on earth and termed as lagrangian coordinate is proposed to describe and formulate the governing equations for both fluid motions and tank rigid body motion then the conservation of mass momentum and energy of fluid the general navier stokes equation are formulated in the ale formulations through 1 to 3 1 ρ t ρ d i v v v w ρ 0 2 ρ v t ρ v w v σ f 3 ρ e t ρ v w e σ v f v where ρ is the mass density v is the fluid velocity vector observed in lagrangian coordinate w is the mesh velocity vector observed in lagrangian coordinate σ denotes the cauchy stress tensor f is the specific body force vector e is the specific total energy the above governing equations become pure eulerian description when the mesh velocity w 0 whereas the lagrangian form equations could be established when v w 0 the form of cauchy stress tensor is not varied with either lagrangian or eulerian description but the vectors inside are determined under the lagrangian coordinate challa et al 2010 the numerical implementation of the ale equations are performed in two consecutive phases the lagrangian phase and the advection phase during the lagrangian phase the mesh is assumed to move with exactly the fluid particles which means v w 0 and therefore the mass is automatically conserved as no mass transport between meshes then the governing equations 1 and 2 are reduced to two equilibrium equations 4 and 5 4 ρ v t σ f 5 ρ e t σ v f v equation 4 is first solved with the central difference method advanced in time 6 v n 1 2 v n 1 2 δ t m 1 f e x t n 1 2 f i n t n 1 2 where f e x t is the external vector force discretized from the body forces f in equations 1 through 5 m is component from the lumped mass matrix at corresponding node f i n t is the internal vector force computed from cauchy stress tensor σ souli and shahrour 2012 equation 5 is updated as the 2 6 is finalized and the new position for each node is obtained from 7 x n 1 2 x n 1 2 δ t v n 1 2 at the tank boundary the boundary of fluid mesh conforms to the boundary of the solid mesh of the tank and an additional force component which reflects the contact between the solid and the fluid is a supplement in the last term of equation 6 in this simulation the tank frame is so rigid that the deformation of the tank wall is negligible and therefore the penalty contact algorithm is applicable to determine the contact force between the tank wall and the fluid souli and benson 2013 by the end of lagrangian phase all physics such as stress computation boundary conditions and contact algorithm have been performed as above then the advection phase followed the lagrangian phase is performed without an advection phase the grid would distort since the mesh moves exactly with the fluid particles and thus pure lagrangian description will induce significant errors therefore to decide where each node is to be relocated and the consequent mesh velocity vector w at each time step becomes the key in the advection phase as well as this whole ale algorithm in this simulation the multi material ale method peery and carroll 2000 with node distortion criteria proposed by sharp 1978 is applied to identify the nodes which have to be relocated the multi material ale algorithm is tempting for fluid mechanics especially for the problem with free surface because it allows arbitrary large distortion and flow free surface evolution during the multi material ale algorithm the final location of each node x n 1 2 determined by lagrangian phase will be updated to x u p d a t e n 1 2 which satisfies the node distortion criteria as w x u p d a t e n 1 2 x n 1 2 is obtained for each node the transportation equation for each state variable is to be solved such as for the mass 8 ρ t v w ρ 0 the solution enables the state variables to transform from the old grids to the newly ones and all the physical quantities associated to the new grids are acquired that is the reason why the advection phase is frequently referred as a remapping process souli and shahrour 2012 as the state variables are solved for each time step t i the sloshing load f s l o s h t i acting on the tank frame by the sloshing flow could be simply obtained through direct integration of pressure along tank boundaries 2 2 boundary value problem for ship motions by assuming the inviscid incompressible and irrotational flow outside a ship the external flow can be described with potential flow theory for ship motions problem in general two sets of boundary conditions have been widely used rognebakke and faltinsen 2003 kim et al 2007 jiang et al 2015 and saripilli and sen 2018 employed the traditional boundary conditions of the linear diffraction radiation water wave problems whereas huang et al 2018 and zhao et al 2018 solve the boundary value problems of the external flow directly in time domain through a time domain green function which are commonly used to solve large amplitude ship motions problem in this study following the majority of the works in this kind of problem the boundary conditions of linear diffraction radiation water wave problem are applied for three reasons first all the works as mentioned above with such boundary conditions produce favorable results and the major difference in the computation is believed to be caused by the different approaches in sloshing computation second under regular excitation the most violent sloshing happens when the excitation frequency is near the cancellation frequency at which the sloshing is resonant and the ship motion is almost forzen in this case a large ship motion program may not significantly improve the prediction last the major job in this work does not focus on the development of a more optimized computation for the external flow but concentrates on the nonlinear sloshing computation inside the tank nevertheless a more advanced boundary value problem to solve the external flow deserves study because as external wave amplitude increases the linear diffraction radiation theory will be eventually invalid fortunately most of the benchmark experiments for the coupled ship motion problem were implemented with a moderate excitation allowing the researchers to optimize the sloshing modelling without the burden of external flow computation improvement in the meanwhile then the boundary value problem for the external flow in three dimensional space is summarized 9 2 φ j 0 j 0 1 2 6 10 g φ j z ω 2 φ j 0 for z 0 11 φ j n n j j 1 2 6 on the body surface 12 φ j n φ 0 n j 7 on the body surface 13 φ j n 0 at the sea bottom where the variable with subscripts j 0 j 7 and j 1 2 6 stands for incident diffraction and radiation waves respectively g ω and n are respectively the acceleration of gravity frequency and normal vector on body surface in addition sommerfeld radiation condition for diffraction and radiation wave is the supplement to complete the boundary value problem 14 lim r r φ j r i k φ j 0 j 1 2 6 for the floating body with arbitrary geometry the above boundary value problem is frequently solved numerically with a boundary element method bem in frequency domain faltinsen 1990 with a proper green function newman 1985 and the commercial solvers for this numerical approach such as aqwa and wamit are widely accessed in the industry 2 3 numerical scheme for the sloshing coupled ship motions as the external flow is solved based on the linear diffraction radiation water wave theory the cummins equation in time domain cummins 2010 is applicable in simulating the sloshing coupled ship motions rognebakke and faltinsen 2003 kim et al 2007 jiang et al 2015 in rognebakke and faltinsen 2003 the sloshing coupled ship motions problem for one degree of freedom dof in sway motion have been experimentally studied therefore our formulation to numerically reproduce this one degree of freedom dof sloshing coupled ship motion problem the sloshing coupled sway motion is as follows 15 m a 22 x t b 22 v i s x t x t c 22 x t 0 t h 22 τ x t τ d τ f 22 t 16 f 22 t f 22 s l o s h t f 22 e x c t f 22 a d d t here the subscript 22 stands for the sway motion 1dof motion a is added mass corresponding to the infinite frequency by the linear water wave theory b v i s c and x t are the viscous damping linear spring coefficient and the ship motion time history h τ is the retardation function in general and may be calculated based on either added mass coefficient or the potential damping coefficient ogilvie 1964 for a multiple dof sloshing coupled ship motions problem the formulations similar to those used in kim et al 2007 could be extended from equations 15 and 16 the added mass coefficients and the potential damping coefficients are computed from the linear diffraction radiation water wave problems as mentioned above and no sloshing effect is considered in computing both coefficients f 22 t is the combination of the static and dynamic sloshing load time history f s l o s h t the excitation load time history from incident and diffraction wave outside the ship f e x c t and the additional load time history f a d d t if any acting on the floating system such as the load from a fpso mooring system in the open sea or a prevention bearing in the experimental set up the sloshing load f s l o s h t is updated at each time step by direct integration of the pressure induced by the sloshing liquid inside the tank the sloshing induced pressure is solved from a cfd solver based on the ale formulation equations 1 through 8 whereas f s l o s h t is updated at each time step the excitation load f e x c t is predetermined and calculated based on the linear diffraction radiation theory for the regular wave excitation the excitation load could be obtained as follow 17 f 22 e x c t r t f 22 e x c sin ω n where ω n is the corresponding frequency of the regular wave and f 22 e x c is the combination of the diffraction wave force and froude krylov force amplitudes obtained from a potential solver wamit which solves the boundary value problem of equations 9 through 14 numerically r t is the ramp function as defined 18 r t 1 f o r t t 1 t f o r t t where t is the initial ramp up time f 22 e x c t is also capable to represent a stochastic excitation with initial ramp rognebakke and faltinsen 2003 has justified by investigating the response spectra that for the steady state ship motions with moderate excitation the higher order harmonics in sloshing load is negligible though rather violent sloshing occurs and that a formulation based on constant coefficients without a time integral in the dynamics equation is valid for the steady state motions then a constant coefficient equation could be proposed as follow which obviously simplifies the computation 19 m a 22 ω n x t b 22 ω n x t b 22 v i s x t x t c 22 x t f 22 t where a ω n and b ω n are the added mass and potential damping corresponding to the excitation frequency ω n for a regular wave and all other symbols are the same as defined in the above in this study equation 19 is valid to numerical replication of the cases which were experimentally tested in rognebakke and faltinsen 2003 an explicit difference scheme is applied in solving the differential equations 15 and 19 the floating structure is assumed to be at rest before simulation and a proper time step length is to be chosen based on an empirical time step length 20 δ t 0 9 l c where l is characteristic length of the finite element mesh and c is the sound speed in the material which is water in this case 2 4 numerical validation numerical replication of the sloshing coupled ship sway motion tested by rognebakke and faltinsen 2003 is investigated in this part the sloshing coupled ship sway motion is excited by regular waves which are initially ramped up from zero and the excitation load is computed from the incident wave amplitude used in the experiments rognebakke and faltinsen 2003 proposed a drag coefficient of c d 3 0 for low keulegan carpenter number flow to estimate the viscous damping coefficient b 22 v i s for the external flow for unit width of the floating tank the viscous damping coefficient is 21 b 22 v i s 1 2 ρ c d l where l is the floating tank bottom length used in the experiment the numerical simulation is conducted explicitly at each time step the discretized excitation load is predefined based on the linear water wave theory by equation 17 and the sloshing load is updated at each time step as mentioned in section 2 1 the variables of physical quantity and state variables of the internal fluid domain refered as ale domain are updated at each time step the acceleration of ship motion for the next time step is updated based on equations 15 and 19 since the velocity x t and position x t in current time step are known 3 numerical results and discussion 3 1 comparison between numerical and experimental results the experiments carried out by rognebakke and faltinsen 2003 are used as the benchmark in their experiments a box shaped hull model located inside a wave flume was allowed to move for sway motion only the hull was equiped with two tanks which could be filled with liquid two filling patterns in rognebakke and faltinsen s experiment were investigated one pattern is that two tanks were both partially filled with the same water level and this filling pattern is referred as two tanks filled hereafter the other pattern is that one tank was partially filled with water and the other tank was being empty and this filling pattern is referred as one tank filled hereafter the amount of the sloshing liquid in the two tanks filled pattern is greater than that in the one tank filled pattern but the total mass of floating tank and filled liquid for both patterns are same this causes the one tank filled pattern experienced more violent sloshing than the two tanks filled pattern under the same excitation amplitude same incident wave amplitude generated in the wave flume fig 1 illustrates numerical and experimental results on the sloshing coupled sway motion response ratio under regular excitation for different filling ratios the numerical computation by our ale method is averaged from a 60s steady state time domain results fig 1 also presents the analytical results from rognebakke and faltinsen 2003 with multimodal method and additional numerical results from kim et al 2007 for the one tank filled cases the values computed from present ale method are in agreement with the experimental results on the motion response for whole frequency bands as well as near the cancellation frequency at which the lowest motion response is found huang et al 2018 such phenomena happened at cancellation frequency are caused by the counterbalance between wave load and sloshing load the tank sway motion is initiated as the incident wave front approaches to the tank front and then the sloshing motion is induced by the tank movement at cancellation frequency the sloshing load is almost equal and directionally opposite to the exciting wave load in the linear theory the sloshing load could be exactly equal to the excitation load and this would be true as the excitation amplitude is relatively small however due to the nonlinear effect of sloshing the exact zero response at cancellation frequency would not happen and further the cancellation frequency would not stick on a constant value and would shift from the value in a linear theory faltinsen and timokha 2001 the multimodal results by rognebakke and faltinsen 2003 are unable to predict the sway motion near the cancellation frequency for all one tank filled cases because large amplitude sloshing occurred due to resonant fig 2 which greatly requires computation capability on nonlinear sloshing in their computation the prediction of cancellation frequency and the corresponding sway motion are greatly affected by the damping coefficient for sloshing liquid when the excitation amplitude increased a spray form of sloshing happens fig 2 and the keulegan damping would drastically underestimate the real damping for the sloshing liquid unfortunately if damping ratio for a low keulegan carpenter number flow is invalid for the sloshing flow the estimation of the damping coefficient would be not straightforward even though it could be proposed artificially the fdm sloshing modelling by kim et al 2007 constantly over predicted the motion at the frequency range just above cancellation frequency kim et al 2007 ascribe this over prediction to some unknown damping sources phase shift was observed in the experiments the sloshing flow motion and the induced load will experience phase shift as the excitation frequency transit from below to above the cancellation frequency such phase shift happens instantaneously at cancellation frequency by linear theory but with a certain range of frequencies by nonlinear theory faltinsen and timokha 2009 thus this phenomenon is extraordinarily sensitive to the nonlinear sloshing computation capability and could be another justification on the nonlinear sloshing computation capability for a numerical algorithm in this ale algorithm the multi material arbitrary lagrangian eulerian mmale method allows nodes to move and meshes to be remapped fig 2 shows the nodes relocation and meshes remapping from the time at 24 52s to at 24 54s for one tank filled case with 0 094 m water level and the violent sloshing phenomenon is observed in the ale domain sloshing liquid the grids located far from free surface remain their shape and move almost exactly with tank motion fig 2 a and b for the nodes located at and near the free surface they are moving with the fluid motion the new position of each node is obtained from equations 6 and 7 the grids formed by those nodes are inevitably deformed due to the complex free surface geometry since a lagrangian phase is compulsory in the ale algorithm and the mesh is moving with exactly the fluid particles the free surface no matter how complex it is could be easily tracked and computed thus with the merits of mmale method for meshes remapping and ale algorithm for tracking the complex geometry this ale method is powerful in computing the sloshing problem 3 2 the effect of excitation wave amplitude the linear sloshing model yields acceptable results as the sloshing amplitude is rather small rognebakke and faltinsen 2003 in general under any excitation corresponding to a specific frequency the sloshing amplitude increased as the excitation enhanced when sloshing become violent the dynamical system of the sloshing coupled sway motion becomes nonlinear such dynamical system may also become nonlinear even under moderate excitation when the excitation frequency is near the cancellation frequency in both cases nonlinear sloshing computation is demanded and the efficiency of nonlinear sloshing modelling in the latter case has been discussed in section 3 1 and was shown in fig 1 when the dynamical system of the sloshing coupled sway motion exhibits nonlinearities it may present either a soft spring or hard spring behavior which means the natural frequency of sloshing flow is not constant with different excitation amplitudes when the floating tank filling ratio is above the critical value of 0 3347 faltinsen and timokha 2001 2009 the dynamical system becomes a soft spring system in which the cancellation frequency shifts to the lower band as the excitation amplitude increased rognebakke and faltinsen 2003 three other excitation amplitude sets which are two three and four times of the excitation amplitude used in the experiments by rognebakke and faltinsen 2003 for two tanks filled with 0 186 m water which corresponds to a filling ratio of 0 495 have been implemented with this ale method and the results are illustrated in fig 3 the result value is averaged from the steady state part of the response under an initially ramped regular excitation the soft spring behavior is validated as the excitation amplitude increased the cancellation frequency shifts downwardly is found this further validates our ale method in computing the nonlinear sloshing however for the cases of one tank filled with 0 094 m of water which corresponds to a filling ratio of 0 25 the hard spring behavior is obscure and the upward shift of the cancellation frequency is only found for small amplitudes equal and below the values used in the experiment fig 4 as the excitation amplitude further increased the sloshing becomes highly nonlinear then the hard spring phenomena which are predicted from the perturbation theory for the nonlinear spring mass solution faltinsen and timokha 2009 is not valid it is interesting that when excitation frequencies are far from the cancellation frequency the ratio between response and wave amplitude is consistent for all tested cases with different amplitudes fig 4 when the excitation frequency is far from the cancellation frequency the sloshing surface elevation and the tank motion are quite regular even for the cases of large amplitude excitation fig 5 on the other hand when the excitation frequency is near the cancellation frequency the response becomes unsteady and the averaged ratio between response and excitation wave amplitude changed significantly as the wave amplitude increased fig 6 similar phenomena are also found for other filling ratios fig 3 thus we can conclude that first sloshing coupled ship motion is extremely sensitive to frequency and the excitation amplitude is only important at certain frequency ranges second nonlinear sloshing computation is greatly demanded when the excitation frequencies are near the cancellation frequency 3 3 sloshing induced pressure in both multimodal method rognebakke and faltinsen 2003 and fdm kim et al 2007 the moving boundary condition is applied in solving the sloshing flow the moving boundary condition is set up directly with the relationship between the flow velocity and the moving body motions however in this ale method a fluid structure interaction algorithm the penalty contact algorithm souli and benson 2013 is applied to determine the boundary condition for the sloshing flow confined in the tank challa 2014 studied the prescribed tank motion induced sloshing with ale method and penalty contact algorithm and reported good results in comparison between the numerical computation and the experimental data in terms of sloshing induced pressure in this part the sloshing induced pressure is generated from and compared between two numerical models the first model is the sloshing coupled sway motion model as discussed above and the second model is the prescribed tank motion model in the prescribed tank motion model the prescribed tank motion is obtained from the sloshing coupled sway motion model with same tank parameters and filling condition therefore in both models the tank motions are kept the same comparison on sloshing induced pressure between both numerical models for two tanks filled case with 0 186 m water are investigated for four locations which are located above near and below the still water free surface fig 7 and fig 8 both figures indicate that the sloshing induced pressure from two models is consistent and the sloshing pressure and consequently the sloshing load are the function of tank motion this consistency also validates the accuracy in pressure prediction in our numerical model and is an important premise in extending our present sloshing coupled ship motion model with a fluid structure interaction module both sloshing coupled sway motion model and prescribed tank motion model employ the same contact algorithm the penalty coupling algorithm to compute the fluid structure interaction between tank wall and the fluid producing the induced pressure at tank wall it could be observed in figs 7 and 8 that some high frequency noise contained in the pressure time history for prescribed tank motion model in penalty coupling algorithm the contact between the fluid and solid is formed as a spring mass system souli and benson 2013 since the tank wall material is solid and its rigidity is large the high frequency noise may exist artificial damper could be introduced to damp out those noise souli and benson 2013 however some physical phenomena may be altered therefore in the prescribed tank motion model the high frequency noise is contained since no artificial damper is applied nevertheless the high frequency noise dose not hinder the observation on the quality of the general trend and the averaged value of the sloshing induced pressure in the coupled sloshing model the tank wall is free of moving and vibrating and the damping terms from the external flow could facilitate the system to damp out the high frequency noise therefore the pressure time history for the coupled sloshing model is smoother 3 4 tank wall flexibility effects on sloshing pressure membrane type lng tanks are the popular solutions in present day s lng carrier design the tank wall is composed primarily by the insulation material with a certain thickness such as 160 mm plywood in a mark iii containment system the wall flexibility in a membrane type lng tank may be significant since the insulation material is soft therefore the flexible insulation material will form a deformable boundary for sloshing fluid and it will profoundly alter some physical quantities of the sloshing flow such as the fluid particle velocity and consequently the pressure on the other hand the structural response of the membrane tank wall has been widely studied such as graczyk and moan 2011 and graczyk et al 2007 these studies revealed that the wall flexibility of the containment system will significantly affect the stress variation in the insulation in the previous sections the tank wall is considered to be rigid however in this ale method the flexibility of the tank wall could be included by defining the material properties in the penalty coupling algorithm souli and benson 2013 in this part we have tested two models with same filling pattern and excitation time history both models are implemented with the above mentioned numerical procedure for sloshing coupled sway motion however one model includes the tank wall flexibility whereas the tank wall in the other model is rigid though the excitation time history is the same the movement of each node on tank wall may be slightly different fig 10 for two models because the nodes on the flexible tank wall will experience additional movement ascribe to the structural vibration fig 9 illustrates the pressure comparison between two models the comparison indicates that though the node movement difference between two models is extremely small fig 10 the pressure will be clearly affected as the tank wall flexibility is included and the pressure may be either mitigated or amplified as the wall flexibility is included on the other hand the difference on sway motion between two models is extremely small therefore when the concern is primarily on the sloshing coupled ship motions it is not surprised that the tank wall flexibility could be neglected however ale method is promising that it enables the inclusion of the fluid structure interaction without increasing the computational effort yet the accuracy on the fluid structure interaction between the sloshing flow and the flexible tank wall is beyond this study and requires detailed research in future 4 conclusion in present study a numerical method fem solution based arbitrary lagrangian eulerian ale method is applied in the simulation on sloshing coupled ship motions the numerical results are compared and found in agreement with the experimental results from rognebakke and faltinsen 2003 due to the capability of ale method in computing nonlinear sloshing the numerical prediction is significantly improved in terms of coupled ship motions furthermore the ale method is straight forward and does not require any additional artificial coefficients large amplitude excitation is further investigated numerically as the excitation amplitude increased for the different filling ratio the soft spring and hard spring phenomena are found this further proves the capability of this ale method in computing nonlinear sloshing in this simulation when highly nonlinear sloshing happens the hard spring phenomenon is obscure and assumed to be caused by hihgly nonlinear sloshing phenomena such as the induced spray and local breaking it has been found that sloshing coupled ship motion problem is extremely sensitive to frequency when the excitation frequency is near the cancellation frequency the sloshing becomes nonlinear and the computation on nonlinear sloshing is greatly demanded the sloshing induced pressure from our numerical method is compared with the pressure obtained in a prescribed motion model two groups of pressure time history are in general consistent with each other as the motions in two models are kept the same it implies that the sloshing induced pressure is function of tank motion and it is irrelevant to the approach by which the tank motions be excited finally the tank wall flexibility could be included in this ale method through the penalty coupling algorithm without additional computational effort when the tank wall is flexible the sloshing induced pressure may be affected locally and transiently however it is not surprised that the sloshing coupled motions are generally in consistent with that from a model with rigid tank wall 
22919,power prediction is one of the major steps when it comes to design a military boat having a fast running and reliable tool to select the appropriate couple engine propulsion permits to explore more hull s possibilities this study is built on a comparison made between a predictive tool and a series of 35 hard chine planing boats constructed to be identical the different theories used to program the power prediction tool ppt will be cited as reference but will not be developed in this article we present the influence of the different parameters and the validity of our tool keywords vessel power prediction real boat power measurement ship operational performance manufactured boat series improvement of savitsky theory nomenclature opc efficiency of the propulsive system opc efficiency of both gearbox and propulsive system ηméca efficiency of the gearbox p engine power kw v boat speed m s 1 rt total resistance of the boat n vcg vertical position of the center of gravity origin at boat transom m lcg longitudinal position of the center of gravity origin at boat transom m pmeasured absorbed power measured during tests kw pcalculated absorbed power calculated with the program kw pmax nominal power of the engine 1192 kw for this study kw ρair air density kg m 3 cx boat s aerodynamic drag coefficient shouse frontal surface of the wheelhouse m2 shull frontal surface of the hull m2 sboat frontal surface of the boat m2 τ boat trim bss breadth of wheelhouse m hss height of wheelhouse m dbh distance between bow and wheelhouse m bmax hull width m daero boat aerodynamic drag m cpaero distance between daero and cg measured normal to daero m m boat mass kg g acceleration of gravity m s 2 n hydrodynamic force normal to the bottom n c distance between n and cg measured normal to n m ε inclination of thrust line relative to keel line t propeller thrust n f distance between t and cg measured normal to t m df frictional drag component along the bottom surface n a distance between df and cg measured normal to df m m total pitching moment nm loa boat length overall m f volumic froude number lp projected length of the chine m pjet jet absorbed power w bpx maximum chine beam excluding external spray rail m d boat draft m e difference between measured and computed power divided by maximum engine power hhull hull height m 1 introduction energy use in naval operation is a growing concern turan 2015 due to high energy prices and environmental awareness while solutions for freight transport have long been studied lu et al 2015 cichowicz et al 2015 the case of yachting and of light military ships is far less documented for these vessels significant potential energy savings can be found in hull design engine design air conditioning and onboard equipment energy efficiency the current paper focuses on hull design and its influence on engine power and energy consumption hull design requires a preliminary design phase using a complete set of data on geometrical elements and ship weight in this paper a power prediction tool ppt has been developed for preliminary design and tested on a series of 35 boats due to construction techniques slight differences in weight weight distribution and engine power performances can be found in the ship series 1 1 see appendix 1 ppt inputs variation range the goal of the paper is to exploit measured data weight speed engine power to develop validate and improve the power prediction tool ppt see figs 24 to 27 the purpose of the ppt is to be trustable be easy to use and rapid to calculate study the general picture of the boat be used to reduce cfd computation time indeed with the same computing power calculating the boat drag with the ppt is more than ten thousand time faster than using a cfd code where few seconds are required to compute more than fifty speed steps with the ppt a cfd code needs several hours to compute the drag for only one speed step this advantage makes the ppt an efficient tool for the preliminary design work variation of the general parameters of the hull additionally it can be used to reduce the cfd computation time using ppt outputs such as trim and boat draft as cfd inputs helps to position the boat close to his equilibrium position however the ppt is not intended to replace a cfd software it can be seen as a preliminary tool used to give quick answers and orientations on hull geometry then the cfd tool can be used to optimize the hull shape on the one hand it is true that setting up the simulation can be very complex time consuming and running the code requires an important calculation power and or an important amount of time to give some results tezdogan et al 2015 caponnetto but on the other hand a cfd code is extremely powerful to study all the geometrical details of the hull such as rudder blade tips keel shape water inlets air inlets the ppt is mainly based on savitsky theory some modifications have been done to improve its precision at low speed and the aerodynamic drag is treated unconventionally these modifications have been validated with data extracted from real boats and from towing tank tests before comparing the ppt results with real boat measurements its constitutive steps are detailed 2 ppt description the ppt is programmed on excel and coded in vba visual basic for applications in order to easily build a user friendly interface to best describes the program fig 1 presents a screenshot of all inputs of the tool parameters in the hull section are used to implement the savitsky s equations savitsky 1964 to calculated the boat s hydrodynamic drag regarding the restriction of the procedure daniel savitsky himself says the foregoing procedures are carried out for the entire speed range of interest with the restriction that cv 1 0 cv is called the speed coefficient and is equal to v g b with b the beam of the planning surface other limitation have been given by ekman et al 2016 at page 8 section limitations and assumptions 2 2 see appendix 2 savitsky procedure limitations and assumptions given by ekman et al 2016 see fig 2 for the studied boat of this paper the cv is higher than 1 for speed over than 12 knots savitsky s equations can be implemented thanks to savitsky 1964 and also by using the work of svahn 2009 but the original paper of savitsky should be read the only trick for this computational method to be fully automatic is to make a loop to calculate the trim to make it it is necessary to calculate what svahn names the pitching moment equation 35 in savitsky 1964 and 2 29 in svahn 2009 m t o t m g c cos τ 1 sin τ sin τ ε f sin τ d f a f if this pitching moment is negative then all the savitsky procedure should be started again from the beginning with an higher value of the trim and if it is positive the guessed value of the trim should be smaller once the hydrodynamic drag is known it is multiplied by an empirical correction factor developed by blount et al 1976 called mfactor mfactor 0 98 2 l c g b p x 1 45 e 2 f 0 85 3 l c g b p x e 3 f 0 85 it intends to correct the under prediction of the hump speed drag in addition to the drag prediction what angeli names critical trim in angeli 1973 is calculated by two approaches equation 14 in angeli 1973 τ c 4 3 106 85 b t b x 1 0 2 β 6 β 10 β 6 y x 0 75 f 2 y 2 f equation developed by lewandowski in the discussion section in celano 1998 τ crit 1 87 12 54 c l 2 80 82 c l 2 0 193 β 0 0017 β 2 0 3125 β c l 2 this parameter indicates the upper trim limits a trim higher or equal to the critical trim value presents a high risk of porpoising two equations are used to compute it in order to be conservative at each speed step the lower value resulting of the two equations is considered as the critical trim in parallel of the hydrodynamic drag calculation the aerodynamic drag need to be calculated it is done by using the inputs in the aero section of fig 1 this calculation needs be done just before evaluating the boat pitching moment indeed the aerodynamic drag force modify the boat equilibrium the original savitsky equation 35 has been modified to take the aerodynamical effects into account the general equation to calculate the aerodynamic drag daero of a solid is daero 1 2 ρair s cx v 2 where s is the frontal surface of the solid see appendix 1 of savitsky et al 2007 what is specific to boats is that the frontal surface depends on the speed in fact when the boat accelerates the water dynamic lift increases and the boat trim and draught change if it is considered as having a rectangular parallelepipedic hull a rectangular parallelepipedic wheelhouse and a bridge parallel to the keel 3 3 if the bridge forms an angle τ1 with the keel the angle τ in the shouse calculation must be replace by τ1 τ τ1 is positive when in opposite direction of vector g the frontal surface of the boat sboat is sboat shull shouse with shouse bss hss dbh tan τ shull bmax loa tan τ hhull d so daero 1 2 ρair sboat cx v 2 to inject this force in the equation of the pitching moment cpaero need to be determined as the expression of daero shows it the aerodynamic drag is proportional to the frontal surface of the boat the aerodynamic drag can be divided into the wheelhouse aerodynamic drag and the hull aerodynamic drag cpaero is equal to vcg less the vertical coordinate of the barycenter of both hull and house aerodynamic center of pressure cp aero vcg 0 5 shouse hss dbh tan τ 0 5 scoque zh dbh tan τ shouse scoque once cpaero is known equation 35 of savitsky 1964 can be modified to become m mg c cos τ 1 sin τ sin τ ε f sin τ df a f daircpaero data in step section are used to compute savitsky s method used behind the step developed by svahn in svahn 2009 for this paper the number of step will remain 0 as the studied boat is a classical hard chine monohull boat data in site section are used to compute water viscosity and density air density and to give a classical engine de rating the engine propulsion section permits to select a propulsion type classical propeller surface propeller hydrojet to calculate its opc to select an engine to compute the fuel consumption to take into account the mechanical losses the engine consumption calculation will not be detailed in this paper because the focus is made only on power prediction the hydrojet opc calculation will be detailed as the studied boat is equipped with two of them and as it directly influences the power prediction to calculate the opc of a given jet the thrust prediction curve fig 3 must be given by the manufacturer each black curve on this graph gives the jet thrust versus boat speed for a given power the green doted curve represents the limit of the cavitation zone to use it automatically in a computer procedure the opc coefficients need to be determined for each speed step opc t v p j e t this relation transforms the thrust versus speed for a given power curves into the opc versus speed for a given power curves then comparing the required thrust with all that are shown on the different curves allows to select the best value between all the possible a graph as the one on fig 3 will give ten possible values of opc for each speed step the more iso power curve available the more precise this method will be the fuel capacity permits to calculate the boat operating range and endurance the last item of this section mechanical losses allows to compute opc opc ηméca 4 4 for the rest of the study ηméca will be equal to 95 which eventually leads to the calculation of the real required power for a given speed p calculated v rt opc the optimisation section is used to simulate 11 cases in which the boat weight or the center of gravity slightly differs this add on helps to target the best compromise zone in terms of weight and center of gravity s longitudinal position during the early stages of a preliminary study the speed section permits to enter speeds of interest the more speeds the longer the total calculation will be this rapid overlook of the ppt helps to understand how calculations are made the next section will present the boat s data used to make the comparison 3 boat and useful data the boat used to compare the ppt with real measurements is the plascoa 1650 fig 4 it is produced in series at cnc couach more than 50 have been produced these military vessels are built on a planing hull to intercept other boats at speeds over 55 knots the line plan is confidential so it will not be presented in this paper however data required for simulation are available on fig 5 fig 6 and in appendix 1 ppt inputs variation range a sample of 35 ships have been chosen to be compared with the ppt predictions they have been tested in real conditions in the arcachon bay over a period of 11 month this long time range permits to cover a panel of different weather conditions the required data had been classified as being of two types general data which are constant from boat to boat fig 5 specific data which are boat dependent fig 6 vcg is considered as being constant because it can only vary from few centimeters which has a very small impact on power performances and it is very difficult to measure 5 5 reference bureau veritas rules for the classification and the certification of yachts part b hull and stability chapter 3 stability appendix 1 inclining experiment and weighing test site data air temperature water temperature and salinity had been approximated with average values for each of the 35 studied boats sea trials reports have been made they are used to validate the performance of the propulsion line in real conditions data are collected every 200 engine rpm those which are of interest for this study are the absorbed engine power and the corresponding boat speed all the 35 boats are equipped with interceptors which are used to reduce drag at low speed the impact of this system will not be studied in this paper because for the considered tests the interceptors were not deployed if one is interested in implementing interceptors in a prediction code ekman et al 2016 present two methods of doing so 4 mfactor impacts analysis as it is explained in the ppt description the tool first calculates the boat drag with the savitsky procedure and then corrects this drag with the mfactor coefficient of blount et al 1976 with mfactor 0 98 2 l c g b p x 1 45 e 2 f 0 85 3 l c g b p x e 3 f 0 85 according to the authors this coefficient can be used while f 1 0 l c g l p 0 46 for the 1650 plascoa lp 14 7 m and on the 35 studied boat lcg 5 45 m so l c g l p 0 371 0 46 for this boat f 1 when the speed is over 11 knots to further enhance the precision of the ppt a better understanding of how this mfactor impacts the calculation is required so numerical tests have been conducted with and without this coefficient 4 1 calculation without mfactor the first study was to overlap the absorbed power versus boat speed for both theoretical data blue curve and experimental data red curve see fig 7 in order to refine the study the difference between theoretical and real points have been computed in order for it to be representative it has been divided by the maximal engine power here 1192 kw so e p m e a s u r e d p c o m p u t e d p m a x if this difference is positive the ppt underestimate the required power if negative then it overestimate the required power the 361 points have been reported on fig 8 extreme values rounded in blue on fig 8 belong to three different boats and represent 6 values over 361 1 66 additionally these three boats are the first three to have been studied so it can be considered as being not representative of the series according to figs 7 and 8 it is noticeable that the ppt is oversizing the required engine power for speeds under 9 knots and to a slightly lesser extent in the interval 14 24 knots the local average of the differences is respectively 5 12 and 1 92 while the overall average is 0 35 however the ppt is underestimating the required power for speed over 58 knots the average excluding the first three boats is 3 63 in order to better understand the differences repartition an histogram is shown on fig 9 it allows to sort values within an interval of 20 20 with a step of 2 violet corresponds to the number of values while blue gives the percentage of the number of values regarding the total number of values according to this histogram all the differences are included in the interval 11 83 24 87 values are mostly negatives and dispersed in the interval 8 6 indeed 55 12 of the total values are negatives 29 92 are included in 2 2 50 69 are included in 4 4 94 18 are included in 10 10 4 2 calculation with mfactor this study follows the same presentation as the previous one according to fig 10 the oversizing between 14 and 24 knots is more pronounced than if the mfactor is not used additionally the required engine power is underestimated for speeds under 8 knots and values are even negatives for speeds under 7 knots this observation confirms the model s limits given by the authors as in previous parts graphic of fig 11 permits to be more precise all the differences are included in the interval 13 89 30 86 the average of the differences for speeds under 9 knots is 7 32 and for the interval 14 24 knots it is 5 72 the average for speed over 58 knots excluding the first three boats is 5 59 the overall average difference is 3 14 comparing to savitsky s theory alone the histogram on fig 12 reveals that a higher number of values are over 18 of difference this is due to the fact that in addition to the first three boats values values for speeds under 8 knots increase this statistic the histogram also highlights that values are more dispersed compared with savitsky theory alone indeed 31 3 of the total values are negatives 28 25 are included in 2 2 46 54 are included in 4 4 82 55 are included in 10 10 5 tool s optimisation taking into account observations that have been made in the 4 mfactor impacts analysis part the ppt had been modified to minimize differences between measurements and predictions the purpose of these modifications is to minimize changes made on savitsky s theory and to keep a physical meaning in this new version the mfactor had been suppressed the average of 1 92 between 14 and 24 knots is considered acceptable because smaller than 2 in absolute value 5 1 correction for low speed the paragraph 4 1 calculation without mfactor highlights a lack of precision of the savitsky procedure for speed below cv 0 9 in order to reduce it a new correction has been employed to keep it very simple a model under the form rtv k x vb with k constant is studied when the cv is below 0 9 the considered boat is in displacement mode during this phase the drag versus speed of the boat seems to follow a polynomial curve 4 1 calculation without mfactor sunny and shiju 2010 olivieri et al 2001 fig 13 below illustrates this observation the rt curve gives the experimental drag measured for the insean 2340 olivieri et al 2001 and the rt modif curve is plotted according to the relation rtv rtmax vmax ˆ 3 5 x v3 5 with rtv the drag calculated at the speed v rtmax the maximum measured drag measured at vmax the maximum speed reached during the test 3 371 m s 1 after reading the paper from sunny and shiju 2010 it comes that the 1650 plascoa is not the only planning boat where the drag predicted by savitsky procedure is equal to the measured drag for cv approximatively equal to 0 9 10 25 knots for the 1650 plascoa according to this observation two values of this curve are known the boat drag at 0 knot is obviously equal to 0 and at cv 0 9 it is almost equal to the drag calculated with the savitsky procedure let rt0 9 rtv and v0 9 respectively the drag computed at cv 0 9 with savitsky s theory the drag computed at the speed v and v0 9 the speed at cv 0 9 as the drag at cv 0 9 is known k rt 0 9 v 0 9 ˆ b the real difficulty is to determine b as the authors did not know all the different coefficients from the 4 boats studied by sunny and shiju 2010 the curves they produced have been reused to conduct an empirical study to find the best b possible the results are presented below on figs 14 15 16 and 17 for each of the four boats 3 different b have been tested on each graph are plotted the measured drag r n the calculated drag by the correction formula rtv rt 0 9 v 0 9 ˆ b x vb rmodif n the calculated drag with the savitsky procedure rsavit n for each tested b are calculated the difference r n rmodif n r n difference the corrected difference r n rmodif n r 0 9 n with r0 9 n the measured drag at cv 0 9 corrected difference fig 18 is summing up the maximum the minimum and the average of these two calculations for all the tested b according to all these curves a general trend is highlighted increasing b causes the rmodif curve to bend and be on a longer range under the real drag curve r so the real drag is more under predicted for all the four boats the value of b which minimize the difference between the two curves r and rmodif without too much under prediction is always between 2 and 4 indeed for vessel number 1 2 b 3 for vessel number 2 b 4 for vessel number 3 b 4 for vessel number 5 2 b 3 to conclude this study on the empirical formula rtv rt 0 9 v 0 9 ˆ b x vb on a first approach taking b 3 is a good compromise the risk of under prediction is low and the drag prediction precision is noticeably increased compared with the classical savitsky procedure 5 2 cx modification to correct the differences observed for speeds over 58 knots only the cx was increased after few iterations 1 1 is the value which gives the best correlation with tests as a reminder the cx value for a plane plate is equal to 1 and for a car it is often between 0 3 and 0 4 such a high value for the 1650 plascoa can be explained by two factors the boat shape is not aerodynamic enough mast antennas radars are not taking into account to compute the frontal surface of the ship so it artificially increases the vessel cx 5 3 results according to fig 19 and fig 20 the power sizing for low speed is much more precise the average of the differences for speed under 9 knots is 0 24 while it was 5 12 with savitsky theory alone the oversizing in the interval 14 24 knots is increased because of the cx increase the local average being 2 12 while it was 1 92 with a cx of 0 8 the average for speeds over 58 knots excluding the first three boats is 0 31 while it was 3 63 with a cx of 0 8 all the differences are included in 13 63 22 3 the overall average is 0 203 the histogram fig 21 shows a values distribution more centered around zero than with previous tests 44 60 of the values are negatives 48 2 are included in 2 2 72 58 are included in 4 4 95 84 are included in 10 10 6 discussion as demonstrated in the previous sections savitsky s theory seems to be imprecise for f 0 9 10 25 knots for the 1650 plascoa the improvements made in the current work leads to override this problem for the studied boat another prediction has been made using the current ppt to estimate the top speed of a couach s 12 m boat called the wasp the top speed found by calculation was 53 knots and the real top speed is 55 knots the same study cannot be done for now because the boat is powered with outboard engines which are not equipped to measure the engine load absorbed power this tool will be very useful in the next thesis work it will permit to characterize the impact of an increased boat s mass and to study the influence the longitudinal position of the center of gravity for example an inventory had been made on all the 35 boats light ship weight see fig 22 according to this inventory the average light ship weight is 21493 kg the maximum light ship weight is 22058 kg and the minimum light ship weight is 20848 kg the heavier boat is the number 24 it is 565 kg over the average light ship weight of the 35 boats this added weight represents an increase of 2 63 from the average light ship these values have to be put into perspective because boats weight are measured by hydrostatic weighing for this particular series of boat the total measure procedure can generate a maximum error of 400 kg if this measurement inaccuracy is masked the boat is made of grp glass reinforced plastic through the vacuum infusion method this technique ensures an efficient industrial process but for technical reason the boat is not made of one piece and needs to be assembled the assembling stratification gluing process is highly operator dependent and represent 600 kg couach engineers have measured a 20 variably for this process which could lead to a changeability of 120 kg from boat to boat more generally the couach engineers have measured a 5 variably for all the composite work as it represents about 6 tons of the boat it could lead to a changeability of 300 kg from boat to boat subcontractors too can generate weight error as they have their on weight tolerance on fig 23 the absorbed power by engine for the boat number 24 have been plotted both with its real weight blue curve and with 565 kg less red curve to match with the boats average light ship weight then the two powers have been subtracted and divided by the maximum engine power green curve this green curve highlights the required overpower generated by the mass increased on this particular boat due to the mass increase of 2 63 to maintain the boat full speed the engine need to deliver 1 more power see fig 24 7 conclusion this study leads to validate the ppt improved and calibrated with the input of measured data its precision is quite surprising 6 6 all the 35 boats have been tested over a period of 11 month inside the arcachon bay given the fact that it requires only few and easy to get parameters the tool is fast executing and easy to use the code execution requires about 30 s to compute boat drag required power engine speed fuel consumption boat range and endurance for 58 input speeds while on the same computer it takes about 24 h to compute the boat drag for only 1 input speed using a cfd code some improvements could still be made for speed between 14 and 24 knots they would modify locally the savitsky s theory as blount et al 1976 did and a cfd calculation or a wind tunnel test could validate the boat cx value of 1 1 this tool will be very useful in the conception process at cnc as well as for applied research purpose it will be used to characterize the impact of an increased boat s mass and to study the influence the longitudinal position of the center of gravity appendix a supplementary data the following is the supplementary data to this article data profile data profile appendix a supplementary data supplementary data to this article can be found online at https doi org 10 1016 j oceaneng 2018 12 076 appendix 1 ppt inputs variation range in this appendix the inputs variation range is presented with the four graph below as a reminder the specific data are length on waterline beam at waterline displacement and lcg fig 24 variation of the length of waterline for the 35 boats fig 24 fig 25 variation of the displacement for the 35 boats fig 25 fig 26 variation of the beam maximum breadth at waterline for the 35 boats fig 26 fig 27 variation of the lcg for the 35 boats fig 27 appendix 2 savitsky procedure limitations and assumptions given by ekman et al 2016 the following paragraph is directly extract from ekman et al 2016 and gives limitations of the savitsky procedure the center of pressure is difficult to calculate and two main assumptions need to be made first of all the center of pressure of the dynamic component is said to be at 75 percent of the main wetted length forward of the transom and the buoyant force center of pressure at 33 percent also from the transom another limitation of the savitsky method is that equation 2 6 is only applicable for 0 60 cv 13 0 2 τ 15 and λ 4 these limitations comes from lambda being λ lw b where the w λ lw b etted length lw is unlimited this implies that the trim must be limited to a minimum of 2 for lambda not to increase exponentially 
22919,power prediction is one of the major steps when it comes to design a military boat having a fast running and reliable tool to select the appropriate couple engine propulsion permits to explore more hull s possibilities this study is built on a comparison made between a predictive tool and a series of 35 hard chine planing boats constructed to be identical the different theories used to program the power prediction tool ppt will be cited as reference but will not be developed in this article we present the influence of the different parameters and the validity of our tool keywords vessel power prediction real boat power measurement ship operational performance manufactured boat series improvement of savitsky theory nomenclature opc efficiency of the propulsive system opc efficiency of both gearbox and propulsive system ηméca efficiency of the gearbox p engine power kw v boat speed m s 1 rt total resistance of the boat n vcg vertical position of the center of gravity origin at boat transom m lcg longitudinal position of the center of gravity origin at boat transom m pmeasured absorbed power measured during tests kw pcalculated absorbed power calculated with the program kw pmax nominal power of the engine 1192 kw for this study kw ρair air density kg m 3 cx boat s aerodynamic drag coefficient shouse frontal surface of the wheelhouse m2 shull frontal surface of the hull m2 sboat frontal surface of the boat m2 τ boat trim bss breadth of wheelhouse m hss height of wheelhouse m dbh distance between bow and wheelhouse m bmax hull width m daero boat aerodynamic drag m cpaero distance between daero and cg measured normal to daero m m boat mass kg g acceleration of gravity m s 2 n hydrodynamic force normal to the bottom n c distance between n and cg measured normal to n m ε inclination of thrust line relative to keel line t propeller thrust n f distance between t and cg measured normal to t m df frictional drag component along the bottom surface n a distance between df and cg measured normal to df m m total pitching moment nm loa boat length overall m f volumic froude number lp projected length of the chine m pjet jet absorbed power w bpx maximum chine beam excluding external spray rail m d boat draft m e difference between measured and computed power divided by maximum engine power hhull hull height m 1 introduction energy use in naval operation is a growing concern turan 2015 due to high energy prices and environmental awareness while solutions for freight transport have long been studied lu et al 2015 cichowicz et al 2015 the case of yachting and of light military ships is far less documented for these vessels significant potential energy savings can be found in hull design engine design air conditioning and onboard equipment energy efficiency the current paper focuses on hull design and its influence on engine power and energy consumption hull design requires a preliminary design phase using a complete set of data on geometrical elements and ship weight in this paper a power prediction tool ppt has been developed for preliminary design and tested on a series of 35 boats due to construction techniques slight differences in weight weight distribution and engine power performances can be found in the ship series 1 1 see appendix 1 ppt inputs variation range the goal of the paper is to exploit measured data weight speed engine power to develop validate and improve the power prediction tool ppt see figs 24 to 27 the purpose of the ppt is to be trustable be easy to use and rapid to calculate study the general picture of the boat be used to reduce cfd computation time indeed with the same computing power calculating the boat drag with the ppt is more than ten thousand time faster than using a cfd code where few seconds are required to compute more than fifty speed steps with the ppt a cfd code needs several hours to compute the drag for only one speed step this advantage makes the ppt an efficient tool for the preliminary design work variation of the general parameters of the hull additionally it can be used to reduce the cfd computation time using ppt outputs such as trim and boat draft as cfd inputs helps to position the boat close to his equilibrium position however the ppt is not intended to replace a cfd software it can be seen as a preliminary tool used to give quick answers and orientations on hull geometry then the cfd tool can be used to optimize the hull shape on the one hand it is true that setting up the simulation can be very complex time consuming and running the code requires an important calculation power and or an important amount of time to give some results tezdogan et al 2015 caponnetto but on the other hand a cfd code is extremely powerful to study all the geometrical details of the hull such as rudder blade tips keel shape water inlets air inlets the ppt is mainly based on savitsky theory some modifications have been done to improve its precision at low speed and the aerodynamic drag is treated unconventionally these modifications have been validated with data extracted from real boats and from towing tank tests before comparing the ppt results with real boat measurements its constitutive steps are detailed 2 ppt description the ppt is programmed on excel and coded in vba visual basic for applications in order to easily build a user friendly interface to best describes the program fig 1 presents a screenshot of all inputs of the tool parameters in the hull section are used to implement the savitsky s equations savitsky 1964 to calculated the boat s hydrodynamic drag regarding the restriction of the procedure daniel savitsky himself says the foregoing procedures are carried out for the entire speed range of interest with the restriction that cv 1 0 cv is called the speed coefficient and is equal to v g b with b the beam of the planning surface other limitation have been given by ekman et al 2016 at page 8 section limitations and assumptions 2 2 see appendix 2 savitsky procedure limitations and assumptions given by ekman et al 2016 see fig 2 for the studied boat of this paper the cv is higher than 1 for speed over than 12 knots savitsky s equations can be implemented thanks to savitsky 1964 and also by using the work of svahn 2009 but the original paper of savitsky should be read the only trick for this computational method to be fully automatic is to make a loop to calculate the trim to make it it is necessary to calculate what svahn names the pitching moment equation 35 in savitsky 1964 and 2 29 in svahn 2009 m t o t m g c cos τ 1 sin τ sin τ ε f sin τ d f a f if this pitching moment is negative then all the savitsky procedure should be started again from the beginning with an higher value of the trim and if it is positive the guessed value of the trim should be smaller once the hydrodynamic drag is known it is multiplied by an empirical correction factor developed by blount et al 1976 called mfactor mfactor 0 98 2 l c g b p x 1 45 e 2 f 0 85 3 l c g b p x e 3 f 0 85 it intends to correct the under prediction of the hump speed drag in addition to the drag prediction what angeli names critical trim in angeli 1973 is calculated by two approaches equation 14 in angeli 1973 τ c 4 3 106 85 b t b x 1 0 2 β 6 β 10 β 6 y x 0 75 f 2 y 2 f equation developed by lewandowski in the discussion section in celano 1998 τ crit 1 87 12 54 c l 2 80 82 c l 2 0 193 β 0 0017 β 2 0 3125 β c l 2 this parameter indicates the upper trim limits a trim higher or equal to the critical trim value presents a high risk of porpoising two equations are used to compute it in order to be conservative at each speed step the lower value resulting of the two equations is considered as the critical trim in parallel of the hydrodynamic drag calculation the aerodynamic drag need to be calculated it is done by using the inputs in the aero section of fig 1 this calculation needs be done just before evaluating the boat pitching moment indeed the aerodynamic drag force modify the boat equilibrium the original savitsky equation 35 has been modified to take the aerodynamical effects into account the general equation to calculate the aerodynamic drag daero of a solid is daero 1 2 ρair s cx v 2 where s is the frontal surface of the solid see appendix 1 of savitsky et al 2007 what is specific to boats is that the frontal surface depends on the speed in fact when the boat accelerates the water dynamic lift increases and the boat trim and draught change if it is considered as having a rectangular parallelepipedic hull a rectangular parallelepipedic wheelhouse and a bridge parallel to the keel 3 3 if the bridge forms an angle τ1 with the keel the angle τ in the shouse calculation must be replace by τ1 τ τ1 is positive when in opposite direction of vector g the frontal surface of the boat sboat is sboat shull shouse with shouse bss hss dbh tan τ shull bmax loa tan τ hhull d so daero 1 2 ρair sboat cx v 2 to inject this force in the equation of the pitching moment cpaero need to be determined as the expression of daero shows it the aerodynamic drag is proportional to the frontal surface of the boat the aerodynamic drag can be divided into the wheelhouse aerodynamic drag and the hull aerodynamic drag cpaero is equal to vcg less the vertical coordinate of the barycenter of both hull and house aerodynamic center of pressure cp aero vcg 0 5 shouse hss dbh tan τ 0 5 scoque zh dbh tan τ shouse scoque once cpaero is known equation 35 of savitsky 1964 can be modified to become m mg c cos τ 1 sin τ sin τ ε f sin τ df a f daircpaero data in step section are used to compute savitsky s method used behind the step developed by svahn in svahn 2009 for this paper the number of step will remain 0 as the studied boat is a classical hard chine monohull boat data in site section are used to compute water viscosity and density air density and to give a classical engine de rating the engine propulsion section permits to select a propulsion type classical propeller surface propeller hydrojet to calculate its opc to select an engine to compute the fuel consumption to take into account the mechanical losses the engine consumption calculation will not be detailed in this paper because the focus is made only on power prediction the hydrojet opc calculation will be detailed as the studied boat is equipped with two of them and as it directly influences the power prediction to calculate the opc of a given jet the thrust prediction curve fig 3 must be given by the manufacturer each black curve on this graph gives the jet thrust versus boat speed for a given power the green doted curve represents the limit of the cavitation zone to use it automatically in a computer procedure the opc coefficients need to be determined for each speed step opc t v p j e t this relation transforms the thrust versus speed for a given power curves into the opc versus speed for a given power curves then comparing the required thrust with all that are shown on the different curves allows to select the best value between all the possible a graph as the one on fig 3 will give ten possible values of opc for each speed step the more iso power curve available the more precise this method will be the fuel capacity permits to calculate the boat operating range and endurance the last item of this section mechanical losses allows to compute opc opc ηméca 4 4 for the rest of the study ηméca will be equal to 95 which eventually leads to the calculation of the real required power for a given speed p calculated v rt opc the optimisation section is used to simulate 11 cases in which the boat weight or the center of gravity slightly differs this add on helps to target the best compromise zone in terms of weight and center of gravity s longitudinal position during the early stages of a preliminary study the speed section permits to enter speeds of interest the more speeds the longer the total calculation will be this rapid overlook of the ppt helps to understand how calculations are made the next section will present the boat s data used to make the comparison 3 boat and useful data the boat used to compare the ppt with real measurements is the plascoa 1650 fig 4 it is produced in series at cnc couach more than 50 have been produced these military vessels are built on a planing hull to intercept other boats at speeds over 55 knots the line plan is confidential so it will not be presented in this paper however data required for simulation are available on fig 5 fig 6 and in appendix 1 ppt inputs variation range a sample of 35 ships have been chosen to be compared with the ppt predictions they have been tested in real conditions in the arcachon bay over a period of 11 month this long time range permits to cover a panel of different weather conditions the required data had been classified as being of two types general data which are constant from boat to boat fig 5 specific data which are boat dependent fig 6 vcg is considered as being constant because it can only vary from few centimeters which has a very small impact on power performances and it is very difficult to measure 5 5 reference bureau veritas rules for the classification and the certification of yachts part b hull and stability chapter 3 stability appendix 1 inclining experiment and weighing test site data air temperature water temperature and salinity had been approximated with average values for each of the 35 studied boats sea trials reports have been made they are used to validate the performance of the propulsion line in real conditions data are collected every 200 engine rpm those which are of interest for this study are the absorbed engine power and the corresponding boat speed all the 35 boats are equipped with interceptors which are used to reduce drag at low speed the impact of this system will not be studied in this paper because for the considered tests the interceptors were not deployed if one is interested in implementing interceptors in a prediction code ekman et al 2016 present two methods of doing so 4 mfactor impacts analysis as it is explained in the ppt description the tool first calculates the boat drag with the savitsky procedure and then corrects this drag with the mfactor coefficient of blount et al 1976 with mfactor 0 98 2 l c g b p x 1 45 e 2 f 0 85 3 l c g b p x e 3 f 0 85 according to the authors this coefficient can be used while f 1 0 l c g l p 0 46 for the 1650 plascoa lp 14 7 m and on the 35 studied boat lcg 5 45 m so l c g l p 0 371 0 46 for this boat f 1 when the speed is over 11 knots to further enhance the precision of the ppt a better understanding of how this mfactor impacts the calculation is required so numerical tests have been conducted with and without this coefficient 4 1 calculation without mfactor the first study was to overlap the absorbed power versus boat speed for both theoretical data blue curve and experimental data red curve see fig 7 in order to refine the study the difference between theoretical and real points have been computed in order for it to be representative it has been divided by the maximal engine power here 1192 kw so e p m e a s u r e d p c o m p u t e d p m a x if this difference is positive the ppt underestimate the required power if negative then it overestimate the required power the 361 points have been reported on fig 8 extreme values rounded in blue on fig 8 belong to three different boats and represent 6 values over 361 1 66 additionally these three boats are the first three to have been studied so it can be considered as being not representative of the series according to figs 7 and 8 it is noticeable that the ppt is oversizing the required engine power for speeds under 9 knots and to a slightly lesser extent in the interval 14 24 knots the local average of the differences is respectively 5 12 and 1 92 while the overall average is 0 35 however the ppt is underestimating the required power for speed over 58 knots the average excluding the first three boats is 3 63 in order to better understand the differences repartition an histogram is shown on fig 9 it allows to sort values within an interval of 20 20 with a step of 2 violet corresponds to the number of values while blue gives the percentage of the number of values regarding the total number of values according to this histogram all the differences are included in the interval 11 83 24 87 values are mostly negatives and dispersed in the interval 8 6 indeed 55 12 of the total values are negatives 29 92 are included in 2 2 50 69 are included in 4 4 94 18 are included in 10 10 4 2 calculation with mfactor this study follows the same presentation as the previous one according to fig 10 the oversizing between 14 and 24 knots is more pronounced than if the mfactor is not used additionally the required engine power is underestimated for speeds under 8 knots and values are even negatives for speeds under 7 knots this observation confirms the model s limits given by the authors as in previous parts graphic of fig 11 permits to be more precise all the differences are included in the interval 13 89 30 86 the average of the differences for speeds under 9 knots is 7 32 and for the interval 14 24 knots it is 5 72 the average for speed over 58 knots excluding the first three boats is 5 59 the overall average difference is 3 14 comparing to savitsky s theory alone the histogram on fig 12 reveals that a higher number of values are over 18 of difference this is due to the fact that in addition to the first three boats values values for speeds under 8 knots increase this statistic the histogram also highlights that values are more dispersed compared with savitsky theory alone indeed 31 3 of the total values are negatives 28 25 are included in 2 2 46 54 are included in 4 4 82 55 are included in 10 10 5 tool s optimisation taking into account observations that have been made in the 4 mfactor impacts analysis part the ppt had been modified to minimize differences between measurements and predictions the purpose of these modifications is to minimize changes made on savitsky s theory and to keep a physical meaning in this new version the mfactor had been suppressed the average of 1 92 between 14 and 24 knots is considered acceptable because smaller than 2 in absolute value 5 1 correction for low speed the paragraph 4 1 calculation without mfactor highlights a lack of precision of the savitsky procedure for speed below cv 0 9 in order to reduce it a new correction has been employed to keep it very simple a model under the form rtv k x vb with k constant is studied when the cv is below 0 9 the considered boat is in displacement mode during this phase the drag versus speed of the boat seems to follow a polynomial curve 4 1 calculation without mfactor sunny and shiju 2010 olivieri et al 2001 fig 13 below illustrates this observation the rt curve gives the experimental drag measured for the insean 2340 olivieri et al 2001 and the rt modif curve is plotted according to the relation rtv rtmax vmax ˆ 3 5 x v3 5 with rtv the drag calculated at the speed v rtmax the maximum measured drag measured at vmax the maximum speed reached during the test 3 371 m s 1 after reading the paper from sunny and shiju 2010 it comes that the 1650 plascoa is not the only planning boat where the drag predicted by savitsky procedure is equal to the measured drag for cv approximatively equal to 0 9 10 25 knots for the 1650 plascoa according to this observation two values of this curve are known the boat drag at 0 knot is obviously equal to 0 and at cv 0 9 it is almost equal to the drag calculated with the savitsky procedure let rt0 9 rtv and v0 9 respectively the drag computed at cv 0 9 with savitsky s theory the drag computed at the speed v and v0 9 the speed at cv 0 9 as the drag at cv 0 9 is known k rt 0 9 v 0 9 ˆ b the real difficulty is to determine b as the authors did not know all the different coefficients from the 4 boats studied by sunny and shiju 2010 the curves they produced have been reused to conduct an empirical study to find the best b possible the results are presented below on figs 14 15 16 and 17 for each of the four boats 3 different b have been tested on each graph are plotted the measured drag r n the calculated drag by the correction formula rtv rt 0 9 v 0 9 ˆ b x vb rmodif n the calculated drag with the savitsky procedure rsavit n for each tested b are calculated the difference r n rmodif n r n difference the corrected difference r n rmodif n r 0 9 n with r0 9 n the measured drag at cv 0 9 corrected difference fig 18 is summing up the maximum the minimum and the average of these two calculations for all the tested b according to all these curves a general trend is highlighted increasing b causes the rmodif curve to bend and be on a longer range under the real drag curve r so the real drag is more under predicted for all the four boats the value of b which minimize the difference between the two curves r and rmodif without too much under prediction is always between 2 and 4 indeed for vessel number 1 2 b 3 for vessel number 2 b 4 for vessel number 3 b 4 for vessel number 5 2 b 3 to conclude this study on the empirical formula rtv rt 0 9 v 0 9 ˆ b x vb on a first approach taking b 3 is a good compromise the risk of under prediction is low and the drag prediction precision is noticeably increased compared with the classical savitsky procedure 5 2 cx modification to correct the differences observed for speeds over 58 knots only the cx was increased after few iterations 1 1 is the value which gives the best correlation with tests as a reminder the cx value for a plane plate is equal to 1 and for a car it is often between 0 3 and 0 4 such a high value for the 1650 plascoa can be explained by two factors the boat shape is not aerodynamic enough mast antennas radars are not taking into account to compute the frontal surface of the ship so it artificially increases the vessel cx 5 3 results according to fig 19 and fig 20 the power sizing for low speed is much more precise the average of the differences for speed under 9 knots is 0 24 while it was 5 12 with savitsky theory alone the oversizing in the interval 14 24 knots is increased because of the cx increase the local average being 2 12 while it was 1 92 with a cx of 0 8 the average for speeds over 58 knots excluding the first three boats is 0 31 while it was 3 63 with a cx of 0 8 all the differences are included in 13 63 22 3 the overall average is 0 203 the histogram fig 21 shows a values distribution more centered around zero than with previous tests 44 60 of the values are negatives 48 2 are included in 2 2 72 58 are included in 4 4 95 84 are included in 10 10 6 discussion as demonstrated in the previous sections savitsky s theory seems to be imprecise for f 0 9 10 25 knots for the 1650 plascoa the improvements made in the current work leads to override this problem for the studied boat another prediction has been made using the current ppt to estimate the top speed of a couach s 12 m boat called the wasp the top speed found by calculation was 53 knots and the real top speed is 55 knots the same study cannot be done for now because the boat is powered with outboard engines which are not equipped to measure the engine load absorbed power this tool will be very useful in the next thesis work it will permit to characterize the impact of an increased boat s mass and to study the influence the longitudinal position of the center of gravity for example an inventory had been made on all the 35 boats light ship weight see fig 22 according to this inventory the average light ship weight is 21493 kg the maximum light ship weight is 22058 kg and the minimum light ship weight is 20848 kg the heavier boat is the number 24 it is 565 kg over the average light ship weight of the 35 boats this added weight represents an increase of 2 63 from the average light ship these values have to be put into perspective because boats weight are measured by hydrostatic weighing for this particular series of boat the total measure procedure can generate a maximum error of 400 kg if this measurement inaccuracy is masked the boat is made of grp glass reinforced plastic through the vacuum infusion method this technique ensures an efficient industrial process but for technical reason the boat is not made of one piece and needs to be assembled the assembling stratification gluing process is highly operator dependent and represent 600 kg couach engineers have measured a 20 variably for this process which could lead to a changeability of 120 kg from boat to boat more generally the couach engineers have measured a 5 variably for all the composite work as it represents about 6 tons of the boat it could lead to a changeability of 300 kg from boat to boat subcontractors too can generate weight error as they have their on weight tolerance on fig 23 the absorbed power by engine for the boat number 24 have been plotted both with its real weight blue curve and with 565 kg less red curve to match with the boats average light ship weight then the two powers have been subtracted and divided by the maximum engine power green curve this green curve highlights the required overpower generated by the mass increased on this particular boat due to the mass increase of 2 63 to maintain the boat full speed the engine need to deliver 1 more power see fig 24 7 conclusion this study leads to validate the ppt improved and calibrated with the input of measured data its precision is quite surprising 6 6 all the 35 boats have been tested over a period of 11 month inside the arcachon bay given the fact that it requires only few and easy to get parameters the tool is fast executing and easy to use the code execution requires about 30 s to compute boat drag required power engine speed fuel consumption boat range and endurance for 58 input speeds while on the same computer it takes about 24 h to compute the boat drag for only 1 input speed using a cfd code some improvements could still be made for speed between 14 and 24 knots they would modify locally the savitsky s theory as blount et al 1976 did and a cfd calculation or a wind tunnel test could validate the boat cx value of 1 1 this tool will be very useful in the conception process at cnc as well as for applied research purpose it will be used to characterize the impact of an increased boat s mass and to study the influence the longitudinal position of the center of gravity appendix a supplementary data the following is the supplementary data to this article data profile data profile appendix a supplementary data supplementary data to this article can be found online at https doi org 10 1016 j oceaneng 2018 12 076 appendix 1 ppt inputs variation range in this appendix the inputs variation range is presented with the four graph below as a reminder the specific data are length on waterline beam at waterline displacement and lcg fig 24 variation of the length of waterline for the 35 boats fig 24 fig 25 variation of the displacement for the 35 boats fig 25 fig 26 variation of the beam maximum breadth at waterline for the 35 boats fig 26 fig 27 variation of the lcg for the 35 boats fig 27 appendix 2 savitsky procedure limitations and assumptions given by ekman et al 2016 the following paragraph is directly extract from ekman et al 2016 and gives limitations of the savitsky procedure the center of pressure is difficult to calculate and two main assumptions need to be made first of all the center of pressure of the dynamic component is said to be at 75 percent of the main wetted length forward of the transom and the buoyant force center of pressure at 33 percent also from the transom another limitation of the savitsky method is that equation 2 6 is only applicable for 0 60 cv 13 0 2 τ 15 and λ 4 these limitations comes from lambda being λ lw b where the w λ lw b etted length lw is unlimited this implies that the trim must be limited to a minimum of 2 for lambda not to increase exponentially 
