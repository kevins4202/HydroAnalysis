index,text
22590,in this paper a hybrid underwater robotic vehicle hurv which combines the advantages of autonomous underwater vehicle and remotely operated vehicle is introduced the vehicle system consists of an onboard system with a set of embedded pc 104 computers and a surface monitoring station based on the client server supervisory control and data acquisition scada system correspondingly a two layer software architecture composed of a monitoring layer and a task layer is presented and they are inserted into the surface and onboard systems respectively the task layer includes four kinds of tasks perception task communication task motion control task and fault treatment task subsequently the design and implementation for multiple tasks running in the task layer are described in detail furthermore under the above software architecture a model free fuzzy proportional integral derivative fpid controller is applied to heading control task at different speed profiles in consideration of the simplified implementation on the pc 104 computer numerical simulation results quantitatively illustrate the designed fpid controller performs better than the classic pid controller especially in the rise time settling time and overshot finally tank experiments are performed to test the performance of the entire onboard system of the developed hurv with the integrated software architecture and fpid control algorithm keywords hybrid underwater robotic vehicle multi task vxworks fuzzy logic heading control 1 introduction the ocean covers over two thirds of the earth s surface although this vast and profound area is rich in biological organisms chemicals mineral deposits natural gas and petroleum resources the marine environment is quite complex and harsh therefore human beings are not capable of submerging to deep sea depths or staying underwater for long periods of time applications of various high tech means are required for instance underwater robotic technology williams et al 2012 zhang et al 2015 2018 to understand marine environment study marine science and explore and exploit marine resources jarry 1986 pazmi√±o et al 2011 by employing an observation device carried by underwater vehicles human beings can complete rapid environmental assessment hagen et al 2008 sample and observe underwater resources perform subsea mapping inspect underwater cable yu et al 2018a and explore underwater oil and natural gas deposits lane et al 1997 therefore many countries with strong ocean engineering capabilities are focusing much attention on the development of underwater vehicles roberts and sutton 2006 according to the operation mode two main types of unmanned underwater vehicles remotely operated vehicle rov and autonomous underwater vehicle auv are designed to replace human beings for deep sea activities in the commercial and scientific fields antonelli 2014 the rov is physically linked via an umbilical cable to an operator that can be either on an underwater workstation or on a supporting ship with the umbilical cable remote operators can use a rov to accomplish intervention tasks easily therefore rovs are widely used by the offshore oil and gas industry relying on the onboard power supply and intelligent control units auvs are designed to be used with no umbilical cable and are completely autonomous examples of auvs include the bluefin 21 which was used for black box search of the malaysia airlines crashed plane developed by bluefin corporation dhanak et al 2013 and remus which was originally used as a remote environmental measuring unit developed by woods hole oceanographic institution stokey et al 2001 combining the advantages of rov and auv a new type of hybrid underwater robotic vehicle hurv is designed for deep sea exploration and intervention such as nereus bowen et al 2008 urov7k nakajoh et al 2007 and sauvim marani et al 2009 this new underwater explorer fills the gap between the commercial market and oceanographic research the hurv can operate as an auv for broad area underwater mapping surveys and then can convert into the light fiber optic tethered rov mode to do close up underwater sampling intervention of a target area of interest in fig 1 the operational procedure of the hurv is shown more precisely 1 the mother ship supporting the hurv sails for the target area and then the hurv and its launcher are deployed into the water together 2 the hurv is released from the launcher and moves just like an auv in the autonomous control mode exploring the large scale sea floor with sonars and cameras in order to locate the target of interest and 3 the hurv works in the rov mode enabling high quality tele operation by a human pilot such that fine underwater target manipulation intervention is achieved via visual guidance and force tactile feedback in this paper the design implementation and experimental results of a hurv which was recently developed by the lab of autonomous robotic marine system arms are presented how to design a two layer software architecture and a practical heading control system for the developed hurv are the main concerns one of the key technologies employed in the hurv developed by arms is the software architecture in valavanis et al 1997 the proposed control system is based on a two level control architecture comprised of a supervisory control level and a functional control level the supervisory control component is responsible for the coordination of the overall auv navigation guidance and control the functional level modules directly control actuators sensors and all hardware components residing directly on the vehicle in han et al 2013 the control architecture of the auv is implemented by a hybrid architecture with two layers a hierarchical planning layer and a reactive execution layer most of its tasks are interpreted as a set of waypoints and then actions are specified at the points in palomeras et al 2012 the component oriented layer based architecture for autonomy cola2 of the vehicle implements the component oriented layer based control architecture structured in three layers a reactive layer an execution layer and a mission layer reinforcement learning techniques have been programmed in the reactive layer to improve the vehicle primitives adaptability to unknown time varying environments the execution layer implements a discrete event system based on petri nets the entire software structure of the sauvim is divided into two parts for mc68060 cpu boards kim and yuh 2004 one is the application layer and the other is the device layer the shared memory via the vme bus is used to guarantee real time communication between these two cpus the other key technology is the control design when the hurv works in the auv mode the classic motion forms can be divided into the heading control and depth control or dynamic positioning path following and trajectory tracking chu et al 2018 bhopale et al 2016 neto et al 2015 li et al 2018 qiao et al 2017 in the last twenty years various motion controllers have been designed such as pid control backstepping control sliding mode control smc neural network control fuzzy control and so on wang et al 2017 liu et al 2016 for instance a virtual target moving along the path is introduced as an additional degree of freedom to eliminate the singularity of the horizontal plane path following lapierre and soetanto 2007 in fossen et al 2015 a nonlinear algorithm combining a pid controller with an adaptive line of sight los guidance is presented for the dubins path following it is well known that smc is considered a robust approach to control a nonlinear system with internal and external uncertainties therefore the smc technique has been widely used to address the tracking control problem of robotic vehicles with uncertain parameters liang et al 2016 sun et al 2016 cui et al 2017 xiang et al 2017a the conventional fuzzy logic control due to its simple control structure and easy and cost effective design has been successfully employed in control applications in robotic fields wang et al 2018 peng et al 2018 for instance a single input fuzzy logic controller is applied to the variable depth control of an underwater vehicle ishaque et al 2010 in kim et al 2012 the sufficient conditions for the robust stabilization based on the exact discrete time fuzzy model of uncertain nonlinear systems are derived and their application to the depth control of auv is tested the adaptive fuzzy technique based on the universal approximation has also played an important role in the control field of robotic vehicles the readers can refer to tee and ge 2006 the neural network control has a similar capability and has been adopted in dynamic positioning gao et al 2016 distributed maneuvering peng et al 2017 trajectory tracking chu et al 2016 wang et al 2015 and path planning zhu et al 2018 it is very important that a controller can be easily implemented in an actual onboard system of robotic vehicles therefore a reliable and practical controller is preferred by engineers in developing a marine robotic vehicle in this paper the software architecture of the hurv is divided into a monitoring layer and a task layer the monitoring layer is built on the client server supervisory control and data acquisition scada system running between the surface platform and embedded computers the real time operating system vxworks is chosen for the underwater embedded controller such that the multi task processing is achieved based on the round robin binary mutual exclusion semaphores and shared memory based on the above software architecture the hurv makes full use of the onboard controller and high accuracy sensors to complete complex underwater missions then a practical fuzzy proportional integral derivative fpid controller without using any hydrodynamic coefficients is chosen for the automatic heading control where the cruising speed tracking by using a pair of vertical rudders and the low speed tracking by using two horizontal thrusters are considered separately subsequently numerical simulation results are provided to show the superiority of the designed fpid controller performs than the classic pid controller especially in the rise time settling time and overshot finally the motion experiment results of this developed hurv illustrate that the two layer system has satisfactory multi task processing performance and under the corresponding two layer software architecture the fuzzy based heading controller has robust performance against unknown hydrodynamic coefficients and external disturbances in the presence of actuator saturation 2 prototype overview this section describes the hurv prototype developed at the arms lab which aims to perform environmental survey and monitoring tasks in medium range shallow water zuo et al 2015 fig 2 shows a digital model of the torpedo shaped hurv which weighs approximately 380 kg in air and is designed to have a cruising speed of 2 knots the hurv consists of the bow middle and stern sections two auxiliary tunnel thrusters and some observation devices are placed in the bow section the middle is a cylindrical pressure hull where the battery control board observation and navigation sensors fosn ahrs and mb300 are placed and the stern is equipped with two pair of rudders two auxiliary thrusters and a main propeller details of the actuation system can refer to xiang et al 2017b remark 1 the auxiliary thrusters are used at low speed because their efficiency will decrease in lateral directions at cruising speed forward movement due to the relative perpendicular water flow passing the outlets in contrast the rudder surface can only perform efficiently at cruising speed philips et al 2013 tanakitkorn et al 2017 in addition the hurv has a surface monitoring station which can receive display and store data and send the motion control command to the vehicle the surface monitoring station is designed based on a scada system the mode for control devices in the scada system is the client server mode the communication between client and server transfers over multiple protocols tipsuwanporn et al 2013 goldenberg and wool 2013 fig 3 shows the surface monitoring platform which includes two display screens and a control panel 3 software architecture the software system of the hurv is based on a two layer software framework comprised of a monitoring layer and a task layer as shown in fig 4 which guarantees wide band low loss long distance and high speed information communication between the surface monitoring station and the hybrid vehicle via a fine fiber 3 1 monitoring layer based on the scada system the monitoring layer in the surface monitoring station provides the human machine interface and the station vehicle interface the human machine interface has two functions one is to receive the motion command from the control panel and the other is to display the state information of the vehicle the station vehicle interface sends the motion command to the vehicle and receives the necessary monitoring information from the vehicle through the monitoring layer the surface monitoring station can initiate basic motion control such as individual or combined control among the main propeller two thrusters for vertical motion and two thrusters for lateral motion a pair of horizontal rudders and a pair of vertical rudders it also orders autonomous control commands for automatic heading depth control emergency braking and emergency surfacing all the commands and information can be stored in the online database 3 2 task layer once the hybrid underwater vehicle receives a control command from the surface monitoring platform it will initiate the specific task and insert this task into the entire multi task operation the low level control system initiates eleven tasks covering the functional task sets shown in fig 4 including three sensor information processing tasks three status information processing tasks three motion control tasks a network communication task and a fault treatment task the definition of each task is given in table 1 where the onboard system processes each task based on the corresponding sensor frequency in order to avoid potential blocking note that smooth navigation information can be obtained by filtering high frequency attitude data using recursive average filtering algorithm in terms of the functional requirements of the monitoring layer and multiple tasks of the task layer the designed system has the following characteristics it works on a large volume of data and is multi tasked and multi threaded in addition to the capable hardware platform and the reasonable software framework it is far more important to orderly process multiple tasks in low level controller to meet the running requirements of the entire motion control system which is the focus of the following section 4 multi task processing the underwater control system is built on an embedded computer pc 104 with the real time operating system vxworks this type of embedded hardware and operating system configuration is quite competent however to further improve the system performance a method that only depends on improving the performance and frequency of the processor of the embedded system is suboptimal it is necessary to optimize the software design of the embedded system and propose reasonable task scheduling algorithms this section presents the multi task processing in the low level controller and describes concretely the processing and implementation of the underwater control system for the perception task communication task motion control task and fault treatment task 4 1 global taskspawn the low level control system of the hurv makes full use of the shared memory mutex semaphore and synchronization exclusion mechanism in the real time operating system vxworks to achieve reasonable processing among multiple concurrent tasks and multiple concurrent threads the multi task flow of the low level controller is shown in fig 5 where the black line represents the task flow the blue dotted line denotes the control flow and the purple dotted line denotes the information flow the entire underwater system contains the perception communication motion control and fault treatment tasks once the entire system is launched the perception tasks from task 2 to task 7 begin round robin scheduling to process sensor data at each time slot if any task is unable to receive the new data it will initiate the fault treatment task task11 to complete fault decision making and fault treatment otherwise it will release the synchronization semaphore once the network communication task task 1 obtains all the above semaphores task 1 will begin to run meanwhile the low level control system establishes communication with the surface monitoring station the low level control system carries out the modbus request to the surface monitoring system and makes sure that the motion control tasks from task 8 to task10 are initiated based on the modbus reply from the surface monitoring system if the communication drops it will initiate task11 to perform fault decision making and fault treatment table 2 shows the global taskspawn among four sub tasks in the form of logic codes 4 2 perception task processing the basic round robin algorithm of the perception task is shown in table 3 the perception task contains the battery information leakage detection information main propeller state depth information and position and attitude information treatment sub tasks the specific definition of each task is shown in table 1 the six sub tasks are created and launched with the same priority of 120 and then they are under round robin algorithm to acquire the real time position attitude and state data of the vehicle based on each time slot the above processing actually belongs to a fixed priority scheduling where all tasks are periodic and fully preemptible sha et al 2004 these data build a global shared database if any task is able to obtain updated data in a period it will use semgive to release a binary synchronous semaphore created by sembcreat as follows semst i sembcreat sem q priority sem empty with i 2 3 7 and semgive semst i if the task is still unable to obtain updated data in two periods of time it is determined that the corresponding device related to the task has a fault under this situation this task is unable to release a binary synchronous semaphore hence it will immediately report the sensor fault information to the fault decision making and treatment system 4 3 communication task processing the implementation of the communication task is shown in table 4 after all the perception tasks acquire the real time position attitude and status data successfully they will release six binary synchronous semaphores the communication task has been waiting for once the semaphores are received the underwater control system will send modbus tcp requests to the surface monitoring system based on the modbus data model with separate blocks in the settled communication frequency the operator can monitor the real time position attitude and state information of the hurv the discrete output consisting of the real time alarm information and the analog output composed of the real time position attitude and equipment information change over time note that each modbus tcp request has its own response if it is unable to obtain the response information the return value of the communication read function will be abnormal based on the return value the system can determine whether the communication has a fault once the communication failure occurs it will transfer the communication fault information to the fault decision making and treatment system 4 4 motion control task processing the implementation for the motion control task based on the mutual exclusion mechanism is shown in table 5 the motion control task is initiated upon receiving the modbus tcp response message because the response information of the modbus tcp discrete input contains seven types of basic motion instructions and two types of emergency operation instructions the response message of the modbus tcp analog input contains the speed depth and heading commands entered by the human operator the response mechanism of the modbus tcp discrete output and analog output guarantees the reliability of the communication between the surface monitoring system and the underwater vehicle the automatic depth and heading setting of the motion control tasks can run individually or in combination once these two tasks run together they will begin round robin scheduling for each time slot there is a mutex mechanism based on the mutex semaphore semdz j semmcreat sem q fifo j 1 2 between seven individual motion commands and two automatic control commands note that the initial value of the mutex semaphore is sem full once the basic individual motion control automatic motion control calls semtake to access the mutex semaphore the mutex semaphore will not be available then the individual motion control or automatic motion control uses the critical resources for motion control and data processing only when the individual motion control automatic motion control calls semgive to give up its right of use can the automatic control motion basic individual motion access the mutex semaphore which means that the automatic control motion and the basic individual motion cannot run at the same time 4 5 fault treatment task processing the fault treatment task of the hurv is performed by defining the highest priority 100 to ensure that the fault state information is available to the fault analysis decision making and treatment system promptly once a fault is detected from the shared data the fault treatment system makes the emergency decision and sends it to the emergency controller the controller drives relevant devices to complete the necessary treatment which ensures the safety of the underwater vehicle remark 2 the design and test of the fault treatment system have been described in xiang et al 2017b in this paper we focus on the design and experiment test of the entire onboard control system for the developed hurv with the integrated software architecture and control algorithm to validate the performance of multi task processing as well as the control performance under the two layer software architecture 5 fuzzy based heading control the basic automatic control for an underwater vehicle includes the heading control and depth control in this section we discuss the design of the heading controller as an example the depth controller is similar to the former and is omitted the hurv has a highly nonlinear dynamics model and this model is often uncertain due to unknown hydrodynamics coefficients and external environmental disturbances fossen et al 2015 in addition the onboard controller should be easily implemented considering the potential degradation of the classical pid controller in different step responses and disturbances a model free fpid controller is designed for the heading control of our hurv 5 1 heading dynamics usually the yaw dynamics model along the z axis can be described as follows 1 œà r r f r œÑ r i z n r where œà is the heading angle and r is the yaw speed i z is the moment of inertia of the hurv about the z axis and n r is the hydrodynamics coefficients f r includes the hydrodynamics coefficients environmental disturbances and fiber tractive force in addition œÑ r is the control input generated by the actuation system remark 3 according to resolution msc 137 76 approved by international maritime organization imo the thrust performance of the onboard actuators throughout its entire surge speed profile is evaluated but is omitted due to the limitation of length it can be concluded that horizontal thrusters should work in the speed interval of 0 0 679 m s and vertical rudders work in the speed interval of 0 998 3 084 m s 5 2 heading control at cruising speed rudder as shown in fig 6 the cruising speed heading control framework includes a command filter a fpid controller rudder actuator hurv body and inertial measurement unit imu let œà d denote the desired heading in this paper we introduce a command filter to generate an intermediate variable œà r e f as the heading reference signal 2 Œ¥ œà k œà d k œà r e f k t f œà r e f k œà r e f k 1 Œ¥ œà k d t where k is the sampling index t f is the time delay and d t is the control period remark 4 t f denotes the time of the reference heading tracking the desired heading obviously choosing a large t f leads to slow tracking performance note that the initial value of œà r e f k is the same as the initial heading angle of the hurv then define the virtual heading tracking error 3 e œà k œà k œà r e f k as mentioned above the heading control at cruising speed will use the vertical rudder therefore the absolute rudder command without any constraint can be designed in the discrete form as follows visioli 2001 4 Œ¥ r 1 k k p e œà k k i i 0 k e œà i k d e œà k e œà k 1 d t where k p k i and k d are the proportional integral and derivative gains of the pid controller in fact we decompose the integral part in 2 installments i 0 k e œà i i 0 k 1 e œà i e œà k in the programming of onboard system therefore only the last value needs to be stored for each step to obtain better control performance for a nonlinear hurv with model uncertainties in different initial states control gains should be adjusted on line the fuzzy logic method is a practical method with easy implementation the following are the adopted fuzzy rules r1 if œÅ e œà k e œà k e œà k 1 d t 0 that means the heading angle is far from the reference value then k p k k p 0 k 1 f œÅ k d k k p 0 k 2 f œÅ and k i k 0 with f œÅ being the output of the fuzzy system in the range of 0 1 r2 if œÅ 0 that means the current heading is converging to the reference value then k p k k p k 1 and k d k k d k 1 r3 if e œà k e min then k i k k i 0 k 3 f e œà k where e min is determined by the experiment result in addition triangular membership function trimf and zero order takagi sugeno kang method are used in the fuzzy implementation note that it will be equal to the limit if the fuzzy input is outside the universe of discourse which will guarantee a membership degree equal to 1 if the fuzzy input assumes a value outside the universe of discourse note that inherent saturation exists for the vertical rudder surface driven by a stepping motor on the one hand the increment of the rudder angle is bound at each time slot due to time delay zhang et al 1998 yu et al 2019 hence we revise the control law as follows 5 Œ¥ r 2 k Œ¥ r 1 k Œ¥ r 1 k Œ¥ r 1 k 1 Œ¥ e m Œ¥ r 1 k 1 Œ¥ e m Œ¥ r 1 k Œ¥ r 1 k 1 Œ¥ e m where Œ¥ e m is the maximum steering rate of the rudder on the other hand the absolute rudder angle should be restricted due to the layout constraint kim 2015 zheng and feroskhan 2017 yu et al 2018b in this sense the final rudder comment is 6 Œ¥ r k Œ¥ r 2 k Œ¥ r 2 k Œ¥ max s g n Œ¥ r 2 k Œ¥ max Œ¥ r 2 k Œ¥ max where Œ¥ max is the maximum rudder angle to be permitted and s g n is the sign function 5 3 heading control at low speed thruster as shown in fig 7 the low speed heading control framework includes a command filter a fpid controller two thrusters hurv body and an imu similar to the cruising speed heading control using the vertical rudder the heading control at low speed can be designed in the discrete form as follows 7 u b 1 k k p e œà k k i i 0 k e œà i k d e œà k e œà k 1 d t where u b 1 k denotes the control voltage of the bow horizontal thruster as shown in fig 1 the bow and stern horizontal thrusters are installed in the opposite direction so that no sway force is generated the control voltage u s 1 of the stern horizontal thruster in the low speed heading control can be designed as follows 8 u s 1 k u b 1 k as the thruster propeller is driven by the brushless dc motor we only consider the absolute input saturation the final control voltages are as follows 9 u k u 1 k u 1 k u max s g n u 1 k u max u 1 k u max where u max is the maximum input voltage that is usually given on the datasheet of thrusters 6 numerical simulation to embody the rationality and superiority of the designed model free fpid control algorithm this section describes the tracking results of the designed fpid controller versus the classic pid controller in the presence of time varying environmental disturbances as described in eq 10 do and pan 2009 10 œÑ e u 0 1 m x u d t œÑ e v 0 1 m y v d t œÑ e r 0 1 i z n r d t with d t 1 0 1 sin 0 25 t in the simulation the hydrodynamic coefficients and environmental disturbances are unknown for the designed controller in advance first the low speed heading tracking control with k p 0 5 k i 0 3 5 k d 0 17 k 1 3 k 2 30 k 3 1 5 t r i m f 0 0 0175 0 035 is simulated where both the bow and stern horizontal thrusters work simultaneously fig 8 gives the transition of heading angles using two different controllers in this first step response from 0 to 30 s their performance is about the same by choosing proper control gains yet in terms of the rise time 3 59 s vs 5 36 s settling time 4 63 s vs 14 41 s and overshot 0 08 vs 0 41 in the subsequent twice step responses the designed fpid controller shows better adaptivity than the classic pid controller note that the initial error in the second step response is larger than the first one as shown in fig 9 the output of horizontal thrusters quickly change based on the fuzzy rules to reduce the tracking error or avoid the overshot at the entire stage as much as possible when using the designed fpid controller second the high speed heading keep control of the hurv exposed to time varying environmental disturbances is tested using control gains k p 0 10 k i 0 0 2 k d 0 34 k 1 25 k 2 30 k 3 46 where the hurv prototype depends on its stern vertical control surface driven by rudders the control results are shown in figs 10 and 11 respectively similarly the designed fpid controller can also reject unknown disturbances and perform better than the classic pid controller especially in the settling time 7 experimental verification as a result of the superiority of the designed fpid controller shown in the above section this section only describes the experimental test of the entire software architecture and control system of the hurv equipped with the fpid controller the experimental tests are carried out in the towing tank at the huazhong university of science and technology an official member of the international towing tank conference ittc the tank has a length width and height of 175 m 6 m and 4 m respectively the entire system undergoes the tank test for two months and for approximately 4 h per day and the success rate is 98 8 fig 12 shows the vehicle in the tank and the human machine interface of the surface monitoring station the tank experiment takes the basic heading control test as an example to verify the performance of the entire software architecture and control system 7 1 test of multi task processing and implementation when the low level controller works the communication task is suspended six perception tasks synchronously acquire the real time position attitude and state data based on each time slot and then six binary synchronous semaphores are released once the suspended communication task obtains all six released semaphores it will be activated and communicate with the surface monitoring station for data exchange then the motion control task can be launched by the command coming from the data frame of the communication task actually a task has its execution time and might suffer from input output delays sampling jitter etc but in the designed software architecture the task has timing requirement in the entire control loop which is similar to bate et al 2003 in the experiment the period of the task is 0 5 s which is guaranteed by the vxworks auxiliary clock technique in this period only if all the perception task communication task motion control task and fault treatment task are executed can the time stamped data be logged periodically in the virtual console of the onboard pc 104 correspondingly if the entire software processing is dysfunctional the time stamped data cannot be logged every 0 5 s hence by checking the data it can be concluded that the entire software architecture and multi task processing design meets the requirements of the onboard motion control system as shown in fig 13 the time stamped data are logged every 0 5 s exactly in the virtual console of the onboard pc 104 which means that the two layer software architecture and the multi task processing work well hence in the designed two layer software architecture the multi task processing based on the round robin scheduling of each time slot and the synchronous mechanism based on the binary semaphores meet the requirements of information perception network communication and motion control 7 2 heading control test under the software architecture the test of heading control under the software architecture is also performed in the towing tank the following are twice results of multiple heading control tests first the experimental results of the heading keeping at cruising speed by using a pair of vertical rudders are shown in figs 14 and 15 respectively in this case the rotational speed of the main propeller is 400 rpm which corresponds to a surge speed of approximately 2 knots fig 14 presents the transitions of the rudder angle and the heading error during the tracking period the average tracking error is 0 42 moreover the rate of the rudder angle is within range as shown in fig 15 the heading tracking test at low speed is performed the initial value of the desired heading angle is 91 71 then it turns to 94 71 at 30 s finally it remains 97 71 from 56 to 80 s from fig 16 it can be seen that the actual heading angle can track the time varying desired value and the average error during the entire tracking period is 0 06 the corresponding input voltages are depicted in fig 17 where they are within 2 5 2 5 v 8 conclusions this paper introduces a two layer software architecture of the hurv which is composed of a monitoring layer and a task layer the former corresponds to a surface monitoring station based on the client server scada system and the latter is an onboard system with a set of embedded pc 104 computers this paper describes the multi task processing of the task layer including four kinds of tasks the perception task communication task motion control task and fault treatment task furthermore a model free fpid controller is applied to the heading control motion task in consideration of the simplified implementation on the pc 104 computer numerical simulation results show the designed fpid controller performs better than the classic pid controller in different step responses especially in the rise time settling time and overshot finally the tank experiment tests illustrate the order of the multi task processing in the software architecture as well as the robustness of the heading control system for the hurv under the two layer software architecture further work will focus on testing the robustness of the designed fpid controller in open water as well as designing an improved controller for the intermediate transition interval connecting low speed and high speed intervals acknowledgments this work was supported in part by the national natural science foundation of china under grant 51579111 and grant 51209100 in part by the shenzhen science and technology plan project china under grant jcyj201704i311305468 in part by the fundamental research funds for the central universities china under grant 2017kfyxjj005 in part by the state key lab research fund of ocean engineering china under grant 201504 in part by the international exchanges of the uk royal society china under grant ie161588 and in part by the shanghai sailing program china under grant 19yf1424100 
22590,in this paper a hybrid underwater robotic vehicle hurv which combines the advantages of autonomous underwater vehicle and remotely operated vehicle is introduced the vehicle system consists of an onboard system with a set of embedded pc 104 computers and a surface monitoring station based on the client server supervisory control and data acquisition scada system correspondingly a two layer software architecture composed of a monitoring layer and a task layer is presented and they are inserted into the surface and onboard systems respectively the task layer includes four kinds of tasks perception task communication task motion control task and fault treatment task subsequently the design and implementation for multiple tasks running in the task layer are described in detail furthermore under the above software architecture a model free fuzzy proportional integral derivative fpid controller is applied to heading control task at different speed profiles in consideration of the simplified implementation on the pc 104 computer numerical simulation results quantitatively illustrate the designed fpid controller performs better than the classic pid controller especially in the rise time settling time and overshot finally tank experiments are performed to test the performance of the entire onboard system of the developed hurv with the integrated software architecture and fpid control algorithm keywords hybrid underwater robotic vehicle multi task vxworks fuzzy logic heading control 1 introduction the ocean covers over two thirds of the earth s surface although this vast and profound area is rich in biological organisms chemicals mineral deposits natural gas and petroleum resources the marine environment is quite complex and harsh therefore human beings are not capable of submerging to deep sea depths or staying underwater for long periods of time applications of various high tech means are required for instance underwater robotic technology williams et al 2012 zhang et al 2015 2018 to understand marine environment study marine science and explore and exploit marine resources jarry 1986 pazmi√±o et al 2011 by employing an observation device carried by underwater vehicles human beings can complete rapid environmental assessment hagen et al 2008 sample and observe underwater resources perform subsea mapping inspect underwater cable yu et al 2018a and explore underwater oil and natural gas deposits lane et al 1997 therefore many countries with strong ocean engineering capabilities are focusing much attention on the development of underwater vehicles roberts and sutton 2006 according to the operation mode two main types of unmanned underwater vehicles remotely operated vehicle rov and autonomous underwater vehicle auv are designed to replace human beings for deep sea activities in the commercial and scientific fields antonelli 2014 the rov is physically linked via an umbilical cable to an operator that can be either on an underwater workstation or on a supporting ship with the umbilical cable remote operators can use a rov to accomplish intervention tasks easily therefore rovs are widely used by the offshore oil and gas industry relying on the onboard power supply and intelligent control units auvs are designed to be used with no umbilical cable and are completely autonomous examples of auvs include the bluefin 21 which was used for black box search of the malaysia airlines crashed plane developed by bluefin corporation dhanak et al 2013 and remus which was originally used as a remote environmental measuring unit developed by woods hole oceanographic institution stokey et al 2001 combining the advantages of rov and auv a new type of hybrid underwater robotic vehicle hurv is designed for deep sea exploration and intervention such as nereus bowen et al 2008 urov7k nakajoh et al 2007 and sauvim marani et al 2009 this new underwater explorer fills the gap between the commercial market and oceanographic research the hurv can operate as an auv for broad area underwater mapping surveys and then can convert into the light fiber optic tethered rov mode to do close up underwater sampling intervention of a target area of interest in fig 1 the operational procedure of the hurv is shown more precisely 1 the mother ship supporting the hurv sails for the target area and then the hurv and its launcher are deployed into the water together 2 the hurv is released from the launcher and moves just like an auv in the autonomous control mode exploring the large scale sea floor with sonars and cameras in order to locate the target of interest and 3 the hurv works in the rov mode enabling high quality tele operation by a human pilot such that fine underwater target manipulation intervention is achieved via visual guidance and force tactile feedback in this paper the design implementation and experimental results of a hurv which was recently developed by the lab of autonomous robotic marine system arms are presented how to design a two layer software architecture and a practical heading control system for the developed hurv are the main concerns one of the key technologies employed in the hurv developed by arms is the software architecture in valavanis et al 1997 the proposed control system is based on a two level control architecture comprised of a supervisory control level and a functional control level the supervisory control component is responsible for the coordination of the overall auv navigation guidance and control the functional level modules directly control actuators sensors and all hardware components residing directly on the vehicle in han et al 2013 the control architecture of the auv is implemented by a hybrid architecture with two layers a hierarchical planning layer and a reactive execution layer most of its tasks are interpreted as a set of waypoints and then actions are specified at the points in palomeras et al 2012 the component oriented layer based architecture for autonomy cola2 of the vehicle implements the component oriented layer based control architecture structured in three layers a reactive layer an execution layer and a mission layer reinforcement learning techniques have been programmed in the reactive layer to improve the vehicle primitives adaptability to unknown time varying environments the execution layer implements a discrete event system based on petri nets the entire software structure of the sauvim is divided into two parts for mc68060 cpu boards kim and yuh 2004 one is the application layer and the other is the device layer the shared memory via the vme bus is used to guarantee real time communication between these two cpus the other key technology is the control design when the hurv works in the auv mode the classic motion forms can be divided into the heading control and depth control or dynamic positioning path following and trajectory tracking chu et al 2018 bhopale et al 2016 neto et al 2015 li et al 2018 qiao et al 2017 in the last twenty years various motion controllers have been designed such as pid control backstepping control sliding mode control smc neural network control fuzzy control and so on wang et al 2017 liu et al 2016 for instance a virtual target moving along the path is introduced as an additional degree of freedom to eliminate the singularity of the horizontal plane path following lapierre and soetanto 2007 in fossen et al 2015 a nonlinear algorithm combining a pid controller with an adaptive line of sight los guidance is presented for the dubins path following it is well known that smc is considered a robust approach to control a nonlinear system with internal and external uncertainties therefore the smc technique has been widely used to address the tracking control problem of robotic vehicles with uncertain parameters liang et al 2016 sun et al 2016 cui et al 2017 xiang et al 2017a the conventional fuzzy logic control due to its simple control structure and easy and cost effective design has been successfully employed in control applications in robotic fields wang et al 2018 peng et al 2018 for instance a single input fuzzy logic controller is applied to the variable depth control of an underwater vehicle ishaque et al 2010 in kim et al 2012 the sufficient conditions for the robust stabilization based on the exact discrete time fuzzy model of uncertain nonlinear systems are derived and their application to the depth control of auv is tested the adaptive fuzzy technique based on the universal approximation has also played an important role in the control field of robotic vehicles the readers can refer to tee and ge 2006 the neural network control has a similar capability and has been adopted in dynamic positioning gao et al 2016 distributed maneuvering peng et al 2017 trajectory tracking chu et al 2016 wang et al 2015 and path planning zhu et al 2018 it is very important that a controller can be easily implemented in an actual onboard system of robotic vehicles therefore a reliable and practical controller is preferred by engineers in developing a marine robotic vehicle in this paper the software architecture of the hurv is divided into a monitoring layer and a task layer the monitoring layer is built on the client server supervisory control and data acquisition scada system running between the surface platform and embedded computers the real time operating system vxworks is chosen for the underwater embedded controller such that the multi task processing is achieved based on the round robin binary mutual exclusion semaphores and shared memory based on the above software architecture the hurv makes full use of the onboard controller and high accuracy sensors to complete complex underwater missions then a practical fuzzy proportional integral derivative fpid controller without using any hydrodynamic coefficients is chosen for the automatic heading control where the cruising speed tracking by using a pair of vertical rudders and the low speed tracking by using two horizontal thrusters are considered separately subsequently numerical simulation results are provided to show the superiority of the designed fpid controller performs than the classic pid controller especially in the rise time settling time and overshot finally the motion experiment results of this developed hurv illustrate that the two layer system has satisfactory multi task processing performance and under the corresponding two layer software architecture the fuzzy based heading controller has robust performance against unknown hydrodynamic coefficients and external disturbances in the presence of actuator saturation 2 prototype overview this section describes the hurv prototype developed at the arms lab which aims to perform environmental survey and monitoring tasks in medium range shallow water zuo et al 2015 fig 2 shows a digital model of the torpedo shaped hurv which weighs approximately 380 kg in air and is designed to have a cruising speed of 2 knots the hurv consists of the bow middle and stern sections two auxiliary tunnel thrusters and some observation devices are placed in the bow section the middle is a cylindrical pressure hull where the battery control board observation and navigation sensors fosn ahrs and mb300 are placed and the stern is equipped with two pair of rudders two auxiliary thrusters and a main propeller details of the actuation system can refer to xiang et al 2017b remark 1 the auxiliary thrusters are used at low speed because their efficiency will decrease in lateral directions at cruising speed forward movement due to the relative perpendicular water flow passing the outlets in contrast the rudder surface can only perform efficiently at cruising speed philips et al 2013 tanakitkorn et al 2017 in addition the hurv has a surface monitoring station which can receive display and store data and send the motion control command to the vehicle the surface monitoring station is designed based on a scada system the mode for control devices in the scada system is the client server mode the communication between client and server transfers over multiple protocols tipsuwanporn et al 2013 goldenberg and wool 2013 fig 3 shows the surface monitoring platform which includes two display screens and a control panel 3 software architecture the software system of the hurv is based on a two layer software framework comprised of a monitoring layer and a task layer as shown in fig 4 which guarantees wide band low loss long distance and high speed information communication between the surface monitoring station and the hybrid vehicle via a fine fiber 3 1 monitoring layer based on the scada system the monitoring layer in the surface monitoring station provides the human machine interface and the station vehicle interface the human machine interface has two functions one is to receive the motion command from the control panel and the other is to display the state information of the vehicle the station vehicle interface sends the motion command to the vehicle and receives the necessary monitoring information from the vehicle through the monitoring layer the surface monitoring station can initiate basic motion control such as individual or combined control among the main propeller two thrusters for vertical motion and two thrusters for lateral motion a pair of horizontal rudders and a pair of vertical rudders it also orders autonomous control commands for automatic heading depth control emergency braking and emergency surfacing all the commands and information can be stored in the online database 3 2 task layer once the hybrid underwater vehicle receives a control command from the surface monitoring platform it will initiate the specific task and insert this task into the entire multi task operation the low level control system initiates eleven tasks covering the functional task sets shown in fig 4 including three sensor information processing tasks three status information processing tasks three motion control tasks a network communication task and a fault treatment task the definition of each task is given in table 1 where the onboard system processes each task based on the corresponding sensor frequency in order to avoid potential blocking note that smooth navigation information can be obtained by filtering high frequency attitude data using recursive average filtering algorithm in terms of the functional requirements of the monitoring layer and multiple tasks of the task layer the designed system has the following characteristics it works on a large volume of data and is multi tasked and multi threaded in addition to the capable hardware platform and the reasonable software framework it is far more important to orderly process multiple tasks in low level controller to meet the running requirements of the entire motion control system which is the focus of the following section 4 multi task processing the underwater control system is built on an embedded computer pc 104 with the real time operating system vxworks this type of embedded hardware and operating system configuration is quite competent however to further improve the system performance a method that only depends on improving the performance and frequency of the processor of the embedded system is suboptimal it is necessary to optimize the software design of the embedded system and propose reasonable task scheduling algorithms this section presents the multi task processing in the low level controller and describes concretely the processing and implementation of the underwater control system for the perception task communication task motion control task and fault treatment task 4 1 global taskspawn the low level control system of the hurv makes full use of the shared memory mutex semaphore and synchronization exclusion mechanism in the real time operating system vxworks to achieve reasonable processing among multiple concurrent tasks and multiple concurrent threads the multi task flow of the low level controller is shown in fig 5 where the black line represents the task flow the blue dotted line denotes the control flow and the purple dotted line denotes the information flow the entire underwater system contains the perception communication motion control and fault treatment tasks once the entire system is launched the perception tasks from task 2 to task 7 begin round robin scheduling to process sensor data at each time slot if any task is unable to receive the new data it will initiate the fault treatment task task11 to complete fault decision making and fault treatment otherwise it will release the synchronization semaphore once the network communication task task 1 obtains all the above semaphores task 1 will begin to run meanwhile the low level control system establishes communication with the surface monitoring station the low level control system carries out the modbus request to the surface monitoring system and makes sure that the motion control tasks from task 8 to task10 are initiated based on the modbus reply from the surface monitoring system if the communication drops it will initiate task11 to perform fault decision making and fault treatment table 2 shows the global taskspawn among four sub tasks in the form of logic codes 4 2 perception task processing the basic round robin algorithm of the perception task is shown in table 3 the perception task contains the battery information leakage detection information main propeller state depth information and position and attitude information treatment sub tasks the specific definition of each task is shown in table 1 the six sub tasks are created and launched with the same priority of 120 and then they are under round robin algorithm to acquire the real time position attitude and state data of the vehicle based on each time slot the above processing actually belongs to a fixed priority scheduling where all tasks are periodic and fully preemptible sha et al 2004 these data build a global shared database if any task is able to obtain updated data in a period it will use semgive to release a binary synchronous semaphore created by sembcreat as follows semst i sembcreat sem q priority sem empty with i 2 3 7 and semgive semst i if the task is still unable to obtain updated data in two periods of time it is determined that the corresponding device related to the task has a fault under this situation this task is unable to release a binary synchronous semaphore hence it will immediately report the sensor fault information to the fault decision making and treatment system 4 3 communication task processing the implementation of the communication task is shown in table 4 after all the perception tasks acquire the real time position attitude and status data successfully they will release six binary synchronous semaphores the communication task has been waiting for once the semaphores are received the underwater control system will send modbus tcp requests to the surface monitoring system based on the modbus data model with separate blocks in the settled communication frequency the operator can monitor the real time position attitude and state information of the hurv the discrete output consisting of the real time alarm information and the analog output composed of the real time position attitude and equipment information change over time note that each modbus tcp request has its own response if it is unable to obtain the response information the return value of the communication read function will be abnormal based on the return value the system can determine whether the communication has a fault once the communication failure occurs it will transfer the communication fault information to the fault decision making and treatment system 4 4 motion control task processing the implementation for the motion control task based on the mutual exclusion mechanism is shown in table 5 the motion control task is initiated upon receiving the modbus tcp response message because the response information of the modbus tcp discrete input contains seven types of basic motion instructions and two types of emergency operation instructions the response message of the modbus tcp analog input contains the speed depth and heading commands entered by the human operator the response mechanism of the modbus tcp discrete output and analog output guarantees the reliability of the communication between the surface monitoring system and the underwater vehicle the automatic depth and heading setting of the motion control tasks can run individually or in combination once these two tasks run together they will begin round robin scheduling for each time slot there is a mutex mechanism based on the mutex semaphore semdz j semmcreat sem q fifo j 1 2 between seven individual motion commands and two automatic control commands note that the initial value of the mutex semaphore is sem full once the basic individual motion control automatic motion control calls semtake to access the mutex semaphore the mutex semaphore will not be available then the individual motion control or automatic motion control uses the critical resources for motion control and data processing only when the individual motion control automatic motion control calls semgive to give up its right of use can the automatic control motion basic individual motion access the mutex semaphore which means that the automatic control motion and the basic individual motion cannot run at the same time 4 5 fault treatment task processing the fault treatment task of the hurv is performed by defining the highest priority 100 to ensure that the fault state information is available to the fault analysis decision making and treatment system promptly once a fault is detected from the shared data the fault treatment system makes the emergency decision and sends it to the emergency controller the controller drives relevant devices to complete the necessary treatment which ensures the safety of the underwater vehicle remark 2 the design and test of the fault treatment system have been described in xiang et al 2017b in this paper we focus on the design and experiment test of the entire onboard control system for the developed hurv with the integrated software architecture and control algorithm to validate the performance of multi task processing as well as the control performance under the two layer software architecture 5 fuzzy based heading control the basic automatic control for an underwater vehicle includes the heading control and depth control in this section we discuss the design of the heading controller as an example the depth controller is similar to the former and is omitted the hurv has a highly nonlinear dynamics model and this model is often uncertain due to unknown hydrodynamics coefficients and external environmental disturbances fossen et al 2015 in addition the onboard controller should be easily implemented considering the potential degradation of the classical pid controller in different step responses and disturbances a model free fpid controller is designed for the heading control of our hurv 5 1 heading dynamics usually the yaw dynamics model along the z axis can be described as follows 1 œà r r f r œÑ r i z n r where œà is the heading angle and r is the yaw speed i z is the moment of inertia of the hurv about the z axis and n r is the hydrodynamics coefficients f r includes the hydrodynamics coefficients environmental disturbances and fiber tractive force in addition œÑ r is the control input generated by the actuation system remark 3 according to resolution msc 137 76 approved by international maritime organization imo the thrust performance of the onboard actuators throughout its entire surge speed profile is evaluated but is omitted due to the limitation of length it can be concluded that horizontal thrusters should work in the speed interval of 0 0 679 m s and vertical rudders work in the speed interval of 0 998 3 084 m s 5 2 heading control at cruising speed rudder as shown in fig 6 the cruising speed heading control framework includes a command filter a fpid controller rudder actuator hurv body and inertial measurement unit imu let œà d denote the desired heading in this paper we introduce a command filter to generate an intermediate variable œà r e f as the heading reference signal 2 Œ¥ œà k œà d k œà r e f k t f œà r e f k œà r e f k 1 Œ¥ œà k d t where k is the sampling index t f is the time delay and d t is the control period remark 4 t f denotes the time of the reference heading tracking the desired heading obviously choosing a large t f leads to slow tracking performance note that the initial value of œà r e f k is the same as the initial heading angle of the hurv then define the virtual heading tracking error 3 e œà k œà k œà r e f k as mentioned above the heading control at cruising speed will use the vertical rudder therefore the absolute rudder command without any constraint can be designed in the discrete form as follows visioli 2001 4 Œ¥ r 1 k k p e œà k k i i 0 k e œà i k d e œà k e œà k 1 d t where k p k i and k d are the proportional integral and derivative gains of the pid controller in fact we decompose the integral part in 2 installments i 0 k e œà i i 0 k 1 e œà i e œà k in the programming of onboard system therefore only the last value needs to be stored for each step to obtain better control performance for a nonlinear hurv with model uncertainties in different initial states control gains should be adjusted on line the fuzzy logic method is a practical method with easy implementation the following are the adopted fuzzy rules r1 if œÅ e œà k e œà k e œà k 1 d t 0 that means the heading angle is far from the reference value then k p k k p 0 k 1 f œÅ k d k k p 0 k 2 f œÅ and k i k 0 with f œÅ being the output of the fuzzy system in the range of 0 1 r2 if œÅ 0 that means the current heading is converging to the reference value then k p k k p k 1 and k d k k d k 1 r3 if e œà k e min then k i k k i 0 k 3 f e œà k where e min is determined by the experiment result in addition triangular membership function trimf and zero order takagi sugeno kang method are used in the fuzzy implementation note that it will be equal to the limit if the fuzzy input is outside the universe of discourse which will guarantee a membership degree equal to 1 if the fuzzy input assumes a value outside the universe of discourse note that inherent saturation exists for the vertical rudder surface driven by a stepping motor on the one hand the increment of the rudder angle is bound at each time slot due to time delay zhang et al 1998 yu et al 2019 hence we revise the control law as follows 5 Œ¥ r 2 k Œ¥ r 1 k Œ¥ r 1 k Œ¥ r 1 k 1 Œ¥ e m Œ¥ r 1 k 1 Œ¥ e m Œ¥ r 1 k Œ¥ r 1 k 1 Œ¥ e m where Œ¥ e m is the maximum steering rate of the rudder on the other hand the absolute rudder angle should be restricted due to the layout constraint kim 2015 zheng and feroskhan 2017 yu et al 2018b in this sense the final rudder comment is 6 Œ¥ r k Œ¥ r 2 k Œ¥ r 2 k Œ¥ max s g n Œ¥ r 2 k Œ¥ max Œ¥ r 2 k Œ¥ max where Œ¥ max is the maximum rudder angle to be permitted and s g n is the sign function 5 3 heading control at low speed thruster as shown in fig 7 the low speed heading control framework includes a command filter a fpid controller two thrusters hurv body and an imu similar to the cruising speed heading control using the vertical rudder the heading control at low speed can be designed in the discrete form as follows 7 u b 1 k k p e œà k k i i 0 k e œà i k d e œà k e œà k 1 d t where u b 1 k denotes the control voltage of the bow horizontal thruster as shown in fig 1 the bow and stern horizontal thrusters are installed in the opposite direction so that no sway force is generated the control voltage u s 1 of the stern horizontal thruster in the low speed heading control can be designed as follows 8 u s 1 k u b 1 k as the thruster propeller is driven by the brushless dc motor we only consider the absolute input saturation the final control voltages are as follows 9 u k u 1 k u 1 k u max s g n u 1 k u max u 1 k u max where u max is the maximum input voltage that is usually given on the datasheet of thrusters 6 numerical simulation to embody the rationality and superiority of the designed model free fpid control algorithm this section describes the tracking results of the designed fpid controller versus the classic pid controller in the presence of time varying environmental disturbances as described in eq 10 do and pan 2009 10 œÑ e u 0 1 m x u d t œÑ e v 0 1 m y v d t œÑ e r 0 1 i z n r d t with d t 1 0 1 sin 0 25 t in the simulation the hydrodynamic coefficients and environmental disturbances are unknown for the designed controller in advance first the low speed heading tracking control with k p 0 5 k i 0 3 5 k d 0 17 k 1 3 k 2 30 k 3 1 5 t r i m f 0 0 0175 0 035 is simulated where both the bow and stern horizontal thrusters work simultaneously fig 8 gives the transition of heading angles using two different controllers in this first step response from 0 to 30 s their performance is about the same by choosing proper control gains yet in terms of the rise time 3 59 s vs 5 36 s settling time 4 63 s vs 14 41 s and overshot 0 08 vs 0 41 in the subsequent twice step responses the designed fpid controller shows better adaptivity than the classic pid controller note that the initial error in the second step response is larger than the first one as shown in fig 9 the output of horizontal thrusters quickly change based on the fuzzy rules to reduce the tracking error or avoid the overshot at the entire stage as much as possible when using the designed fpid controller second the high speed heading keep control of the hurv exposed to time varying environmental disturbances is tested using control gains k p 0 10 k i 0 0 2 k d 0 34 k 1 25 k 2 30 k 3 46 where the hurv prototype depends on its stern vertical control surface driven by rudders the control results are shown in figs 10 and 11 respectively similarly the designed fpid controller can also reject unknown disturbances and perform better than the classic pid controller especially in the settling time 7 experimental verification as a result of the superiority of the designed fpid controller shown in the above section this section only describes the experimental test of the entire software architecture and control system of the hurv equipped with the fpid controller the experimental tests are carried out in the towing tank at the huazhong university of science and technology an official member of the international towing tank conference ittc the tank has a length width and height of 175 m 6 m and 4 m respectively the entire system undergoes the tank test for two months and for approximately 4 h per day and the success rate is 98 8 fig 12 shows the vehicle in the tank and the human machine interface of the surface monitoring station the tank experiment takes the basic heading control test as an example to verify the performance of the entire software architecture and control system 7 1 test of multi task processing and implementation when the low level controller works the communication task is suspended six perception tasks synchronously acquire the real time position attitude and state data based on each time slot and then six binary synchronous semaphores are released once the suspended communication task obtains all six released semaphores it will be activated and communicate with the surface monitoring station for data exchange then the motion control task can be launched by the command coming from the data frame of the communication task actually a task has its execution time and might suffer from input output delays sampling jitter etc but in the designed software architecture the task has timing requirement in the entire control loop which is similar to bate et al 2003 in the experiment the period of the task is 0 5 s which is guaranteed by the vxworks auxiliary clock technique in this period only if all the perception task communication task motion control task and fault treatment task are executed can the time stamped data be logged periodically in the virtual console of the onboard pc 104 correspondingly if the entire software processing is dysfunctional the time stamped data cannot be logged every 0 5 s hence by checking the data it can be concluded that the entire software architecture and multi task processing design meets the requirements of the onboard motion control system as shown in fig 13 the time stamped data are logged every 0 5 s exactly in the virtual console of the onboard pc 104 which means that the two layer software architecture and the multi task processing work well hence in the designed two layer software architecture the multi task processing based on the round robin scheduling of each time slot and the synchronous mechanism based on the binary semaphores meet the requirements of information perception network communication and motion control 7 2 heading control test under the software architecture the test of heading control under the software architecture is also performed in the towing tank the following are twice results of multiple heading control tests first the experimental results of the heading keeping at cruising speed by using a pair of vertical rudders are shown in figs 14 and 15 respectively in this case the rotational speed of the main propeller is 400 rpm which corresponds to a surge speed of approximately 2 knots fig 14 presents the transitions of the rudder angle and the heading error during the tracking period the average tracking error is 0 42 moreover the rate of the rudder angle is within range as shown in fig 15 the heading tracking test at low speed is performed the initial value of the desired heading angle is 91 71 then it turns to 94 71 at 30 s finally it remains 97 71 from 56 to 80 s from fig 16 it can be seen that the actual heading angle can track the time varying desired value and the average error during the entire tracking period is 0 06 the corresponding input voltages are depicted in fig 17 where they are within 2 5 2 5 v 8 conclusions this paper introduces a two layer software architecture of the hurv which is composed of a monitoring layer and a task layer the former corresponds to a surface monitoring station based on the client server scada system and the latter is an onboard system with a set of embedded pc 104 computers this paper describes the multi task processing of the task layer including four kinds of tasks the perception task communication task motion control task and fault treatment task furthermore a model free fpid controller is applied to the heading control motion task in consideration of the simplified implementation on the pc 104 computer numerical simulation results show the designed fpid controller performs better than the classic pid controller in different step responses especially in the rise time settling time and overshot finally the tank experiment tests illustrate the order of the multi task processing in the software architecture as well as the robustness of the heading control system for the hurv under the two layer software architecture further work will focus on testing the robustness of the designed fpid controller in open water as well as designing an improved controller for the intermediate transition interval connecting low speed and high speed intervals acknowledgments this work was supported in part by the national natural science foundation of china under grant 51579111 and grant 51209100 in part by the shenzhen science and technology plan project china under grant jcyj201704i311305468 in part by the fundamental research funds for the central universities china under grant 2017kfyxjj005 in part by the state key lab research fund of ocean engineering china under grant 201504 in part by the international exchanges of the uk royal society china under grant ie161588 and in part by the shanghai sailing program china under grant 19yf1424100 
22591,the excessive acceleration is one of five stability failure modes for intact stability being discussed at imo the trial calculation for direct stability assessment dsa and the model test have been carried out to verify two prediction methods of ship motions in the short crested irregular waves for dsa the ship motions in the short crested irregular waves calculated by the linear superposition of frequency responses and the time domain simulation agree well with the results of the model test using experimentally validated prediction method and wave scatter table of north atlantic the long term probabilities have been calculated and the results obtained by two prediction methods become closer to each other dsa evaluated by using the long term failure probabilities obtained by two prediction methods are same keywords direct stability assessment excessive acceleration short crested irregular waves linear superposition of frequency responses time domain simulation 1 introduction the excessive acceleration failure mode is one of five stability failure modes for the second generation intact stability criteria being discussed at imo this is the critical standard of lateral acceleration acting on the place where passengers or crew may be present at the highest position in the residential area or at the bridge deck this criterion is classified into 3 categories vulnerability criteria consisting of level 1 and level 2 are simplified criteria and level 3 is direct stability assessment dsa the simplified criteria are highly safety and simplified calculation method on the other hand dsa requires more accurate numerical simulations and model tests in irregular waves and ensure safety level corresponding to the average stability failure probability per ship per year using long term failure probability sdc 4 wp 4 annex 1 2017 in this study the trial calculation of dsa for the excessive acceleration failure mode and the model test have been carried out to verify two prediction methods of ship motion in short crested irregular waves for dsa the sample ship is a container ship designed on the basis of cmv chicago express which underwent an accident due to the excessive acceleration the model test has been carried out to make a quantitative verification of two prediction methods for dsa the ship motions in short crested irregular waves have been calculated by both the linear superposition of frequency responses and the developed time domain simulation the calculated results have been compared with the experimental results to validate the availability of two different prediction methods used for dsa using experimentally validated prediction methods and wave scatter table of north atlantic dsa has been evaluated by using the long term failure probability the calculated long term failure probabilities obtained by both the linear superposition of frequency response and the time domain simulation consistency between dsa and the vulnerability criterion of level 2 has been confirmed 2 sample ship a sample ship was designed to reproduce an accident ship referring to the body plan shown in the investigation report federal bureau of maritime casualty investigation 2009 of the container ship cmv chicago express cmv chicago express underwent fatal accident due to excessive lateral acceleration during typhoon hagupit on 24 september 2008 off the coast of hong kong the accident highlighted the danger of lateral acceleration on ships with large gm the general arrangement of the sample ship is shown in fig 1 and the principal particulars of the sample ship are shown in table 1 its displacement is within 1 difference compared with that in the investigation report bilge keels are set referring to slf 54 inf 7 2011 the height of the position of assessing excessive acceleration is the bridge deck and the longitudinal position is the front of the bridge location of the bridge deck is estimated by both another container ship of the same length and photograph of cmv chicago express 3 model test 3 1 outline of model test for validating the prediction method of ship motions in short crested irregular waves the model tests for the sample ship were carried out in actual sea model basin of national maritime research institute in japan the model test was done based on the ittc recommended procedure 7 5 02 07 04 2008 for intact stability model tests the design situation of dsa for excessive acceleration failure mode is assumed where waves are irregular beam waves and ship speed is zero this situation is set to vulnerability criterion of excessive acceleration failure mode to confirm consistency between level 2 of vulnerability criteria and dsa the model ship has a length overall of 3 5 m and a scale of 1 96 054 loading condition of the model ship was set up on the accident condition as shown in table 1 the dry pitch radius of gyration is 0 25l the lateral acceleration was measured by installing an acceleration sensor at the height of the bridge deck ship motions were free in six degrees of freedom and heave pitch and roll motions are free while surge sway and yaw motions having no restoring forces are guided slackly by a weak spring system in order to keep the mean position of the model ship in waves in order to verify the lateral acceleration in short crested irregular waves calculated by the linear superposition method with response amplitude operator obtained by frequency domain calculation and the time domain simulation regular beam waves long crested and short crested irregular waves were used in the model test the wave energy spectrum of long and short crested irregular waves is the ittc recommended unlimited fetch spectrum 15th ittc 1978 the distribution of wave directions is the fourth power of cosine function of which a principal direction is beam wave the wave conditions in the model test were selected from wave conditions for excessive acceleration failure mode defined in sdc 3 wp 5 annex 7 2016 the wave conditions are 17 cases of significant wave height h s and 16 cases of zero up crossing period t z using class midpoints of wave scatter table with appearance frequency in north atlantic iacs recommendation no 34 2001 the used significant wave heights h s are 5 5 m and 7 5 m in full scale which are large wave height of irregular waves that can be generated in the model basin and according to ittc recommended procedure 7 5 02 07 04 the mean wave period t 01 is transformed from zero up crossing period t z selected from defined wave conditions by using equation 1 1 t 01 1 0864 t z the waveform was expressed by the single summation method with unequal frequency increments and the initial phase and the direction were set by random numbers where the principal wave direction is beam the division number of wave frequencies is set to 150 considering total simulation time although the unequal frequency division of the spectrum cannot avoid the self repetition effect belenky 2004 2005 completely the self repetition effect does not influence the estimation of the exceedance probability which is described in section 4 3 one measurement time was 20 min which corresponds to approximate 3 h in full scale the measurement repeated seven times using random numbers a roll decay test without advance speed was carried out and the roll damping coefficients Œº and Œ≤ expressed by œÜ 2 Œº œÜ Œ≤ œÜ œÜ œâ n 2 œÜ 0 were obtained where œÜ and œâ n are instantaneous roll angle and roll natural frequency divided by the moment of inertia respectively Œº is 0 0123 1 s and Œ≤ is 0 5208 1 rad for the sample ship in model scale roll natural period is 1 112 s which corresponds to 10 89 s in full scale 3 2 analysis of short crested irregular waves in model test wave energy spectrum and directional distribution of wave energy used for the model test are in advance analyzed from the analysis results the spectrum and its temporal variation of wave field generated in the basin are verified the wave elevation to be analyzed is measured by the wave gauge array as shown in fig 2 the wave condition is the significant wave height of 5 73 cm the mean wave period of 1 05 s and the principal wave direction of 90 deg the full scale of this condition is the significant wave height of 5 5m the zero up crossing wave period of 9 5 s the wave energy spectrum is estimated by fast fourier transform fft and the directional distribution of wave energy is estimated by extended maximum entropy principle emep method hashimoto et al 1994 the estimated wave energy spectrum and the directional distribution of wave energy are shown in figs 3 and 4 respectively the directional distribution of wave energy is obtained by integrating the directional spectrum with respect to frequency the estimated directional distribution of wave energy is slightly different from the target values the causes of difference include the uncertainty of emep estimation error in the arrangement of the wave gauges influence of the reflected waves and the statistical variation the target wave energy spectrum and directional distribution of wave energy are used for the numerical simulation because the spectrum estimation itself also includes uncertainty mentioned above in order to investigate temporal variation of the wave field the directional spectra are estimated using the time series data divided every 5 min the temporal variation of the zeroth moment of the directional spectrum m 00 and the mean wave direction Œ∏ m are shown in figs 5 and 6 respectively each figure shows that neither m 00 nor Œ∏ m has significant temporal variation the results indicate that the wave spectrum of the model test is in agreement with the target one and there is also no temporal variation in the directional spectrum 4 direct stability assessment using response amplitude operator dsa is evaluated the average stability failure probability per ship per year which is calculated as a weighted average of long term probability for relevant sea conditions and wave scatter table the short term probabilities that lateral acceleration exceeds the threshold of 9 81 m s2 for relevant sea conditions are obtained by using two prediction methods that predict the ship motions in the short crested irregular waves in this study in this section dsa using response amplitude operator rao is described 4 1 prediction method by using rao the used prediction method is the linear superposition method using rao obtained by frequency domain calculation the calculation tool in frequency domain is salvesen tuck faltinsen stf method salvesen et al 1970 based on strip theory the ship condition is 5 degrees of freedom with zero forward speed hydrodynamic force is calculated by using the 2 dimensional source distribution method roll damping coefficient was obtained by the roll decay model test roll damping is estimated using equivalent linearization himeno 1981 using rao of lateral acceleration and wave spectrum the variance of lateral acceleration in long crested irregular waves is obtained further the variance of lateral acceleration in short crested irregular waves is obtained using linear superposition of variance in long crested irregular waves thus the short term probability can be calculated 4 2 predicted and experimental results in regular and irregular waves examples of comparisons of roll amplitude and lateral acceleration in regular beam waves between numerical and experimental results are shown in figs 7 and 8 respectively roll amplitude is shown dimensionless by wave number k and wave amplitude Œ∂ w since roll motion and lateral acceleration were symmetrical in the model tests the measurement data were analyzed by fourier series using encounter frequency the numerical results agree well with the experimental results the mean of one third greatest amplitudes of lateral acceleration in long and short crested irregular beam waves are compared between numerical and experimental results as shown in fig 9 the statistic values of roll and lateral acceleration in irregular waves are defined here as the half value of double amplitude statistics because there is no difference between the statistic values of maxima and minima the wave conditions of h s and t z are 5 5 m and 9 5 s respectively 7 model test trials were carried out in short crested irregular waves the experimental result in short crested irregular waves is shown with 95 confidence interval of 7 trials each test trial continued for 3 h in full scale with the initial phase and direction of each wave components changed by using random numbers the numerical results for both long and short crested irregular waves agree with those of model experiments the results indicate that this prediction method can be used for dsa for excessive acceleration moreover the numerical results in long and short crested beam waves are smaller than the result of level 2 vulnerability criterion referring to sdc 3 wp 5 annex 2 2016 thus this prediction method has consistency with level 2 vulnerability criterion 4 3 long term probability of stability failure for excessive acceleration when the magnitude of the crest to trough amplitudes of ship motion can be approximated by rayleigh distribution the short term probability c i of exceedance of a threshold r is given by equation 2 where œÉ 2 is variance the statistical values of measured lateral acceleration in short crested irregular waves are compared with relational formula assuming rayleigh distribution as shown in fig 10 assuming rayleigh distribution one third greatest amplitude h 1 3 one tenth greatest amplitude h 1 10 and standard deviation œÉ are expressed relational formula with mean of double amplitude h as shown in fig 10 the statistical values of the model test and relational formula assuming rayleigh distribution are in good agreement on the basis of the experimental results the short term probability that lateral acceleration exceeds threshold r can be obtained using standard deviation 2 c i e x p r 2 2 œÉ 2 fig 11 shows the comparison of two exceedance probabilities obtained by different methods using the time series data obtained in one measurement corresponding to approximate 3 h one is obtained by dividing the number n of amplitudes exceeding the threshold by the total peak number n and the other is obtained from the variance using equation 2 table 2 shows the exceedance number n and total peak number n for each threshold used in calculating the exceedance probabilities shown in fig 11 it can be confirmed that the exceedance probabilities obtained by exceedance number and variance value are in agreement however there is a difference when the threshold is large and the exceedance number n is small in order to obtain much more accurate exceedance probability by using the exceedance number n the exceedance number n for total peak number n should be more than a certain amount on the other hand the exceedance probabilities of wave height obtained by exceedance number and the variance are shown in fig 12 the exceedance probabilities of wave heights obtained by exceedance number are in good agreement with the rayleigh distribution therefore the difference of the exceedance probability of lateral acceleration with the rayleigh distribution is not due to the self repetition effect of the wave but it is considered due to a non linear effect of roll motion from these results the variance value assuming rayleigh distribution is used for dsa because it is more conservative to estimate exceedance probability of lateral acceleration by using variance values dsa for excessive acceleration failure mode is evaluated by using the linear superposition method using rao obtained by frequency domain calculation the lateral acceleration in short crested irregular beam waves was calculated for each sea condition of all sea states which have appearance frequency in wave scatter table of iacs no 34 the short term probability c i that lateral acceleration exceeds 9 81 m s2 per one oscillation can be obtained from the variance values of calculation results the long term probability c of failure per wave encounter is calculated using the short term probability c i that lateral acceleration exceeds 9 81 m s2 for each wave condition and the appearance frequency of each sea condition w i of iacs no 34 as shown in equation 3 referring to sdc 3 wp 5 annex 7 3 c i w i c i i w i the obtained long term failure probability c in short crested irregular waves for sample ship is 2 02 10 5 the result of level 2 vulnerability criterion which is assessed with the long term failure probability by equation 3 for the sample ship is 5 35 10 5 thus it is confirmed that dsa for excessive acceleration in the short crested irregular waves calculated by the linear superposition method using rao has consistency with level 2 vulnerability criterion dsa is evaluated as the average stability failure probability per ship per year s d s a which is calculated by equation 4 4 s d s a 1 1 c 365 24 3600 t where t is the mean encounter period since the situation of dsa in this study is assumed the most severe where ship speed is zero and the principal wave direction is beam the encounter period is considered to be the same as the wave period the mean wave period calculated from the weighted average of the zero up crossing wave period shown in iacs no 34 is 9 63 s that is close to the natural roll period of the sample ship s d s a using the liner superposition method using rao in frequency domain is 1 00 5 direct stability assessment using time domain simulation 5 1 time domain simulation method time domain simulation of ship motion without forward speed in short crested irregular waves has been carried out the ship motion is 6 degrees of freedom and fig 13 shows the coordinate system in the time domain simulation hydrodynamic force is calculated by the 3 dimensional panel method considering memory effect roll damping coefficient is obtained by the roll decay model test the motion equation in the time domain is derived from the velocity potential for impulse response as follows 5 j 6 m k j m k j Œ∑ j t k k j t œÑ Œ∑ j œÑ d œÑ f k j e k t k 1 6 where m k j k k j f k j and e k t are as follows 6 m k j added mass k k j memory effect function f k j restoring force due to hydrostatic pressure e k t external force wave exciting force and drift force the equation 5 is expressed by the general equation of ship motion as follows by arranging the inertia terms to the left hand side and the non inertia term to the right hand side respectively the terms of the right hand side of equation 7 indicate the summation of radiation force f k r diffraction force f k d froude krylov force f k f k and restoring force f k r e s t as shown in equation 8 7 j 1 6 m k j Œ∑ j f k t 8 f k t f k r t f k d t f k f k t f k r e s t t newmark Œ≤ method is used to solve the ship motions in the time domain if the displacement of j mode at a certain time is Œ∑ j n the displacement and velocity of the next step are expressed as follows 9 Œ∑ j n 1 Œ∑ j n Œ¥ t Œ∑ j n Œ¥ t 2 2 Œ∑ j n Œ≤ Œ¥ t 2 Œ∑ j n 1 Œ∑ j n Œ∑ j n 1 Œ∑ j n Œ¥t 2 Œ∑ j n 1 Œ∑ j n the solution at time t Œ¥ t can be derived from that at time t the equation 7 can be solved in the time domain by the convergent calculation for Œ∑ j n 1 using equation 9 1 4 is used for Œ≤ value as an unconditionally stable coefficient during the iterative calculation if the acceleration Œ∑ i n 1 satisfied the following condition the calculation proceeds to the next time step 10 Œ∑ j n 1 Œ∑ j n Œ∑ j n 1 1 100 the radiation force f k r t for each ship motion mode Œ∑ k considering the memory effect of the hydrodynamic force is obtained by the following equation 11 f k r t j 2 6 m k j Œ∑ j t k k j t œÑ Œ∑ j œÑ d œÑ where m k j is the added mass coefficient and k k j t is the memory effect function defined as shown in equation 12 12 k k j t 2 œÄ 0 b k j œâ cos œâ t d œâ where b k j is the damping coefficient of wave making component calculated based on the linear potential theory the equation 11 for roll motion is expressed as follows 13 f 4 r t j 2 6 m 4 j Œ∑ j t k 42 t œÑ Œ∑ 2 œÑ d œÑ t k 43 t œÑ Œ∑ 3 œÑ d œÑ t k 45 t œÑ Œ∑ 5 œÑ d œÑ t k 46 t œÑ Œ∑ 6 œÑ d œÑ b e Œ∑ 4 b 44 Œ∑ 4 Œ∑ 4 t k 44 t œÑ Œ∑ 4 œÑ d œÑ the 6th term on the right side of equation 13 is the viscous effect of roll damping b e Œ∑ 4 is expressed by the following equation obtained from the roll decay test of the model ship b 44 Œ∑ 4 Œ∑ 4 is the wave making component of roll damping 14 b e Œ∑ 4 2 Œº Œ∑ 4 Œ≤ Œ∑ 4 Œ∑ 4 the lateral acceleration at the bridge deck position Œ∑ p is calculated by considering the influence of sway Œ∑ roll œÜ and the lateral component of gravitational acceleration g due to roll motion using following equation 15 Œ∑ p Œ∑ z p z g œÜ g sin œÜ wave conditions in this time domain simulation are short crested irregular beam waves which are the same as in the model test the wave energy spectrum is the ittc spectrum distribution of wave direction is the fourth power of cosine function of which principal direction is beam wave the waveform is expressed by the single summation method with unequal frequency increments which is the same method as the model test 5 2 simulation condition the relation between simulation time and simulated statistical values has been investigated to determine the optimum simulation time the simulation of 1 000 000 steps has been done with a time step of 0 01 s about 2 8 h the division number of wave frequencies is 150 the significant wave height and the zero up crossing period are 5 5 m and 9 5 s respectively according to the condition of the model test the duration time for statistical values is increased by every 100 000 time steps 1000 s each statistical value has been compared with that of the longest simulation time of 1 000 000 steps the relative error of variance and the mean of the one third greatest amplitude of roll motion for each duration time to those for the longest duration time is shown in fig 14 the simulation time needs at least 700 000 steps to keep relative error within 1 therefore the simulation time is based on 3 h in this study in order to investigate the influence of the division number of wave frequencies on the accuracy of simulation results the simulation has been done varying the division number of wave frequencies by every 100 divisions from 50 to 350 the time step is 0 01 s and the simulation time is 3 h as for wave condition the significant wave height and the zero up crossing period are 5 5 m and 9 5 s respectively the relation between statistical values of roll motion and the division number of wave frequencies is shown in fig 15 when the division number of wave frequencies becomes larger than 150 scattering is small from this result the division number of wave frequencies in time domain simulation is set to 150 in the case of lateral acceleration statistical values with different division number of wave frequencies were also scarcely varied as well as roll motion 5 3 simulation and experimental results in short crested irregular waves the simulated results of ship motions in short crested irregular waves in the time domain have been compared with the experimental results to investigate the accuracy of the calculation method five cases of time domain simulation with initial phases of wave frequency and wave directions set by random numbers have been carried out and compared with the experimental results as for wave condition h s and t z are 5 5 m and 9 5 s respectively those simulated results of lateral acceleration are shown in fig 16 the simulated results are close to the mean value of 5 trials and indicate no effect of the random phase of wave frequency and direction on the simulated results figs 17 and 18 show the mean of the one third greatest amplitude of roll motion and lateral acceleration and 95 confidence interval obtained by 5 trials of the simulation and 7 trials of model test respectively as for roll motion 95 confidence interval of simulation and experimental results overlap this result indicates that this time domain simulation has sufficient accuracy to simulate ship motion in short crested irregular waves although there is a difference of those results for lateral acceleration the result of the time domain simulation is a conservative estimation compared with the experimental results in order to investigate the non linear effect of the roll damping appears in the time domain simulation the calculation using only the wave making component of roll damping is carried out and compared with the rayleigh distribution the statistical values of the double amplitude distribution of lateral acceleration in the time domain simulation using roll damping with and without viscous component and relational formula assuming rayleigh distribution were compared in fig 19 in fig 19 outlined marks show the simulated results using equivalent linearization of roll damping coefficient obtained by roll decay test it is including the viscous component and used in this study described in section 5 1 filled marks show the simulated results using only wave making component of roll damping which is without viscous components when the viscous component is not included in the roll damping the statistical values coincide with the relational formula assuming rayleigh distribution on the other hand the statistical values differ from that of rayleigh distribution when the viscous component is considered this means that the non linear effect of roll damping on lateral acceleration appears in the time domain simulation by using the time series data of simulated lateral acceleration the number n exceeding the threshold is counted and compared with the exceedance probability of the experiment fig 20 shows the exceedance probability obtained from the exceedance number and variance value of the time domain simulation and the experiment as for wave condition h s and t z are 7 5 m and 9 5 s respectively the exceedance probability of simulation by the exceedance number agrees well with that of the experiment however the exceedance probability of the simulation by the exceedance number becomes smaller than that obtained from the variance value assuming rayleigh distribution as in the case of the linear superposition of frequency response the exceedance probability from the variance value is evaluated to be conservative in the time domain simulation 5 4 long term probability by the time domain simulation dsa for excessive acceleration failure mode is evaluated using the time domain simulation the lateral acceleration in short crested irregular beam waves was simulated in the time domain for each wave condition of all sea states which have appearance frequency in wave scatter table of iacs no 34 the short term probability c i that lateral acceleration exceeds 9 81 m s2 per one oscillation can be obtained from the variance value of simulated results the long term probability c of failure per wave encounter is also obtained by using the short term probability that lateral acceleration exceeds 9 81 m s2 for each wave condition and appearance frequency of each wave condition w i of iacs no 34 as shown in equation 3 the long term failure probability per one oscillation c using the time domain simulation for the sample ship is 1 68 10 5 table 3 shows the long term failure probability calculated by level 2 the linear superposition method using rao in frequency domain and the time domain simulation the long term failure probabilities calculated by the linear superposition method using rao in frequency domain and the time domain simulation become closer to each other and are consistent with level 2 vulnerability criterion dsa is evaluated as the average stability failure probability per ship per year s d s a calculated by equation 4 s d s a using the time domain simulation is 1 00 which is the same as the case obtained by the linear superposition method using rao in frequency domain 6 conclusions the trial calculation of dsa for excessive acceleration and the model test have been carried out to verify two prediction methods of ship motions in short crested irregular waves the sample ship is the container ship based on cmv chicago express which underwent an accident due to excessive acceleration the concluding remarks can be written as below the ship motions in short crested irregular waves were calculated by two prediction methods which are the linear superposition method using rao in frequency domain and the time domain simulation the results of two prediction methods were compared with the results of the model test the results indicate two prediction methods have a sufficient accuracy using above experimentally validated prediction methods and wave scatter table of iacs no 34 dsa for excessive acceleration failure mode has been done the long term probabilities of failure per wave encounter calculated by the linear superposition method using rao in frequency domain and the time domain simulation have the consistency with level 2 vulnerability criterion and its values obtained by two prediction methods are close to each other the results of dsa evaluated by the average stability failure probability per ship per year for excessive acceleration failure mode are same values using either prediction method acknowledgments this study was carried out as a research activity of goal based stability criteria project of japan ship technology association in the fiscal year 2017 funded by the nippon foundation in addition the time domain simulation in this study was supported by jsps kakenhi grant number jp 18k04592 
22591,the excessive acceleration is one of five stability failure modes for intact stability being discussed at imo the trial calculation for direct stability assessment dsa and the model test have been carried out to verify two prediction methods of ship motions in the short crested irregular waves for dsa the ship motions in the short crested irregular waves calculated by the linear superposition of frequency responses and the time domain simulation agree well with the results of the model test using experimentally validated prediction method and wave scatter table of north atlantic the long term probabilities have been calculated and the results obtained by two prediction methods become closer to each other dsa evaluated by using the long term failure probabilities obtained by two prediction methods are same keywords direct stability assessment excessive acceleration short crested irregular waves linear superposition of frequency responses time domain simulation 1 introduction the excessive acceleration failure mode is one of five stability failure modes for the second generation intact stability criteria being discussed at imo this is the critical standard of lateral acceleration acting on the place where passengers or crew may be present at the highest position in the residential area or at the bridge deck this criterion is classified into 3 categories vulnerability criteria consisting of level 1 and level 2 are simplified criteria and level 3 is direct stability assessment dsa the simplified criteria are highly safety and simplified calculation method on the other hand dsa requires more accurate numerical simulations and model tests in irregular waves and ensure safety level corresponding to the average stability failure probability per ship per year using long term failure probability sdc 4 wp 4 annex 1 2017 in this study the trial calculation of dsa for the excessive acceleration failure mode and the model test have been carried out to verify two prediction methods of ship motion in short crested irregular waves for dsa the sample ship is a container ship designed on the basis of cmv chicago express which underwent an accident due to the excessive acceleration the model test has been carried out to make a quantitative verification of two prediction methods for dsa the ship motions in short crested irregular waves have been calculated by both the linear superposition of frequency responses and the developed time domain simulation the calculated results have been compared with the experimental results to validate the availability of two different prediction methods used for dsa using experimentally validated prediction methods and wave scatter table of north atlantic dsa has been evaluated by using the long term failure probability the calculated long term failure probabilities obtained by both the linear superposition of frequency response and the time domain simulation consistency between dsa and the vulnerability criterion of level 2 has been confirmed 2 sample ship a sample ship was designed to reproduce an accident ship referring to the body plan shown in the investigation report federal bureau of maritime casualty investigation 2009 of the container ship cmv chicago express cmv chicago express underwent fatal accident due to excessive lateral acceleration during typhoon hagupit on 24 september 2008 off the coast of hong kong the accident highlighted the danger of lateral acceleration on ships with large gm the general arrangement of the sample ship is shown in fig 1 and the principal particulars of the sample ship are shown in table 1 its displacement is within 1 difference compared with that in the investigation report bilge keels are set referring to slf 54 inf 7 2011 the height of the position of assessing excessive acceleration is the bridge deck and the longitudinal position is the front of the bridge location of the bridge deck is estimated by both another container ship of the same length and photograph of cmv chicago express 3 model test 3 1 outline of model test for validating the prediction method of ship motions in short crested irregular waves the model tests for the sample ship were carried out in actual sea model basin of national maritime research institute in japan the model test was done based on the ittc recommended procedure 7 5 02 07 04 2008 for intact stability model tests the design situation of dsa for excessive acceleration failure mode is assumed where waves are irregular beam waves and ship speed is zero this situation is set to vulnerability criterion of excessive acceleration failure mode to confirm consistency between level 2 of vulnerability criteria and dsa the model ship has a length overall of 3 5 m and a scale of 1 96 054 loading condition of the model ship was set up on the accident condition as shown in table 1 the dry pitch radius of gyration is 0 25l the lateral acceleration was measured by installing an acceleration sensor at the height of the bridge deck ship motions were free in six degrees of freedom and heave pitch and roll motions are free while surge sway and yaw motions having no restoring forces are guided slackly by a weak spring system in order to keep the mean position of the model ship in waves in order to verify the lateral acceleration in short crested irregular waves calculated by the linear superposition method with response amplitude operator obtained by frequency domain calculation and the time domain simulation regular beam waves long crested and short crested irregular waves were used in the model test the wave energy spectrum of long and short crested irregular waves is the ittc recommended unlimited fetch spectrum 15th ittc 1978 the distribution of wave directions is the fourth power of cosine function of which a principal direction is beam wave the wave conditions in the model test were selected from wave conditions for excessive acceleration failure mode defined in sdc 3 wp 5 annex 7 2016 the wave conditions are 17 cases of significant wave height h s and 16 cases of zero up crossing period t z using class midpoints of wave scatter table with appearance frequency in north atlantic iacs recommendation no 34 2001 the used significant wave heights h s are 5 5 m and 7 5 m in full scale which are large wave height of irregular waves that can be generated in the model basin and according to ittc recommended procedure 7 5 02 07 04 the mean wave period t 01 is transformed from zero up crossing period t z selected from defined wave conditions by using equation 1 1 t 01 1 0864 t z the waveform was expressed by the single summation method with unequal frequency increments and the initial phase and the direction were set by random numbers where the principal wave direction is beam the division number of wave frequencies is set to 150 considering total simulation time although the unequal frequency division of the spectrum cannot avoid the self repetition effect belenky 2004 2005 completely the self repetition effect does not influence the estimation of the exceedance probability which is described in section 4 3 one measurement time was 20 min which corresponds to approximate 3 h in full scale the measurement repeated seven times using random numbers a roll decay test without advance speed was carried out and the roll damping coefficients Œº and Œ≤ expressed by œÜ 2 Œº œÜ Œ≤ œÜ œÜ œâ n 2 œÜ 0 were obtained where œÜ and œâ n are instantaneous roll angle and roll natural frequency divided by the moment of inertia respectively Œº is 0 0123 1 s and Œ≤ is 0 5208 1 rad for the sample ship in model scale roll natural period is 1 112 s which corresponds to 10 89 s in full scale 3 2 analysis of short crested irregular waves in model test wave energy spectrum and directional distribution of wave energy used for the model test are in advance analyzed from the analysis results the spectrum and its temporal variation of wave field generated in the basin are verified the wave elevation to be analyzed is measured by the wave gauge array as shown in fig 2 the wave condition is the significant wave height of 5 73 cm the mean wave period of 1 05 s and the principal wave direction of 90 deg the full scale of this condition is the significant wave height of 5 5m the zero up crossing wave period of 9 5 s the wave energy spectrum is estimated by fast fourier transform fft and the directional distribution of wave energy is estimated by extended maximum entropy principle emep method hashimoto et al 1994 the estimated wave energy spectrum and the directional distribution of wave energy are shown in figs 3 and 4 respectively the directional distribution of wave energy is obtained by integrating the directional spectrum with respect to frequency the estimated directional distribution of wave energy is slightly different from the target values the causes of difference include the uncertainty of emep estimation error in the arrangement of the wave gauges influence of the reflected waves and the statistical variation the target wave energy spectrum and directional distribution of wave energy are used for the numerical simulation because the spectrum estimation itself also includes uncertainty mentioned above in order to investigate temporal variation of the wave field the directional spectra are estimated using the time series data divided every 5 min the temporal variation of the zeroth moment of the directional spectrum m 00 and the mean wave direction Œ∏ m are shown in figs 5 and 6 respectively each figure shows that neither m 00 nor Œ∏ m has significant temporal variation the results indicate that the wave spectrum of the model test is in agreement with the target one and there is also no temporal variation in the directional spectrum 4 direct stability assessment using response amplitude operator dsa is evaluated the average stability failure probability per ship per year which is calculated as a weighted average of long term probability for relevant sea conditions and wave scatter table the short term probabilities that lateral acceleration exceeds the threshold of 9 81 m s2 for relevant sea conditions are obtained by using two prediction methods that predict the ship motions in the short crested irregular waves in this study in this section dsa using response amplitude operator rao is described 4 1 prediction method by using rao the used prediction method is the linear superposition method using rao obtained by frequency domain calculation the calculation tool in frequency domain is salvesen tuck faltinsen stf method salvesen et al 1970 based on strip theory the ship condition is 5 degrees of freedom with zero forward speed hydrodynamic force is calculated by using the 2 dimensional source distribution method roll damping coefficient was obtained by the roll decay model test roll damping is estimated using equivalent linearization himeno 1981 using rao of lateral acceleration and wave spectrum the variance of lateral acceleration in long crested irregular waves is obtained further the variance of lateral acceleration in short crested irregular waves is obtained using linear superposition of variance in long crested irregular waves thus the short term probability can be calculated 4 2 predicted and experimental results in regular and irregular waves examples of comparisons of roll amplitude and lateral acceleration in regular beam waves between numerical and experimental results are shown in figs 7 and 8 respectively roll amplitude is shown dimensionless by wave number k and wave amplitude Œ∂ w since roll motion and lateral acceleration were symmetrical in the model tests the measurement data were analyzed by fourier series using encounter frequency the numerical results agree well with the experimental results the mean of one third greatest amplitudes of lateral acceleration in long and short crested irregular beam waves are compared between numerical and experimental results as shown in fig 9 the statistic values of roll and lateral acceleration in irregular waves are defined here as the half value of double amplitude statistics because there is no difference between the statistic values of maxima and minima the wave conditions of h s and t z are 5 5 m and 9 5 s respectively 7 model test trials were carried out in short crested irregular waves the experimental result in short crested irregular waves is shown with 95 confidence interval of 7 trials each test trial continued for 3 h in full scale with the initial phase and direction of each wave components changed by using random numbers the numerical results for both long and short crested irregular waves agree with those of model experiments the results indicate that this prediction method can be used for dsa for excessive acceleration moreover the numerical results in long and short crested beam waves are smaller than the result of level 2 vulnerability criterion referring to sdc 3 wp 5 annex 2 2016 thus this prediction method has consistency with level 2 vulnerability criterion 4 3 long term probability of stability failure for excessive acceleration when the magnitude of the crest to trough amplitudes of ship motion can be approximated by rayleigh distribution the short term probability c i of exceedance of a threshold r is given by equation 2 where œÉ 2 is variance the statistical values of measured lateral acceleration in short crested irregular waves are compared with relational formula assuming rayleigh distribution as shown in fig 10 assuming rayleigh distribution one third greatest amplitude h 1 3 one tenth greatest amplitude h 1 10 and standard deviation œÉ are expressed relational formula with mean of double amplitude h as shown in fig 10 the statistical values of the model test and relational formula assuming rayleigh distribution are in good agreement on the basis of the experimental results the short term probability that lateral acceleration exceeds threshold r can be obtained using standard deviation 2 c i e x p r 2 2 œÉ 2 fig 11 shows the comparison of two exceedance probabilities obtained by different methods using the time series data obtained in one measurement corresponding to approximate 3 h one is obtained by dividing the number n of amplitudes exceeding the threshold by the total peak number n and the other is obtained from the variance using equation 2 table 2 shows the exceedance number n and total peak number n for each threshold used in calculating the exceedance probabilities shown in fig 11 it can be confirmed that the exceedance probabilities obtained by exceedance number and variance value are in agreement however there is a difference when the threshold is large and the exceedance number n is small in order to obtain much more accurate exceedance probability by using the exceedance number n the exceedance number n for total peak number n should be more than a certain amount on the other hand the exceedance probabilities of wave height obtained by exceedance number and the variance are shown in fig 12 the exceedance probabilities of wave heights obtained by exceedance number are in good agreement with the rayleigh distribution therefore the difference of the exceedance probability of lateral acceleration with the rayleigh distribution is not due to the self repetition effect of the wave but it is considered due to a non linear effect of roll motion from these results the variance value assuming rayleigh distribution is used for dsa because it is more conservative to estimate exceedance probability of lateral acceleration by using variance values dsa for excessive acceleration failure mode is evaluated by using the linear superposition method using rao obtained by frequency domain calculation the lateral acceleration in short crested irregular beam waves was calculated for each sea condition of all sea states which have appearance frequency in wave scatter table of iacs no 34 the short term probability c i that lateral acceleration exceeds 9 81 m s2 per one oscillation can be obtained from the variance values of calculation results the long term probability c of failure per wave encounter is calculated using the short term probability c i that lateral acceleration exceeds 9 81 m s2 for each wave condition and the appearance frequency of each sea condition w i of iacs no 34 as shown in equation 3 referring to sdc 3 wp 5 annex 7 3 c i w i c i i w i the obtained long term failure probability c in short crested irregular waves for sample ship is 2 02 10 5 the result of level 2 vulnerability criterion which is assessed with the long term failure probability by equation 3 for the sample ship is 5 35 10 5 thus it is confirmed that dsa for excessive acceleration in the short crested irregular waves calculated by the linear superposition method using rao has consistency with level 2 vulnerability criterion dsa is evaluated as the average stability failure probability per ship per year s d s a which is calculated by equation 4 4 s d s a 1 1 c 365 24 3600 t where t is the mean encounter period since the situation of dsa in this study is assumed the most severe where ship speed is zero and the principal wave direction is beam the encounter period is considered to be the same as the wave period the mean wave period calculated from the weighted average of the zero up crossing wave period shown in iacs no 34 is 9 63 s that is close to the natural roll period of the sample ship s d s a using the liner superposition method using rao in frequency domain is 1 00 5 direct stability assessment using time domain simulation 5 1 time domain simulation method time domain simulation of ship motion without forward speed in short crested irregular waves has been carried out the ship motion is 6 degrees of freedom and fig 13 shows the coordinate system in the time domain simulation hydrodynamic force is calculated by the 3 dimensional panel method considering memory effect roll damping coefficient is obtained by the roll decay model test the motion equation in the time domain is derived from the velocity potential for impulse response as follows 5 j 6 m k j m k j Œ∑ j t k k j t œÑ Œ∑ j œÑ d œÑ f k j e k t k 1 6 where m k j k k j f k j and e k t are as follows 6 m k j added mass k k j memory effect function f k j restoring force due to hydrostatic pressure e k t external force wave exciting force and drift force the equation 5 is expressed by the general equation of ship motion as follows by arranging the inertia terms to the left hand side and the non inertia term to the right hand side respectively the terms of the right hand side of equation 7 indicate the summation of radiation force f k r diffraction force f k d froude krylov force f k f k and restoring force f k r e s t as shown in equation 8 7 j 1 6 m k j Œ∑ j f k t 8 f k t f k r t f k d t f k f k t f k r e s t t newmark Œ≤ method is used to solve the ship motions in the time domain if the displacement of j mode at a certain time is Œ∑ j n the displacement and velocity of the next step are expressed as follows 9 Œ∑ j n 1 Œ∑ j n Œ¥ t Œ∑ j n Œ¥ t 2 2 Œ∑ j n Œ≤ Œ¥ t 2 Œ∑ j n 1 Œ∑ j n Œ∑ j n 1 Œ∑ j n Œ¥t 2 Œ∑ j n 1 Œ∑ j n the solution at time t Œ¥ t can be derived from that at time t the equation 7 can be solved in the time domain by the convergent calculation for Œ∑ j n 1 using equation 9 1 4 is used for Œ≤ value as an unconditionally stable coefficient during the iterative calculation if the acceleration Œ∑ i n 1 satisfied the following condition the calculation proceeds to the next time step 10 Œ∑ j n 1 Œ∑ j n Œ∑ j n 1 1 100 the radiation force f k r t for each ship motion mode Œ∑ k considering the memory effect of the hydrodynamic force is obtained by the following equation 11 f k r t j 2 6 m k j Œ∑ j t k k j t œÑ Œ∑ j œÑ d œÑ where m k j is the added mass coefficient and k k j t is the memory effect function defined as shown in equation 12 12 k k j t 2 œÄ 0 b k j œâ cos œâ t d œâ where b k j is the damping coefficient of wave making component calculated based on the linear potential theory the equation 11 for roll motion is expressed as follows 13 f 4 r t j 2 6 m 4 j Œ∑ j t k 42 t œÑ Œ∑ 2 œÑ d œÑ t k 43 t œÑ Œ∑ 3 œÑ d œÑ t k 45 t œÑ Œ∑ 5 œÑ d œÑ t k 46 t œÑ Œ∑ 6 œÑ d œÑ b e Œ∑ 4 b 44 Œ∑ 4 Œ∑ 4 t k 44 t œÑ Œ∑ 4 œÑ d œÑ the 6th term on the right side of equation 13 is the viscous effect of roll damping b e Œ∑ 4 is expressed by the following equation obtained from the roll decay test of the model ship b 44 Œ∑ 4 Œ∑ 4 is the wave making component of roll damping 14 b e Œ∑ 4 2 Œº Œ∑ 4 Œ≤ Œ∑ 4 Œ∑ 4 the lateral acceleration at the bridge deck position Œ∑ p is calculated by considering the influence of sway Œ∑ roll œÜ and the lateral component of gravitational acceleration g due to roll motion using following equation 15 Œ∑ p Œ∑ z p z g œÜ g sin œÜ wave conditions in this time domain simulation are short crested irregular beam waves which are the same as in the model test the wave energy spectrum is the ittc spectrum distribution of wave direction is the fourth power of cosine function of which principal direction is beam wave the waveform is expressed by the single summation method with unequal frequency increments which is the same method as the model test 5 2 simulation condition the relation between simulation time and simulated statistical values has been investigated to determine the optimum simulation time the simulation of 1 000 000 steps has been done with a time step of 0 01 s about 2 8 h the division number of wave frequencies is 150 the significant wave height and the zero up crossing period are 5 5 m and 9 5 s respectively according to the condition of the model test the duration time for statistical values is increased by every 100 000 time steps 1000 s each statistical value has been compared with that of the longest simulation time of 1 000 000 steps the relative error of variance and the mean of the one third greatest amplitude of roll motion for each duration time to those for the longest duration time is shown in fig 14 the simulation time needs at least 700 000 steps to keep relative error within 1 therefore the simulation time is based on 3 h in this study in order to investigate the influence of the division number of wave frequencies on the accuracy of simulation results the simulation has been done varying the division number of wave frequencies by every 100 divisions from 50 to 350 the time step is 0 01 s and the simulation time is 3 h as for wave condition the significant wave height and the zero up crossing period are 5 5 m and 9 5 s respectively the relation between statistical values of roll motion and the division number of wave frequencies is shown in fig 15 when the division number of wave frequencies becomes larger than 150 scattering is small from this result the division number of wave frequencies in time domain simulation is set to 150 in the case of lateral acceleration statistical values with different division number of wave frequencies were also scarcely varied as well as roll motion 5 3 simulation and experimental results in short crested irregular waves the simulated results of ship motions in short crested irregular waves in the time domain have been compared with the experimental results to investigate the accuracy of the calculation method five cases of time domain simulation with initial phases of wave frequency and wave directions set by random numbers have been carried out and compared with the experimental results as for wave condition h s and t z are 5 5 m and 9 5 s respectively those simulated results of lateral acceleration are shown in fig 16 the simulated results are close to the mean value of 5 trials and indicate no effect of the random phase of wave frequency and direction on the simulated results figs 17 and 18 show the mean of the one third greatest amplitude of roll motion and lateral acceleration and 95 confidence interval obtained by 5 trials of the simulation and 7 trials of model test respectively as for roll motion 95 confidence interval of simulation and experimental results overlap this result indicates that this time domain simulation has sufficient accuracy to simulate ship motion in short crested irregular waves although there is a difference of those results for lateral acceleration the result of the time domain simulation is a conservative estimation compared with the experimental results in order to investigate the non linear effect of the roll damping appears in the time domain simulation the calculation using only the wave making component of roll damping is carried out and compared with the rayleigh distribution the statistical values of the double amplitude distribution of lateral acceleration in the time domain simulation using roll damping with and without viscous component and relational formula assuming rayleigh distribution were compared in fig 19 in fig 19 outlined marks show the simulated results using equivalent linearization of roll damping coefficient obtained by roll decay test it is including the viscous component and used in this study described in section 5 1 filled marks show the simulated results using only wave making component of roll damping which is without viscous components when the viscous component is not included in the roll damping the statistical values coincide with the relational formula assuming rayleigh distribution on the other hand the statistical values differ from that of rayleigh distribution when the viscous component is considered this means that the non linear effect of roll damping on lateral acceleration appears in the time domain simulation by using the time series data of simulated lateral acceleration the number n exceeding the threshold is counted and compared with the exceedance probability of the experiment fig 20 shows the exceedance probability obtained from the exceedance number and variance value of the time domain simulation and the experiment as for wave condition h s and t z are 7 5 m and 9 5 s respectively the exceedance probability of simulation by the exceedance number agrees well with that of the experiment however the exceedance probability of the simulation by the exceedance number becomes smaller than that obtained from the variance value assuming rayleigh distribution as in the case of the linear superposition of frequency response the exceedance probability from the variance value is evaluated to be conservative in the time domain simulation 5 4 long term probability by the time domain simulation dsa for excessive acceleration failure mode is evaluated using the time domain simulation the lateral acceleration in short crested irregular beam waves was simulated in the time domain for each wave condition of all sea states which have appearance frequency in wave scatter table of iacs no 34 the short term probability c i that lateral acceleration exceeds 9 81 m s2 per one oscillation can be obtained from the variance value of simulated results the long term probability c of failure per wave encounter is also obtained by using the short term probability that lateral acceleration exceeds 9 81 m s2 for each wave condition and appearance frequency of each wave condition w i of iacs no 34 as shown in equation 3 the long term failure probability per one oscillation c using the time domain simulation for the sample ship is 1 68 10 5 table 3 shows the long term failure probability calculated by level 2 the linear superposition method using rao in frequency domain and the time domain simulation the long term failure probabilities calculated by the linear superposition method using rao in frequency domain and the time domain simulation become closer to each other and are consistent with level 2 vulnerability criterion dsa is evaluated as the average stability failure probability per ship per year s d s a calculated by equation 4 s d s a using the time domain simulation is 1 00 which is the same as the case obtained by the linear superposition method using rao in frequency domain 6 conclusions the trial calculation of dsa for excessive acceleration and the model test have been carried out to verify two prediction methods of ship motions in short crested irregular waves the sample ship is the container ship based on cmv chicago express which underwent an accident due to excessive acceleration the concluding remarks can be written as below the ship motions in short crested irregular waves were calculated by two prediction methods which are the linear superposition method using rao in frequency domain and the time domain simulation the results of two prediction methods were compared with the results of the model test the results indicate two prediction methods have a sufficient accuracy using above experimentally validated prediction methods and wave scatter table of iacs no 34 dsa for excessive acceleration failure mode has been done the long term probabilities of failure per wave encounter calculated by the linear superposition method using rao in frequency domain and the time domain simulation have the consistency with level 2 vulnerability criterion and its values obtained by two prediction methods are close to each other the results of dsa evaluated by the average stability failure probability per ship per year for excessive acceleration failure mode are same values using either prediction method acknowledgments this study was carried out as a research activity of goal based stability criteria project of japan ship technology association in the fiscal year 2017 funded by the nippon foundation in addition the time domain simulation in this study was supported by jsps kakenhi grant number jp 18k04592 
22592,ventilated cavitating flows involve complex features and dynamic characteristics due to the strong interactions between gas and liquid in the present work we especially focus on the experimental investigation of the development stage of ventilated partial cavitating flow in a closed loop water tunnel at harbin institute of technology in the experiments a conical axisymmetric test body made of aluminum alloy with a ventilation slot at the nose is placed at the middle of the test section a high speed camera is used to capture the flow patterns five pressure transducers are installed in the test model to measure the unsteady dynamic pressure a multi field synchronous measurement system for cavitating flow is established to address the relationship between cavity evolution and instantaneous pressure the effect of gas ventilation rate on cavity evolution and dynamic pressure are investigated three unsteady flow patterns are observed namely foamy cavity fc continuous transparent and foamy cavity ctfc continuous transparent and asymmetric cavity ctac respectively in addition three distinct cavity regimes are also observed based on the dynamic cavity topology referred to as gas filled cavity region gfcr re entrant jet region rejr and wake region wr the gas entrainment mechanism determined by the re entrant flow model of a partial ventilated cavity is analyzed a phenomenon we observed is that the increase in ventilation rate can improve the dynamic stability inside the cavity and can help reduce the load on the test body moreover we find that there are location gaps in space between the pressure peaks and the foamy cavity closure position due to the effect of re entrant flow keywords ventilated partial cavitation development stage cavity evolution pressure characteristics gas entrainment mechanism 1 introduction ventilated cavitating flow is a special case of cavitation by injecting non condensable gas into the low pressure regions behind the cavitator franc and michel 2006 karn et al 2016 this phenomenon makes a considerable reduction in the drag of the underwater vehicle which in turn provides a significant increase in the maximum velocity amromin and mizine 2003 rashidi et al 2014 therefore the ventilated cavitation has been studied considerably in the literature due to its great practical application in engineering and scientific relevance in fluid dynamics amromin et al 2011 ceccio 2010 zhang et al 2016 shao et al 2018 sun et al 2019a however ventilated cavitation is an unsteady behavior in nature and inevitably involves complex multiphase flows huang et al 2013 zhang et al 2017 kadivar et al 2017 yang et al 2018 that can lead to many undesirable problems such as sudden change in loads or interaction of multi scale cavity structures a better understanding of the ventilated cavitating flow mechanism is the goal that researchers have long been pursuing for high speed fully submerged underwater vehicles the entire body can be immersed in the cavity by ventilated supercavitation interestingly friction drag can be significantly reduced by over 90 ceccio 2010 wosnik and arndt 2013 in the past considerable efforts have been made to study the supercavitating flow oba et al 1980 stinebring et al 2006 more recently ahn et al 2017 investigated the physical characteristics of an artificial supercavity generated behind an axisymmetric cavitator they found that the pressures measured at different positions inside the cavity are almost identical when a clear supercavity was maintained kinzel et al 2017 performed fruitful numerical and experimental investigations to assess the interaction of a supercavitating flow with a gas jet they provided valuable results about cavity size interfacial character gas composition and gas entrainment mechanisms jiang et al 2018 and shao et al 2018 experimentally studied the behaviors of ventilated supercavitation they found five distinct cavity states based on the variation of cavity geometry and pressure signatures inside the cavity these abovementioned studies provided valuable insights into the mechanism of ventilated supercavitation and most of them focused on cavity shape evolution mechanism velocity and pressure distributions of the flow field as well as the stability and control of supercavitating vehicles however in the process of achieving supercavitation ventilated partial cavity referring to the ventilated cavity terminating in the halfway of the vehicle body with a re entrained jet in its wake region is frequently observed in the transient launch stage or for vehicle maneuvering by exposing part of the body to contact with water abraham et al 2003 hence in order to fully understand the mechanism for application more attention needs to be paid to the ventilated partial cavitating flow to improve the understanding of the complex flow structures of ventilated partial cavitating flow some considerable work has been exerted in the experimental and numerical studies by researchers coutier delgosha et al 2003 numerically investigated the unsteady behavior of cavitating flows in two venturi types sections they found that the unsteady behavior of the cavitating flow depends strongly on the turbulence model kopriva et al 2005 2008 tested the drag reduction by ventilated partial cavitating flows in unsteady and steady cases they found that the drag force can be reduced effectively and the lift to drag ratio was increased liu et al 2017 2018 conducted an experimental investigation on the flow patterns for ventilated partial cavitating flows in a closed loop cavitation tunnel they obtained the patterns for ventilated partial cavitating flows by changing the froude number and gas entrainment moreover they analyzed the effects of the angles of attack on the flow behavior around an axisymmetric body m√§kiharju et al 2017 discussed the dynamics of partial cavity formation and the influence of injected non condensable gas over a wedge the gas injected near the apex was found responsible for pressure increase around the suction peak which resulted in the suppression of vapor formation wang et al 2017 established an experimental approach to analyze the ventilated cloud cavitating flow around a blunt body close to the free surface they found that the cavity was larger and more stable than the cloud cavity under a similar cavitation number far from the free surface in addition ji et al 2013 2014 thoroughly investigated the unsteady features of partial cavitation and shedding mechanism and paid more attention to the interaction between the vortices and the cavities in turbulent cavitating flow according to the experimental results by ganesh et al 2016 a bubbly shock propagation was found as a mechanism for sheet to cloud transition of partial cavities note that cavitation behaviors such as the cavity shape and flow evolution for both ventilated and natural cavities are similar in a certain condition brennen 2013 ahn et al 2016 hence these results can also help to provide better insight into the mechanism of ventilated cavitating flow despite decades of vigorous research on ventilated cavitating flow there is still a lack of consensus on the measurements of dynamic pressure and unsteady cavity evolution usually dynamic pressure measurement in cavities is quite difficult especially for ventilated partial cavitating flow at the development stage more recently ahn et al 2017 measured the pressure inside the cavity of ventilated partial cavitation and supercavitation however the experimental measurement of the pressure was time averaged for the test cases the study of gas ventilation is extremely important for underwater vehicle operation particularly from the viewpoint of estimation of ventilation demand karn et al 2016 thus in the present study we present the features of the ventilated partial cavitating flow using the experimental method particularly focused on the cavity evolution and dynamic pressure study of these characteristics will aid in properly understanding the ventilation physics of partial cavitation process and the study is also an experimental validation of numerical simulations the present paper is structured as follows section 2 provides the details of the experimental setup and test methods subsequently in section 3 we present results and discussion on the evolution of the cavitating flow patterns under different ventilation gas rate the dynamic cavity topology the gas entrainment mechanism and the characteristics of the time dependent pressure fluctuations and of ventilated partial cavitating flow finally the main findings are summarized in section 4 2 experimental setup and test methods 2 1 experimental setup the experiment is based on the closed loop cavitation water tunnel experimental system at harbin institute of technology which is shown in fig 1 the length of the test section is 1m and the cross section is 260 260 mm square in order to observe the flow field transparent plexiglass is installed on the upper lower front and rear sides of the test section the axial flow pump is located at the bottom of the tunnel to drive the flow into the test section the maximum flow velocity in the test section is 18 m s and the general working velocity is from 2 to 12 m s the flow rate is recorded by the electromagnetic flowmeter and it could be adjusted by varying the pump rotation speed to separate the undesired free stream bubbles in the flow a tank is placed upstream of the test section the vacuum pump is connected to the top of the tank and operated in the control room according to the testing pressure in the present study the pressure of the test section is 68 4 kpa the flow velocity at the test section is 8 07 m s the fluid used in the experiment is water and the temperature is close to 18 c under the test conditions in the present study a conical axisymmetric test body made of aluminum alloy with a ventilation slot at the nose is placed at the middle of the test section the schematic is shown in fig 2 it is a hollow cylindrical structure and the diameter is d 0 04 m and the length is l 274 mm the width of the ventilation slot is 1 mm two rows of circular holes 4 holes for each row are designed to avoid the non uniform of the air flow there are five pressure sensors inside the test body as shown in fig 2 the pressure transducer is installed on the internal adapter and communicates with outside through the hole on the test body surface to better measure the pressure in the flow field the pressure transducers are mounted flush with the surface of the test body the center point of transducer p1 is 129 mm from the test body head and the distance between two adjacent transducers is 15 mm 2 2 the multi field synchronous measurement system in this paper a multi field synchronous measurement system for cavitating flow is established the schematic diagram of the synchronous measurement method is shown in fig 3 using this measurement system the evolution of the cavity patterns pressure signals and ventilation flow rate can be obtained the evolution of the cavity patterns are captured by the photron fastcam high speed camera at a sampling frequency of 3000 fps and the exposure time is 0 33 ms due to the high frame rate and short exposure time it is necessary to increase the light intensity to ensure the clarity of the experimental photographs three led lights are used during the experiment to ensure sufficient background light the pressure transducer used in the experiment is kunshan shuangqiao cyg505all the maximal range for the pressure transducer is 200 kpa and the uncertainty is 0 25 the sampling frequency of the data acquisition system for unsteady pressure measurement is 10 khz meanwhile the gas flow rate is measured by the sevenstar d7 series flowmeter and the maximum uncertainty in the gas entrainment coefficient is about 2 the important dimensionless parameters cavitation number œÉ gas ventilation rate c q and pressure coefficient c p used in the present study are defined as 1 œÉ p p c 0 5 œÅ l v 2 2 c q q in v d 2 3 c p p p 0 5 œÅ l v 2 where p is the free stream pressure p is the local dynamic pressure inside the cavity p c is the cavity pressure œÅ is the liquid density v is the free stream velocity q in is the volume flow rate d is the diameter of the test body 3 results and discussions 3 1 evolution of the cavitating flow patterns many unstable flow patterns for the ventilated partial cavitating flows are observed in our experiments the names are foamy cavity fc continuous transparent and foamy cavity ctfc continuous transparent and asymmetric cavity ctac respectively as shown in fig 4 the definition of cavity regime is referred to karn and rosiejka 2017 and liu et al 2018 the fc is filled with dense foamy bubbles and characterized by the significant interaction between the air and water at the cavity interface affected by the interaction the air water interface is extremely turbulent note that the phrase of the foamy cavity was also used by karn et al 2016 qin et al 2019 etc meanwhile m√§kiharju et al 2017 and liu et al 2017 used cloud cavity to characterize such cavitation flow patterns in the present experiments we use the foamy cavity to analyze our results with increasing time the transparent cavity appears near the shoulder of the test mode for the ctfc regime the ventilated partial cavity undergoes flow transition and re attaches to form a laminar cavity interface moreover in the ctac regime gravitational effects are significant and the rear part of the cavity is asymmetric fig 5 shows the time series of the unsteady cavitation evolution of the ventilated partial cavitating flow at the ventilation rate c q 0 123 it is also worth mentioning that all ventilated cavitating runs are initialized with steady state in order to keep steady working conditions the water tunnel is run for a relatively long duration meanwhile repeated runs are performed to avoid the single instances problem of cavity patterns and pressure measurement in the present study we define the initial ventilation time as t 200 ms as the ventilation time increased from t 200 ms to t 216 ms a local ventilated cavity forms at the shoulder of the test body and the length gradually increase during this time the fc is foamed which is characterized by an almost opaque cavity it is interesting that due to the foam and bubbles there is no clear water gas interface in the fc stage from t 220 ms to t 256 ms numerous bubbles gather to form a continuous cavity at downstream and the length of the cavity increases significantly in the experiment as a result the flow pattern migrates to ctfc at t 220 ms there is a clear interface between the continuous transparent and foamy cavity it is noted that a re entrant jet appears in the front of the cavity and the subsequent impingement of the jet on the cavity interface hence the break off and shedding occur form t 236 ms to t 240 ms due to the formation of the re entrant jet note that the re entrant jet phenomenon has been demonstrated and found for the similar cavitating flows cases in our previous numerical and experimental investigations zhang et al 2017 sun et al 2019b it is also worth noting that a secondary break off and shedding happens from t 244 ms to t 248 ms at the closure of the attached cavity it indicates that there is a high intensity interaction between water and gas at the ctfc stage it is well known that the re entrant jet plays an important role in the flow structures of the ventilated cavity song 1961 kawakami and arndt 2011 wang et al 2015 which will be detailed discussed in section 3 3 from t 260 ms to t 284 ms the cavitating flow is relatively stable and the transparent region becomes larger at the front of the test body moreover as the cavity length increases the cavity shape at the closure region is asymmetric due to the gravity effect at low froude number conditions and the cavitation flow pattern migrates to ctac compared with the flow patterns at the fc ctfc and ctac stages we can find the asymmetric feature occurs at the ctac stage of the ventilated partial cavitating flow it indicates that the gravity effect plays a significant role in the globe ventilated cavitating flow structure it should be noted that for the ctac regime the cavity length should be more than half the length of the test body and characterized as a relatively stable cavity although we can also see asymmetric rear part of the cavity at 248 ms we still define it as the ctfc regime due to the occurrence of break off and cavity length limitation from t 284 ms to t 300 ms as the cavity grows further it becomes more transparent and stable the length of the cavity does not change significantly due to the gas leakage from the ventilated cavity is almost equal to the gas ventilation rate at the rear end of the cavity in order to further investigate the influence of the gas ventilation rate on the cavitating flow patterns fig 6 shows the time series of the unsteady cavitation evolution of the ventilated partial cavitating flow at the ventilation rate c q 0 131 the dashed line in fig 6 is used to trace the pressure transducer position of the test body and help further analyze the relationship between pressure evolution and the re entrant jet these pressure transducers at p1 to p5 are denoted by 1 to 5 respectively in fig 6 for a larger c q 0 131 as shown in fig 6 although there is an increase in cavity length the flow pattern appears the same fc ctfc and ctac also can be observed however by comparing the cavity pattern from t 212 ms to t 256 ms in figs 5 and 6 we find that the transparent cavity appears earlier for c q 0 131 than for c q 0 123 meanwhile the large scale cloud shedding is not obvious and more numerous bubbles gather around the rear of the cavity when c q 0 131 moreover it can be observed that the gravity effect is much more pronounced with c q 0 131 as can be seen from figs 5 and 6 at the initial stage of air ventilation when the cavity length is small the gravity effect is not significant a similar trend has also been found by ahn et al 2016 3 2 dynamic cavity topology and gas entrainment mechanism as the analysis of the previous results in section 3 1 we can find that the partial ventilated cavitating flow involves a complex cavity topology and evolution mechanism which integrates both gas filled cavity and bubble around the test body in fig 7 we present a typical geometry of a relatively fully developed partial ventilated cavity based on the experimental results of the ctac stage in the ventilated partial cavitation experiments the cavity presents a relatively stable detachment along with the test model three distinct cavity regimes are observed referred to as the gas filled cavity region gfcr re entrant jet region rejr and wake region wr the classification of different cavity regimes is based on the cavity topology mode as shown in fig 7 a the gfcr closer to the shoulder is almost entirely filled with gas and with a relatively transparent appearance and sharp water cavity interface meanwhile the cavity experiences a transition along the flow direction and it is frothy over the downstream part of the cavity length observed as an fcr it should be noted that the foamy region reveals that the cavity surface is not smooth and it is a predominant mode of air entrainment in the unsteady cavitating flows callenaere et al 2001 ahn et al 2017 moreover as shown in fig 7 a the wake region wr is characterized by a dense stream of entrained bubbles however the wr is concentrated on the upper side of the test model this is mainly due to the influence of gravity it is well known that the cavities have a higher pressure at their closure point which induces the re entrant flow in the cavity kinzel et al 2009 2017 and fronzeo et al 2019 found that the flow was redirected towards the front of the cavity at the re entrant portion of the cavity and recirculated until was eventually entrained into the interface and ejected from the cavity the observations of the re entrant flow and recirculation were also observed and ascertained in our previous studies zhang et al 2017 sun et al 2019b hence we present a schematic of the gas entrainment mechanism determined by the re entrant flow models of a partial ventilated cavity in fig 7 c based on the experimental observations see fig 7 a and b it should be noted that the recirculating vortex size is shown in fig 7 c is not an exact value according to chanson 1997 the gas leakage rate by re entrant flow is governed by the free surface gas entrainment mechanism in our experiments it should be noted that the re entrant jet flow is the cause of the surface disturbance in the foamy region moreover the re entrant jet flow is characterized by recirculating vortex and it is responsible for the cavity beak off arndt et al 2000 wang et al 2015 which gives birth to numerous small bubbles due to high turbulence subsequently small scale bubble group is then re circulated with the re entrant flow in the vortex region while the majority of bubbles entrain along the test body surface downstream by the main flow during this process high pressure occurs towards the middle of the cavity surface and is strong enough to cut the cavity into two parts when the partial cavitation is fully developed leroux et al 2004 in addition a high pressure zone has also been found in the region where the re entrant jet breaks the cavity by arndt et al 2000 hence the high pressure peak point is considered as the gas filled cavity closure position for the ventilated partial cavitating flow this will be discussed in detail in section 3 3 3 3 characteristics of the time dependent pressure fluctuations one of the most important results of the present tests is the unsteady pressure measurement inside the cavity to better address and understand the flow characteristics of ventilated cavitation quantitative pressure and qualitative cavity morphology comparisons between ventilated partial cavitation and natural cavitation are presented in fig 8 here the natural cavitation number and the ventilated cavitation number are both 0 52 the Œ¥p in fig 8 is defined as surface pressure minus time averaged pressure note that obvious break off and shedding can be seen for the ventilated partial cavitating flows whereas we can observe a stable cavity closure regime for the natural cavitation through the numerical analysis by yang et al 2018 the gas injection could push the vapor cavity away from the test body and subsequent shedding of more unsteady cavities the present experimental observations of natural cavitation and ventilated cavitation are consistent with those of yang et al 2018 moreover we can find that the range of Œ¥p fluctuations of natural cavitation is significantly greater than that of ventilated cavitation it indicates and further confirms that gas injection promotes cavitation and the pressure oscillation is alleviated fig 9 presents the instantaneous surface pressure data of the two cases as can be seen from fig 9 a and b the overall varying tendency of the pressure coefficient on the test body surface is similar from t 0 ms to t 200 ms the pressure coefficient is characterized as the bulk dynamic pressure after t 200 ms as the ventilation time increases the pressure increases gradually and strong pressure fluctuation can be observed the peak of the pressure wave rapidly propagates from transducer p1 to p5 along with the re entrant jet and the cascading shedding process as the cavity grows along the test body the local pressure inside the cavity drop below the bulk flow pressure this is caused by the ventilation gas interestingly as shown in fig 9 a two pressure peaks can be observed for transducer p3 p5 i ii iii however only one local pressure peak can be observed when c q 0 131 actually the effect of the pressure distribution on the re entrant flow is essential in the analysis of the cavitation instability as it is well known that the re entrant flow is the source of the cavitation instability callenaere et al 2001 strong cavitation instability at low gas ventilation rate can be seen according to the re entrant jet region and wake region in section 3 1 these observations are consistent with the experimental results by ahn et al 2017 moreover the peak occurs at different times for the transducers p3 p4 and p5 it indicates that the flow inside the cavity is more complex and more unsteady in the fully developed state with a smaller gas ventilation rate hence the increase in ventilation rate can improve the stability and pressure oscillation inside the cavity of ventilated partial cavitating flow the maximum pressure values of transducers p1 to p5 for c q 0 123 and c q 0 131 are summarized in table 1 it is interesting to see that the maximum pressure values of transducers p1 to p5 for c q 0 123 is larger than that of c q 0 131 it indicates that an increased gas ventilation rate can be expected to help reduce the load on the test body these results are sufficient to provide the general features of dynamic stability and evolution of ventilated partial cavitating flows in order to address the relationship between the cavitating flow and pressure distribution fig 10 presents the surface pressure distribution and cavity shape at the instants when each pressure transducer captures the peak pressure the definition of the cavity closure point is shown as fig 10 a to better analyze the results in fig 10 b we defined the axis x in descending order by the value the red dash line in fig 10 b and c represents the position of the transducers the blue dash line in fig 10 c represents the closure position of the cavity from fig 10 b it is clear that the time interval between two pressure peaks is almost 10 ms it indicates that the propagation velocity of pressure peak waves along the surface of the test model is constant moreover a relatively high pressure peak appears in the tail region of the ventilated cavity it is known that shedding of cloud cavitation can result in large unsteady loads on the cavitating object laberteaux and ceccio 2001 from the numerical results by owis and nayfeh 2003 kim et al 2012 and the time averaged experimental pressure data by rouse and mcnown 1948 of natural cavitation we can find that the surface pressure coefficient is from 0 2 to 0 3 it is interesting to note that the pressure peak location does not correspond to the cavity closure location in the present study usually for partial cavitating flow the closure region location is set in the vicinity of the pressure recovery peak leroux et al 2004 meanwhile the distribution of pressure pulses around cavity closure may significantly different according to the type of cavity le et al 1993a 1993b in the present study the red dash line in fig 10 c can represent the gas filled cavity region foamy region interface there occurs drastic interactions and presents significant unsteady characteristics hence high pressure values appear in this position and strong gas liquid interaction results in high pressure on the wall in the rear part of the ventilated partial cavity it is worth noting that a similar finding by ganesh et al 2016 is the pressure rise due to the passage of the shock inside the partial cavity in the experimental results of ganesh et al 2016 dynamic pressure increased by about 16 kpa in our experimental measurements the maximum recorded pressure peak is increased by about 15 kpa p5 c pmax 0 454 c q 0 131 compared to the bulk pressure in addition karn et al 2016 experimental measurements showed that the re entrant flow appeared to be unstable and undergoing positional changes at the rear part of the cavity meanwhile combined with our previous research zhang et al 2017 sun et al 2019b we conclude that pressure peak fluctuation is dominated by the unsteady feature of the re entrant flow 4 conclusions in this paper experimental studies are presented for a conical axisymmetric model at the development stage of the ventilated partial cavitating flow a high speed camera is used to investigate the evolution mechanism of the cavity patterns especially the unsteady pressure around the test body is measured by pressure transducers the following conclusions can be drawn from the results of this study 1 three unsteady flow patterns are observed at the development stage of ventilated partial cavitating flow namely foamy cavity fc continuous transparent and foamy cavity ctfc continuous transparent and asymmetric cavity ctac respectively interestingly the transparent cavity appears earlier and more numerous bubbles gather around the rear of the cavity for the larger gas ventilation rate 2 the re entrant jet plays an important role in the shedding process of ventilated partial cavitating flow and the shedding characteristics are closely related to the gas entrainment process three distinct cavity regimes are observed based on the cavity topology classification mode referred to as the gas filled cavity region gfcr re entrant jet region rejr and wake region wr 3 the increase in ventilation rate can improve the dynamic stability inside the cavity and can help reduce the load and pressure oscillation on the test body of the ventilated partial cavitating flow fewer pressure peaks appear under larger ventilation rate while greater measured peak values appear under smaller ventilation rate 4 the pressure peaks and the foamy cavity closure appear at different locations the maximum pressure values occur almost at the gas filled cavity closure region which is dominated by the unsteady feature of the re entrant flow as mentioned above many factors affect the pressure characteristics on the cavitation flow field regarding future work more experimental research and corresponding numerical simulation are needed to further advance the understanding of the relationship between dynamic pressure and cavitation evolution especially the pressure peak values considering cavitation number and gas injection rate in addition the cavity dynamics mechanism including the relationship between cavity interface topology and boundary layer developing at the interface will be further enhanced in the future acknowledgments this work was supported by the national natural science foundation of china 51709042 51579042 51679037 51639003 the natural science foundation of liaoning province of china 20180550619 the china postdoctoral science foundation 2018m631791 the recruitment program of global young experts d1007001 and the fundamental research funds for the central universities dut18rc 4 018 dut2017tb05 
22592,ventilated cavitating flows involve complex features and dynamic characteristics due to the strong interactions between gas and liquid in the present work we especially focus on the experimental investigation of the development stage of ventilated partial cavitating flow in a closed loop water tunnel at harbin institute of technology in the experiments a conical axisymmetric test body made of aluminum alloy with a ventilation slot at the nose is placed at the middle of the test section a high speed camera is used to capture the flow patterns five pressure transducers are installed in the test model to measure the unsteady dynamic pressure a multi field synchronous measurement system for cavitating flow is established to address the relationship between cavity evolution and instantaneous pressure the effect of gas ventilation rate on cavity evolution and dynamic pressure are investigated three unsteady flow patterns are observed namely foamy cavity fc continuous transparent and foamy cavity ctfc continuous transparent and asymmetric cavity ctac respectively in addition three distinct cavity regimes are also observed based on the dynamic cavity topology referred to as gas filled cavity region gfcr re entrant jet region rejr and wake region wr the gas entrainment mechanism determined by the re entrant flow model of a partial ventilated cavity is analyzed a phenomenon we observed is that the increase in ventilation rate can improve the dynamic stability inside the cavity and can help reduce the load on the test body moreover we find that there are location gaps in space between the pressure peaks and the foamy cavity closure position due to the effect of re entrant flow keywords ventilated partial cavitation development stage cavity evolution pressure characteristics gas entrainment mechanism 1 introduction ventilated cavitating flow is a special case of cavitation by injecting non condensable gas into the low pressure regions behind the cavitator franc and michel 2006 karn et al 2016 this phenomenon makes a considerable reduction in the drag of the underwater vehicle which in turn provides a significant increase in the maximum velocity amromin and mizine 2003 rashidi et al 2014 therefore the ventilated cavitation has been studied considerably in the literature due to its great practical application in engineering and scientific relevance in fluid dynamics amromin et al 2011 ceccio 2010 zhang et al 2016 shao et al 2018 sun et al 2019a however ventilated cavitation is an unsteady behavior in nature and inevitably involves complex multiphase flows huang et al 2013 zhang et al 2017 kadivar et al 2017 yang et al 2018 that can lead to many undesirable problems such as sudden change in loads or interaction of multi scale cavity structures a better understanding of the ventilated cavitating flow mechanism is the goal that researchers have long been pursuing for high speed fully submerged underwater vehicles the entire body can be immersed in the cavity by ventilated supercavitation interestingly friction drag can be significantly reduced by over 90 ceccio 2010 wosnik and arndt 2013 in the past considerable efforts have been made to study the supercavitating flow oba et al 1980 stinebring et al 2006 more recently ahn et al 2017 investigated the physical characteristics of an artificial supercavity generated behind an axisymmetric cavitator they found that the pressures measured at different positions inside the cavity are almost identical when a clear supercavity was maintained kinzel et al 2017 performed fruitful numerical and experimental investigations to assess the interaction of a supercavitating flow with a gas jet they provided valuable results about cavity size interfacial character gas composition and gas entrainment mechanisms jiang et al 2018 and shao et al 2018 experimentally studied the behaviors of ventilated supercavitation they found five distinct cavity states based on the variation of cavity geometry and pressure signatures inside the cavity these abovementioned studies provided valuable insights into the mechanism of ventilated supercavitation and most of them focused on cavity shape evolution mechanism velocity and pressure distributions of the flow field as well as the stability and control of supercavitating vehicles however in the process of achieving supercavitation ventilated partial cavity referring to the ventilated cavity terminating in the halfway of the vehicle body with a re entrained jet in its wake region is frequently observed in the transient launch stage or for vehicle maneuvering by exposing part of the body to contact with water abraham et al 2003 hence in order to fully understand the mechanism for application more attention needs to be paid to the ventilated partial cavitating flow to improve the understanding of the complex flow structures of ventilated partial cavitating flow some considerable work has been exerted in the experimental and numerical studies by researchers coutier delgosha et al 2003 numerically investigated the unsteady behavior of cavitating flows in two venturi types sections they found that the unsteady behavior of the cavitating flow depends strongly on the turbulence model kopriva et al 2005 2008 tested the drag reduction by ventilated partial cavitating flows in unsteady and steady cases they found that the drag force can be reduced effectively and the lift to drag ratio was increased liu et al 2017 2018 conducted an experimental investigation on the flow patterns for ventilated partial cavitating flows in a closed loop cavitation tunnel they obtained the patterns for ventilated partial cavitating flows by changing the froude number and gas entrainment moreover they analyzed the effects of the angles of attack on the flow behavior around an axisymmetric body m√§kiharju et al 2017 discussed the dynamics of partial cavity formation and the influence of injected non condensable gas over a wedge the gas injected near the apex was found responsible for pressure increase around the suction peak which resulted in the suppression of vapor formation wang et al 2017 established an experimental approach to analyze the ventilated cloud cavitating flow around a blunt body close to the free surface they found that the cavity was larger and more stable than the cloud cavity under a similar cavitation number far from the free surface in addition ji et al 2013 2014 thoroughly investigated the unsteady features of partial cavitation and shedding mechanism and paid more attention to the interaction between the vortices and the cavities in turbulent cavitating flow according to the experimental results by ganesh et al 2016 a bubbly shock propagation was found as a mechanism for sheet to cloud transition of partial cavities note that cavitation behaviors such as the cavity shape and flow evolution for both ventilated and natural cavities are similar in a certain condition brennen 2013 ahn et al 2016 hence these results can also help to provide better insight into the mechanism of ventilated cavitating flow despite decades of vigorous research on ventilated cavitating flow there is still a lack of consensus on the measurements of dynamic pressure and unsteady cavity evolution usually dynamic pressure measurement in cavities is quite difficult especially for ventilated partial cavitating flow at the development stage more recently ahn et al 2017 measured the pressure inside the cavity of ventilated partial cavitation and supercavitation however the experimental measurement of the pressure was time averaged for the test cases the study of gas ventilation is extremely important for underwater vehicle operation particularly from the viewpoint of estimation of ventilation demand karn et al 2016 thus in the present study we present the features of the ventilated partial cavitating flow using the experimental method particularly focused on the cavity evolution and dynamic pressure study of these characteristics will aid in properly understanding the ventilation physics of partial cavitation process and the study is also an experimental validation of numerical simulations the present paper is structured as follows section 2 provides the details of the experimental setup and test methods subsequently in section 3 we present results and discussion on the evolution of the cavitating flow patterns under different ventilation gas rate the dynamic cavity topology the gas entrainment mechanism and the characteristics of the time dependent pressure fluctuations and of ventilated partial cavitating flow finally the main findings are summarized in section 4 2 experimental setup and test methods 2 1 experimental setup the experiment is based on the closed loop cavitation water tunnel experimental system at harbin institute of technology which is shown in fig 1 the length of the test section is 1m and the cross section is 260 260 mm square in order to observe the flow field transparent plexiglass is installed on the upper lower front and rear sides of the test section the axial flow pump is located at the bottom of the tunnel to drive the flow into the test section the maximum flow velocity in the test section is 18 m s and the general working velocity is from 2 to 12 m s the flow rate is recorded by the electromagnetic flowmeter and it could be adjusted by varying the pump rotation speed to separate the undesired free stream bubbles in the flow a tank is placed upstream of the test section the vacuum pump is connected to the top of the tank and operated in the control room according to the testing pressure in the present study the pressure of the test section is 68 4 kpa the flow velocity at the test section is 8 07 m s the fluid used in the experiment is water and the temperature is close to 18 c under the test conditions in the present study a conical axisymmetric test body made of aluminum alloy with a ventilation slot at the nose is placed at the middle of the test section the schematic is shown in fig 2 it is a hollow cylindrical structure and the diameter is d 0 04 m and the length is l 274 mm the width of the ventilation slot is 1 mm two rows of circular holes 4 holes for each row are designed to avoid the non uniform of the air flow there are five pressure sensors inside the test body as shown in fig 2 the pressure transducer is installed on the internal adapter and communicates with outside through the hole on the test body surface to better measure the pressure in the flow field the pressure transducers are mounted flush with the surface of the test body the center point of transducer p1 is 129 mm from the test body head and the distance between two adjacent transducers is 15 mm 2 2 the multi field synchronous measurement system in this paper a multi field synchronous measurement system for cavitating flow is established the schematic diagram of the synchronous measurement method is shown in fig 3 using this measurement system the evolution of the cavity patterns pressure signals and ventilation flow rate can be obtained the evolution of the cavity patterns are captured by the photron fastcam high speed camera at a sampling frequency of 3000 fps and the exposure time is 0 33 ms due to the high frame rate and short exposure time it is necessary to increase the light intensity to ensure the clarity of the experimental photographs three led lights are used during the experiment to ensure sufficient background light the pressure transducer used in the experiment is kunshan shuangqiao cyg505all the maximal range for the pressure transducer is 200 kpa and the uncertainty is 0 25 the sampling frequency of the data acquisition system for unsteady pressure measurement is 10 khz meanwhile the gas flow rate is measured by the sevenstar d7 series flowmeter and the maximum uncertainty in the gas entrainment coefficient is about 2 the important dimensionless parameters cavitation number œÉ gas ventilation rate c q and pressure coefficient c p used in the present study are defined as 1 œÉ p p c 0 5 œÅ l v 2 2 c q q in v d 2 3 c p p p 0 5 œÅ l v 2 where p is the free stream pressure p is the local dynamic pressure inside the cavity p c is the cavity pressure œÅ is the liquid density v is the free stream velocity q in is the volume flow rate d is the diameter of the test body 3 results and discussions 3 1 evolution of the cavitating flow patterns many unstable flow patterns for the ventilated partial cavitating flows are observed in our experiments the names are foamy cavity fc continuous transparent and foamy cavity ctfc continuous transparent and asymmetric cavity ctac respectively as shown in fig 4 the definition of cavity regime is referred to karn and rosiejka 2017 and liu et al 2018 the fc is filled with dense foamy bubbles and characterized by the significant interaction between the air and water at the cavity interface affected by the interaction the air water interface is extremely turbulent note that the phrase of the foamy cavity was also used by karn et al 2016 qin et al 2019 etc meanwhile m√§kiharju et al 2017 and liu et al 2017 used cloud cavity to characterize such cavitation flow patterns in the present experiments we use the foamy cavity to analyze our results with increasing time the transparent cavity appears near the shoulder of the test mode for the ctfc regime the ventilated partial cavity undergoes flow transition and re attaches to form a laminar cavity interface moreover in the ctac regime gravitational effects are significant and the rear part of the cavity is asymmetric fig 5 shows the time series of the unsteady cavitation evolution of the ventilated partial cavitating flow at the ventilation rate c q 0 123 it is also worth mentioning that all ventilated cavitating runs are initialized with steady state in order to keep steady working conditions the water tunnel is run for a relatively long duration meanwhile repeated runs are performed to avoid the single instances problem of cavity patterns and pressure measurement in the present study we define the initial ventilation time as t 200 ms as the ventilation time increased from t 200 ms to t 216 ms a local ventilated cavity forms at the shoulder of the test body and the length gradually increase during this time the fc is foamed which is characterized by an almost opaque cavity it is interesting that due to the foam and bubbles there is no clear water gas interface in the fc stage from t 220 ms to t 256 ms numerous bubbles gather to form a continuous cavity at downstream and the length of the cavity increases significantly in the experiment as a result the flow pattern migrates to ctfc at t 220 ms there is a clear interface between the continuous transparent and foamy cavity it is noted that a re entrant jet appears in the front of the cavity and the subsequent impingement of the jet on the cavity interface hence the break off and shedding occur form t 236 ms to t 240 ms due to the formation of the re entrant jet note that the re entrant jet phenomenon has been demonstrated and found for the similar cavitating flows cases in our previous numerical and experimental investigations zhang et al 2017 sun et al 2019b it is also worth noting that a secondary break off and shedding happens from t 244 ms to t 248 ms at the closure of the attached cavity it indicates that there is a high intensity interaction between water and gas at the ctfc stage it is well known that the re entrant jet plays an important role in the flow structures of the ventilated cavity song 1961 kawakami and arndt 2011 wang et al 2015 which will be detailed discussed in section 3 3 from t 260 ms to t 284 ms the cavitating flow is relatively stable and the transparent region becomes larger at the front of the test body moreover as the cavity length increases the cavity shape at the closure region is asymmetric due to the gravity effect at low froude number conditions and the cavitation flow pattern migrates to ctac compared with the flow patterns at the fc ctfc and ctac stages we can find the asymmetric feature occurs at the ctac stage of the ventilated partial cavitating flow it indicates that the gravity effect plays a significant role in the globe ventilated cavitating flow structure it should be noted that for the ctac regime the cavity length should be more than half the length of the test body and characterized as a relatively stable cavity although we can also see asymmetric rear part of the cavity at 248 ms we still define it as the ctfc regime due to the occurrence of break off and cavity length limitation from t 284 ms to t 300 ms as the cavity grows further it becomes more transparent and stable the length of the cavity does not change significantly due to the gas leakage from the ventilated cavity is almost equal to the gas ventilation rate at the rear end of the cavity in order to further investigate the influence of the gas ventilation rate on the cavitating flow patterns fig 6 shows the time series of the unsteady cavitation evolution of the ventilated partial cavitating flow at the ventilation rate c q 0 131 the dashed line in fig 6 is used to trace the pressure transducer position of the test body and help further analyze the relationship between pressure evolution and the re entrant jet these pressure transducers at p1 to p5 are denoted by 1 to 5 respectively in fig 6 for a larger c q 0 131 as shown in fig 6 although there is an increase in cavity length the flow pattern appears the same fc ctfc and ctac also can be observed however by comparing the cavity pattern from t 212 ms to t 256 ms in figs 5 and 6 we find that the transparent cavity appears earlier for c q 0 131 than for c q 0 123 meanwhile the large scale cloud shedding is not obvious and more numerous bubbles gather around the rear of the cavity when c q 0 131 moreover it can be observed that the gravity effect is much more pronounced with c q 0 131 as can be seen from figs 5 and 6 at the initial stage of air ventilation when the cavity length is small the gravity effect is not significant a similar trend has also been found by ahn et al 2016 3 2 dynamic cavity topology and gas entrainment mechanism as the analysis of the previous results in section 3 1 we can find that the partial ventilated cavitating flow involves a complex cavity topology and evolution mechanism which integrates both gas filled cavity and bubble around the test body in fig 7 we present a typical geometry of a relatively fully developed partial ventilated cavity based on the experimental results of the ctac stage in the ventilated partial cavitation experiments the cavity presents a relatively stable detachment along with the test model three distinct cavity regimes are observed referred to as the gas filled cavity region gfcr re entrant jet region rejr and wake region wr the classification of different cavity regimes is based on the cavity topology mode as shown in fig 7 a the gfcr closer to the shoulder is almost entirely filled with gas and with a relatively transparent appearance and sharp water cavity interface meanwhile the cavity experiences a transition along the flow direction and it is frothy over the downstream part of the cavity length observed as an fcr it should be noted that the foamy region reveals that the cavity surface is not smooth and it is a predominant mode of air entrainment in the unsteady cavitating flows callenaere et al 2001 ahn et al 2017 moreover as shown in fig 7 a the wake region wr is characterized by a dense stream of entrained bubbles however the wr is concentrated on the upper side of the test model this is mainly due to the influence of gravity it is well known that the cavities have a higher pressure at their closure point which induces the re entrant flow in the cavity kinzel et al 2009 2017 and fronzeo et al 2019 found that the flow was redirected towards the front of the cavity at the re entrant portion of the cavity and recirculated until was eventually entrained into the interface and ejected from the cavity the observations of the re entrant flow and recirculation were also observed and ascertained in our previous studies zhang et al 2017 sun et al 2019b hence we present a schematic of the gas entrainment mechanism determined by the re entrant flow models of a partial ventilated cavity in fig 7 c based on the experimental observations see fig 7 a and b it should be noted that the recirculating vortex size is shown in fig 7 c is not an exact value according to chanson 1997 the gas leakage rate by re entrant flow is governed by the free surface gas entrainment mechanism in our experiments it should be noted that the re entrant jet flow is the cause of the surface disturbance in the foamy region moreover the re entrant jet flow is characterized by recirculating vortex and it is responsible for the cavity beak off arndt et al 2000 wang et al 2015 which gives birth to numerous small bubbles due to high turbulence subsequently small scale bubble group is then re circulated with the re entrant flow in the vortex region while the majority of bubbles entrain along the test body surface downstream by the main flow during this process high pressure occurs towards the middle of the cavity surface and is strong enough to cut the cavity into two parts when the partial cavitation is fully developed leroux et al 2004 in addition a high pressure zone has also been found in the region where the re entrant jet breaks the cavity by arndt et al 2000 hence the high pressure peak point is considered as the gas filled cavity closure position for the ventilated partial cavitating flow this will be discussed in detail in section 3 3 3 3 characteristics of the time dependent pressure fluctuations one of the most important results of the present tests is the unsteady pressure measurement inside the cavity to better address and understand the flow characteristics of ventilated cavitation quantitative pressure and qualitative cavity morphology comparisons between ventilated partial cavitation and natural cavitation are presented in fig 8 here the natural cavitation number and the ventilated cavitation number are both 0 52 the Œ¥p in fig 8 is defined as surface pressure minus time averaged pressure note that obvious break off and shedding can be seen for the ventilated partial cavitating flows whereas we can observe a stable cavity closure regime for the natural cavitation through the numerical analysis by yang et al 2018 the gas injection could push the vapor cavity away from the test body and subsequent shedding of more unsteady cavities the present experimental observations of natural cavitation and ventilated cavitation are consistent with those of yang et al 2018 moreover we can find that the range of Œ¥p fluctuations of natural cavitation is significantly greater than that of ventilated cavitation it indicates and further confirms that gas injection promotes cavitation and the pressure oscillation is alleviated fig 9 presents the instantaneous surface pressure data of the two cases as can be seen from fig 9 a and b the overall varying tendency of the pressure coefficient on the test body surface is similar from t 0 ms to t 200 ms the pressure coefficient is characterized as the bulk dynamic pressure after t 200 ms as the ventilation time increases the pressure increases gradually and strong pressure fluctuation can be observed the peak of the pressure wave rapidly propagates from transducer p1 to p5 along with the re entrant jet and the cascading shedding process as the cavity grows along the test body the local pressure inside the cavity drop below the bulk flow pressure this is caused by the ventilation gas interestingly as shown in fig 9 a two pressure peaks can be observed for transducer p3 p5 i ii iii however only one local pressure peak can be observed when c q 0 131 actually the effect of the pressure distribution on the re entrant flow is essential in the analysis of the cavitation instability as it is well known that the re entrant flow is the source of the cavitation instability callenaere et al 2001 strong cavitation instability at low gas ventilation rate can be seen according to the re entrant jet region and wake region in section 3 1 these observations are consistent with the experimental results by ahn et al 2017 moreover the peak occurs at different times for the transducers p3 p4 and p5 it indicates that the flow inside the cavity is more complex and more unsteady in the fully developed state with a smaller gas ventilation rate hence the increase in ventilation rate can improve the stability and pressure oscillation inside the cavity of ventilated partial cavitating flow the maximum pressure values of transducers p1 to p5 for c q 0 123 and c q 0 131 are summarized in table 1 it is interesting to see that the maximum pressure values of transducers p1 to p5 for c q 0 123 is larger than that of c q 0 131 it indicates that an increased gas ventilation rate can be expected to help reduce the load on the test body these results are sufficient to provide the general features of dynamic stability and evolution of ventilated partial cavitating flows in order to address the relationship between the cavitating flow and pressure distribution fig 10 presents the surface pressure distribution and cavity shape at the instants when each pressure transducer captures the peak pressure the definition of the cavity closure point is shown as fig 10 a to better analyze the results in fig 10 b we defined the axis x in descending order by the value the red dash line in fig 10 b and c represents the position of the transducers the blue dash line in fig 10 c represents the closure position of the cavity from fig 10 b it is clear that the time interval between two pressure peaks is almost 10 ms it indicates that the propagation velocity of pressure peak waves along the surface of the test model is constant moreover a relatively high pressure peak appears in the tail region of the ventilated cavity it is known that shedding of cloud cavitation can result in large unsteady loads on the cavitating object laberteaux and ceccio 2001 from the numerical results by owis and nayfeh 2003 kim et al 2012 and the time averaged experimental pressure data by rouse and mcnown 1948 of natural cavitation we can find that the surface pressure coefficient is from 0 2 to 0 3 it is interesting to note that the pressure peak location does not correspond to the cavity closure location in the present study usually for partial cavitating flow the closure region location is set in the vicinity of the pressure recovery peak leroux et al 2004 meanwhile the distribution of pressure pulses around cavity closure may significantly different according to the type of cavity le et al 1993a 1993b in the present study the red dash line in fig 10 c can represent the gas filled cavity region foamy region interface there occurs drastic interactions and presents significant unsteady characteristics hence high pressure values appear in this position and strong gas liquid interaction results in high pressure on the wall in the rear part of the ventilated partial cavity it is worth noting that a similar finding by ganesh et al 2016 is the pressure rise due to the passage of the shock inside the partial cavity in the experimental results of ganesh et al 2016 dynamic pressure increased by about 16 kpa in our experimental measurements the maximum recorded pressure peak is increased by about 15 kpa p5 c pmax 0 454 c q 0 131 compared to the bulk pressure in addition karn et al 2016 experimental measurements showed that the re entrant flow appeared to be unstable and undergoing positional changes at the rear part of the cavity meanwhile combined with our previous research zhang et al 2017 sun et al 2019b we conclude that pressure peak fluctuation is dominated by the unsteady feature of the re entrant flow 4 conclusions in this paper experimental studies are presented for a conical axisymmetric model at the development stage of the ventilated partial cavitating flow a high speed camera is used to investigate the evolution mechanism of the cavity patterns especially the unsteady pressure around the test body is measured by pressure transducers the following conclusions can be drawn from the results of this study 1 three unsteady flow patterns are observed at the development stage of ventilated partial cavitating flow namely foamy cavity fc continuous transparent and foamy cavity ctfc continuous transparent and asymmetric cavity ctac respectively interestingly the transparent cavity appears earlier and more numerous bubbles gather around the rear of the cavity for the larger gas ventilation rate 2 the re entrant jet plays an important role in the shedding process of ventilated partial cavitating flow and the shedding characteristics are closely related to the gas entrainment process three distinct cavity regimes are observed based on the cavity topology classification mode referred to as the gas filled cavity region gfcr re entrant jet region rejr and wake region wr 3 the increase in ventilation rate can improve the dynamic stability inside the cavity and can help reduce the load and pressure oscillation on the test body of the ventilated partial cavitating flow fewer pressure peaks appear under larger ventilation rate while greater measured peak values appear under smaller ventilation rate 4 the pressure peaks and the foamy cavity closure appear at different locations the maximum pressure values occur almost at the gas filled cavity closure region which is dominated by the unsteady feature of the re entrant flow as mentioned above many factors affect the pressure characteristics on the cavitation flow field regarding future work more experimental research and corresponding numerical simulation are needed to further advance the understanding of the relationship between dynamic pressure and cavitation evolution especially the pressure peak values considering cavitation number and gas injection rate in addition the cavity dynamics mechanism including the relationship between cavity interface topology and boundary layer developing at the interface will be further enhanced in the future acknowledgments this work was supported by the national natural science foundation of china 51709042 51579042 51679037 51639003 the natural science foundation of liaoning province of china 20180550619 the china postdoctoral science foundation 2018m631791 the recruitment program of global young experts d1007001 and the fundamental research funds for the central universities dut18rc 4 018 dut2017tb05 
22593,to determine the navigational states of an autonomous underwater vehicle auv a data analysis approach of auv navigation based on complex networks is proposed in this study first the noise in auv navigation data is eliminated by the projection density peaks clustering algorithm pro dpca and the weighted complex networks of the de noising data are constructed the nodes of networks characterize auv navigation states subsequently we compute the topological statistics of the complex networks to obtain the fluctuation patterns of the auv navigational data this is used to analyse auv navigational states for verifying the approach the heading data at different depths is analysed in our experiments the experimental results indicate that the topological statistics of the complex networks accurately describe the navigational states of auv at different depths keywords auv complex networks navigational states pro dpca 1 introduction an autonomous underwater vehicle auv is used to satisfy various needs of deep sea scientific investigations and environmental monitoring in a complex underwater environment because of its autonomy and flexibility ridao et al 2015 however when an auv is in operation complex external environments such as strong ocean currents significantly affect the reliability and health of the auv system with respect to overcoming the unfavourable factors it is important to precisely master the navigational states of an auv by analysing navigation data fluctuation with the help of historical monitoring data guo et al 2018a b an increase in the depth of analysis of auv navigational states ensures better control of the auv in complex underwater environments therefore it is important to examine auv navigational states in different underwater environments and this ensures that the auv realises long term autonomy and high adaptability the two types of models include qualitative and quantitative models the aforementioned models describe auv navigational states and ensure the health of navigation to a certain extent xiang proposed a dedicated two layer fault treatment system of an underwater robot the reliability system was constructed based on hierarchical fault tree model and fuzzy neural network and this ensured the safety of the underwater robotic vehicle with high value assets in a qualitative way xiang et al 2017 y zhou proposed an improved iterative clustering algorithm combined with the k mean to detect outliers the simulation results demonstrated the outlier detection algorithm based on grey prediction and kid exhibited higher accuracy when compared with the k mean and dbscan algorithms zhou et al 2016 zhang performed a few experiments of auv on the classification of the fuzzy qualitative state transformation type based on the gradient direction of system variables in a state transformation the results validated that the proposed method accurately describes fuzzy qualitative behaviour for different auv motions zhang et al 2013 however increases in the complexity of the system increase the combination of qualitative knowledge and thereby decrease the accuracy of the qualitative model davoodi et al 2017 when compared with qualitative models quantitative models are significantly better in terms of accurate measurement dearden built a software diagnosis model automatically in autosub 6000 that could be integrated with the hardware model to diagnose the complete system using a discrete fault diagnosis system livingstone 2 l2 the model aided in diagnosing real vehicle faults that could potentially lead to the loss of a vehicle dearden et al 2013 falkenberg demonstrated fault diagnosis on unmanned underwater vehicles using the residual signature of the detected faults and the change detection algorithm numerical simulations and sea trial data indicated results with an extremely favourable balance between detection and false alarm probabilities falkenberg et al 2014 liu proposed an improved grey prediction model for weak fault trend prediction of auv thruster by calculating the adjacent integral of the cumulative generating sequence based on the residual error sequence obtained from secondary prediction to modify original sequence forecast sequence the method ensured that the forecast results were adjustable liu 2016 although quantitative models adequately describe auv non linear systems there is a paucity of research given the complexity of auvs an auv is a complex system the modules of auv exhibit strong coupling and the marine environment also affects auv navigational states therefore an auv absolutely corresponds to a complex non linear system the qualitative and quantitative models do not fully satisfy the need to describe an auv system recently complex networks are proposed to describe complex non linear systems accurately and this aids in solving complex problems amaral and ottino 2016 the relationships between various parts of real complex systems are described by complex networks complex networks are constructed by considering the states of the system as nodes and transition between states as edges a better understanding of the essential characteristics of real systems is achieved by analysing the network structures therefore a complex network is widely used in several fields recently including economy medicine and tourism rend√≥n et al 2016 qing li l v 2016 jiang et al 2016 plumed et al 2016 the aforementioned studies indicate that complex networks can adequately describe the states of a complex system therefore in the present study complex networks are selected to describe auv navigational states the fluctuation patterns of small scale time segments are defined as nodes the transformations with time between different patterns are defined as the directional edge and the weight of an edge denotes the frequency of the transformation between the two patterns directed weighted complex networks are constructed based on the rule the topological statistics of complex networks are expected to change with differences in the navigational states therefore auv navigational states are precisely obtained by analysing the topological statistics of the network a high amount of noise exists in the original data and thus the projection density peaks clustering algorithm pro dpca is used to remove redundancy fluctuations in the data this ensures that complex networks better describe the navigational states of auv and the research is helpful to accurately monitor the navigation states of underwater vehicle it is of great significance to improve the health management of auv and fault diagnosis accuracy the remainder of the paper is organised as follows in section 2 an overview of experimental platform is introduced pro dpca and complex networks building approaches are introduced in section 3 section 4 focuses on the experiments and verifies the performance of the proposed algorithm using auv data at different depths finally the main conclusions of the study are presented in section 5 2 platform and experimental environment this research mainly focuses on accurate description of auv navigational states by analysing actual data from auv sensors the auv platform used in the study is sailfish 210 b which is a high performance device independently developed in our laboratory fig 1 the specifications of the auv are shown in table 1 additionally the auv equips an active intelligent perception mapping system and this effectively provides high quality investigation services in an unknown deep sea environment therefore navigation data of an auv is conveniently acquired based on the auv platform the auv is equipped with several navigational sensors including a gps digital compass ahrs and dvl in auv furthermore tcm 5 is a typical digital compass that offers angle data for sailfish auv it is sensitive to the influences of various electromagnetic and ferromagnetic interference despite features including light weight small size absence of error accumulation and several other advantages it is not possible to avoid the deviation between the true angle and measurement angle and this influences the accuracy of measurements a gps is a typical sensor used for navigation on water surfaces it provides both dynamic heading angles and accurate location information the ahrs 100 relies on three mems gyroscopes as opposed to using magnetic sensors when mems gyroscope measures angular velocity the capacitance changes based on the coriolis effect principle subsequently the angle is obtained by angular velocity integration guo et al 2018a b the heading velocity and depth data used in our experiments were respectively provided by ahrs dvl and ips the specifications of these navigation sensors are given in tables 2 4 the operating system of the auv is designed based on a moos platform the database of the entire auv corresponds to moos database moosdb and is embedded in an intelligent fusion module all the data should be sent to moosdb and utilised from the unit 3 approach 3 1 overview of the proposed approach in this study the main approach involves mapping auv navigational data to complex networks and to describe auv navigational states by analysing the fluctuation patterns of networks the process is shown in fig 2 when an auv is in operation ahrs provides data including heading pitch and roll based on the states of auv navigation subsequently all the data are input into moosdb to facilitate the subsequent analysis the data is converted into a symbol sequence via the symbolisation method however the marine environment is typically unstable and especially in long voyages surge acceleration deceleration and other factors inevitably result in noise dantas et al 2012 wang 2015 yan et al 2014 therefore an optimisation pre processing algorithm is used to reduce the adverse effects of the aforementioned noise subsequently a complex network is constructed finally various topological statistics of the networks are used to analyse the fluctuation patterns of data additionally the auv navigational states are described 3 2 pre processing algorithm the noise in auv actual data causes redundancy fluctuations in auv actual data and negatively affects the acquisition of turning points however a few turning points often contain critical changes of navigational states therefore an optimal pre processing algorithm pro dpca that retains the important turning points and removes the redundancy fluctuations is used in this study the algorithm includes the following three steps projection clustering and reconstruction 3 2 1 projection the long time series f 1 f 2 f i f n is considered as several short sequences with three lengths if the length of data is not a multiple of 3 it is added or cut off by a point without affecting the complete time series and each of the short sequences is projected into the two dimensional plane based on a mapping function as follows fig 3 where t i denotes the horizontal coordinates value of point i in the time series f i denotes the vertical coordinates value and u i v i are the coordinates after the projection 3 2 2 clustering clustering is based on the density peak clustering algorithm proposed by alex rodriguez and alessandro laio rodriguez and laio 2014 the main idea involves determining high density areas separated by the low density regions generally the clustering centre is surrounded by a few data points with low local density in a data set the distance between points with low local density and other points with high local density is always high therefore the ideal clustering effect is achieved by calculating the distance between the local density and high density point local density is defined as œÅ i and is as follows 3 œÅ i j œá d i j d c where œá x 1 0 i f i f x 0 o t h e r w i s e distance is defined as Œ¥ i as follows 4 Œ¥ i min j œÅ j œÅ i d i j a sample of clustering results is shown in fig 4 after clustering short sequences with small fluctuations are grouped into class one yellow points in fig 4 and those with larger fluctuations are classified into other classes based on the fluctuation patterns 3 2 3 reconstruction in 3 2 1 the original time series was divided into several fragments and the length of each fragment was 3 additionally the fragments are projected into two dimensional plane in this section the fragments are required to be restructured i e we put them from a two dimensional plane to a time series based on the clustering results the reconstruction function is as follows 5 z 3 i 2 3 i 1 3 i z 3 i 3 f 3 i 2 3 i 1 3 i c l a s s 1 o t h e r w e i s e where z denotes the time series after reconstruction and subsequently z 1 2 3 f 1 if the first point is classified as class1 the actual velocity data of an auv is discussed as an example the results of pro dpca are shown in fig 5 evidently it is superior in both aspects redundancy fluctuations are properly removed and most of the key turning points are simultaneously retained the pre processing algorithm aids in constructing a better complex network in the next section 3 3 complex networks construction after removing the noise in the actual data the processed data is used to construct the complex networks to determine the auv navigational states for the time series f 1 f 2 f i f n a few simple fluctuation patterns including increase h decrease l and invariant m are defined through a symbolisation based on the distance between the two adjacent points the fluctuation pattern process aids in examining the complexity of the data chen et al 2010 li et al 2008 6 s i h f i 1 f i 0 m f i 1 f i 0 l f i 1 f i 0 subsequently a sliding window length corresponding to n is defined to divide the symbol sequence into patterns the selection of n ensures that the fluctuation patterns exhibit the features of memory diversity and transitivity gao 2015 in summary the distance between the two adjacent points is transformed into a symbol sequence and the symbol sequence is subsequently divided into patterns thus we examine the changes in the fluctuation patterns with respect to time the process of defining the fluctuation patterns n 3 is shown in table 5 in table 5 the fluctuation patterns change with the sliding window therefore the sequence of the fluctuation patterns lml mlh lhh hhh is obtained and corresponds to the transformations in the fluctuation patterns with time lml mlh lhh hhh these nodes reflect the changes in the auv navigation states through the fluctuation pattern of the data there are different physical meanings for different kinds of data for example the node hhh represents a continuous increase in speed for the velocity data while the node lml represents the angle of the heading data and then decreases the laws of transformations reflect the auv navigational states hence the directed weight network is constructed to reveal the laws of the transformations the fluctuation patterns are defined as nodes of the network and the transformations are defined as edges as shown in fig 6 n 3 the weight of each edge corresponds to the frequency of transformation between the two types of pattern an et al 2014 by analysing the topological statistics in the complex networks the transformation laws of the fluctuation patterns are accurately and effectively mined 4 experiments 4 1 experiment background and data acquisition fixed navigation refers to navigation at a desired heading and is a common mission of auvs however given the influence of the marine environment an auv is unable to sail strictly at the desired heading the actual heading always repeatedly fluctuates near the desired heading through self adjustments of the auv control system xiong et al 2005 zhang 2009 the fluctuations near the desired heading change with differences in the marine environment therefore in the experiment heading data of an auv at different depths are used to analyse different auv navigational states the actual auv heading data is obtained through a series of experiments performed in the yellow sea as shown in fig 7 the experimental data were selected at different depths of 0 2 m and 3 4 m additionally auv maintained a speed of 1 m s when it obtained the heading data the velocity data is shown in fig 8 fig 9 demonstrates the depth data and fig 10 illustrates the heading data in this paper we mainly focus on the construction and analysis of complex networks for the heading data 4 2 construction of complex networks the pre processing algorithm is utilised to remove the noise three different pre processing algorithms are used in our paper for comparison since the proposed algorithm divides the time series into multiple segments of length 3 the medflit and paa algorithms with window 3 are selected for comparison then a complex network of data from different preprocessing algorithms is built pro dpca is used to pre process the actual heading data to remove noise fig 11 subsequently directed weighted complex networks are constructed by selecting different sliding window length n based on the approach in section3 fig 12 shows the complex networks at a depth of 0 2 m when n corresponds to 3 5 and 10 additionally fig 13 shows the results at depths of 3 4 m comparing figs 11 and 12 and 13 the results show that both algorithms can remove some small scale fluctuations to some extent as the window scale of paa and medflit becomes larger the smoothness of the data results is more obvious and the performance of paa algorithm is better than the medflit algorithm the pro dpca algorithm proposed in this paper smoothes out the cumbersome fluctuations and preserves the main fluctuations of the original data figs 14 17 show the topology diagram of the complex network constructed with data processed by different pre processing algorithms comparing the d e f of figs 12 and 13 it can be found that the medflit and paa algorithms perform almost the same in underwater 3 4 m area however the number of nodes in the paa algorithm network is less in the 0 2 m area the results of the medflit algorithm are not ideal especially when n 10 the number of nodes is too large this indicates that key nodes in the network are not easily discovered also in the network of the paa algorithm when n 10 the structure of the network is quite different from that of n 3 and n 5 which is messy the network constructed by the pre processing algorithm proposed in this paper has a more suitable number of nodes which can characterize auv navigation states better moreover when n is increased the network still retains a certain structure and has better robustness a detailed comparison between the different algorithms will be shown in the next section through the calculation of topological statistics in addition in the window selection of the pattern combination however not all sliding window lengths n are suitable for use in the present study therefore node strength is used to select an optimal n to ensure that the networks effectively describe the auv navigational states node strength is a comprehensive indicator of the information for a node in the directed weighted network node strength focuses on the number of nodes that are adjacent to a node and also the number of times that the node is connected therefore increases in the strength of a node increase the importance of the node in the network the nodes with higher strength are termed as key nodes that significantly affect the description of the auv navigational states node strength n s i is defined as follows 7 n s i j n œâ i j where n s i denotes the strength of node i n denotes the set of neighbours of nodes and œâ i j represents the weight between nodes i and j fig 18 shows the plot of strength values of nodes with respect to the rank r computed based on the networks in figs 14 and 15 rank r denotes the serial numbers that are sorted by their node strength values when n corresponds to 3 and 5 the strength of a few nodes exceeds 50 or even 70 the nodes are key nodes that are evidently observed however network exhibits homogeneity when the sliding window length increases to 10 thus the key nodes are not found easily therefore the sliding window lengths n 3 a n d n 5 are suitable in the experiments to determine the relationship between the structures of networks and auv navigational states various topological statistics are computed and analysed in the next section 4 3 topological statistics 4 3 1 proportion of key nodes in complex networks nodes with higher strength are key nodes key nodes represent important fluctuation patterns that determine auv navigational states therefore node strength and its proportion of key nodes at different depths of water are calculated and the results are shown in table 6 as shown in table 6 in the networks based on medflit algorithm and paa algorithm mmm node disappear and more lll and hhh nodes exist which means that these networks only can describe the fluctuation patterns of the rise and fall therefore they cannot reflect the differences between the navigation states of auv at different depths the reason is that these two algorithms cannot completely smooth out cumbersome fluctuations in terms of the network pre processed by the pro dpca algorithm irrespective of the type of depth the top three nodes of highest strength in the networks n 3 correspond to mmm hhh and lll although their respective proportions are different at the same depth the proportion of hhh and lll are almost equal the proportion of hhh is 0 1 and that of lll is 0 09 when the depth of water is 0 2 m and the same situation is observed at a depth of 3 4 m the phenomenon implies that when the depth is fixed the data fluctuates in a certain range and the amplitude of the rise and fall is almost identical this is consistent with the actual data the same is also true for the auv navigation and the actual heading continues to fluctuate near the desired heading conversely a comparison of the proportion of key nodes at different depths indicates that the proportion of node hhh at a depth of 3 4 m is approximately 3 times that at 0 2 m and the same situation is observed for node lll for the depth of 3 4 m the results indicate that the number of large scale repeat fluctuations is thrice that at 0 2 m and this is consistent with the original data fig 10 the aforementioned analysis indicates that the auv navigation states are mainly reflected by the key nodes of the complex networks additionally repeated large scale fluctuations in the heading data are accurately described by the proportion of the strength of key nodes in addition the above experimental results show that compared with medflit algorithm and paa algorithm the complex network constructed after data processing with the pro dpca algorithm proposed in this paper can better characterize the difference in navigation state of the auv therefore in the following experiments we will only focus on the topological analysis of the complex networks constructed based on the pro dpca algorithm proposed in this paper 4 3 2 self transformation probability of key nodes large scale repeats fluctuations of auv navigational states are depicted by the strength proportion of key nodes however the transformation between the nodes shows the details of the fluctuations specifically the self transformation of key nodes reflects the stability of the fluctuations the direct transformation between node i and node j is defined as p r i j as follows 8 p r i j œâ i j n s i where œâ i j denotes the weight between nodes i and j and n s i denotes the strength of the node i when i j the formula expresses the self transformation probability of nodes the self transformation probability of key nodes at different depths of water are calculated and the results are shown in table 7 as shown in table 7 the probability of self transformation for all the key nodes exceeds 50 the result implies that the pattern represented by the key nodes exhibits a high probability of maintaining a continuous state for example the self transformation hhh hhh denotes increases in the state of keeping fig 11 red box however self transformation of node hhh at the depth of 3 4 m significantly increases when compared with that at the depth of 0 2 m and the same situation is observed for the node lll the aforementioned situations indicate that the stability of the heading changes in the deep water exceeds that on the surface of water during the course of heading adjustment this is potentially because the impact of waves is more significant on the surface of water than in deep water therefore the heading must continue to swing for a short period of time thereby leading to a decrease in stability the aforementioned analysis indicates that self transformation probability of key nodes is an important indicator to analyse the stability of auv navigation states and this reveals the transformation of the same navigational states on a small time scale 4 3 3 average shortest path the analysis of self transformation probability of key nodes reveals the laws of transformation between the same patterns simultaneously the transformation between the different patterns are also important in complex networks the shortest path refers to the minimum number of edges required to connect any two nodes and is used to study the transformation between different nodes for a weighted complex network an improved dijkstra algorithm is used to calculate the shortest path first each weight of the network is normalised based on the average weight subsequently based on the reciprocal of normalised weights the shortest path of the weighted complex network is accurately calculated opsahl et al 2010 an example of calculating the shortest path is shown in fig 19 where l b c 1 2 3 1 67 thus the shortest path l i j is defined as follows 9 l i j m i n m n n m n a v g œâ n œâ m n where n denotes the set of nodes between node i to j œâ m n denotes the weight of edge from node m to n and l i j denotes the shortest path of nodes from i to j for a system the frequency of states changing is reflected by the average shortest path l of the complex network and the average shortest path is defined as follows 10 l 1 n n 1 i j l i j where n denotes the number of whole nodes in the network the shortest path l i j of each node of the complex networks at different depths of water is computed the minimum value of the shortest path is 1 and the maximum values are 19 3 at a depth of 0 2 m and 39 6 at depths of 3 4 m the average of shortest path is 6 32 at a depth of 0 2 m and 13 37 at depths of 3 4 m the aforementioned results indicate that the average shortest path in deep water is longer than that on the surface of water the reason is that when auv sails on the surface of water the changes in the navigational states fig 11 green circles are more frequent than that when it sails in deep water the transformation between different patterns are analysed by examining the shortest path the result indicates that the changes in the auv navigational states on the surface of water are more frequent than that in deep water this confirms the conclusion in section 4 3 2 from an alternate viewpoint 4 3 4 community division community division is another important part of complex networks research the study of community structure makes it easier to understand the function of networks discover the hidden rules of transformation between different patterns and even predict the behaviour of a network networks with a sliding window length of 5 are selected to analyse the community structure the fast newman fn algorithm was proposed by newman in 2003 and subsequently improved in 2006 newman 2004 2006 it is used to determine the community structures of the complex networks as shown in fig 20 the network constructed by heading data at a depth of 0 2 m fig 20 a is divided into three communities with an approximate number of nodes the nodes in community 1 denote the patterns that rarely contain m additionally the nodes in community 3 denote the patterns that rarely contain h the network constructed by heading data at depth of 3 4 m fig 20 b is divided into two communities nodes in community 1 represent the patterns without m evidently the number of nodes in community 1 are fewer than that in community 2 in summary the rule of transformation between different patterns is revealed as follows nodes that represent similar patterns are typically divided into a same community and they are easier to transform into each other conversely the nodes that connect different communities always correspond to the key nodes such as lllll node 1 in fig 20 a and b and hhhhh node 50 in fig 20 a and node 11 in fig 20 b based on the property another rule is revealed in which the key nodes exhibit the function of connecting different communities the rules are used to describe the change in auv navigational states the change in auv navigation states is a slow varying process the end of a major navigational state may indicate that auv converts to another type of navigational state the changing rules contribute to predicting auv navigational states over a period of time 5 conclusions in this study a new data analysis approach for auv navigation based on the complex networks was proposed to determine the navigational states of auv first an optimised pre processing algorithm was applied to remove the noise of actual data subsequently directed weighted complex networks of processed heading data at different depths were constructed finally various topological statistics of complex networks that describe the auv navigational states at different water depths were analysed in the experiments the experiments show the advantages of the pro dpca algorithm in describing the navigation states of auv and indicate that the networks can revealed the potential rules of the auv navigational states the conclusions were as follows 1 the key nodes of the complex networks that represented the key patterns of heading data described the main navigational states of an auv 2 the proportion of the strength of key nodes described the large scale repeats fluctuations of auv heading data there were more large scale repeats fluctuations in the deep water than that on the surface of water 3 the analysis of the self transition of key nodes and the shortest path depicted the transformation between the auv navigational states from a small scale viewpoint the results indicated that the changes in the auv navigational states on the surface of water are more frequent than that in deep water 4 the results of community division fully revealed the rules for changes in the auv navigational states a future study will focus on analysing other types of navigational data moreover navigational states in other different environments are considered to increase the reliability of auvs acknowledgement this study is partially supported by the national natural science foundation of china 41176076 31202036 51379198 and the high technology research and development program of china 2016yfc0301401 
22593,to determine the navigational states of an autonomous underwater vehicle auv a data analysis approach of auv navigation based on complex networks is proposed in this study first the noise in auv navigation data is eliminated by the projection density peaks clustering algorithm pro dpca and the weighted complex networks of the de noising data are constructed the nodes of networks characterize auv navigation states subsequently we compute the topological statistics of the complex networks to obtain the fluctuation patterns of the auv navigational data this is used to analyse auv navigational states for verifying the approach the heading data at different depths is analysed in our experiments the experimental results indicate that the topological statistics of the complex networks accurately describe the navigational states of auv at different depths keywords auv complex networks navigational states pro dpca 1 introduction an autonomous underwater vehicle auv is used to satisfy various needs of deep sea scientific investigations and environmental monitoring in a complex underwater environment because of its autonomy and flexibility ridao et al 2015 however when an auv is in operation complex external environments such as strong ocean currents significantly affect the reliability and health of the auv system with respect to overcoming the unfavourable factors it is important to precisely master the navigational states of an auv by analysing navigation data fluctuation with the help of historical monitoring data guo et al 2018a b an increase in the depth of analysis of auv navigational states ensures better control of the auv in complex underwater environments therefore it is important to examine auv navigational states in different underwater environments and this ensures that the auv realises long term autonomy and high adaptability the two types of models include qualitative and quantitative models the aforementioned models describe auv navigational states and ensure the health of navigation to a certain extent xiang proposed a dedicated two layer fault treatment system of an underwater robot the reliability system was constructed based on hierarchical fault tree model and fuzzy neural network and this ensured the safety of the underwater robotic vehicle with high value assets in a qualitative way xiang et al 2017 y zhou proposed an improved iterative clustering algorithm combined with the k mean to detect outliers the simulation results demonstrated the outlier detection algorithm based on grey prediction and kid exhibited higher accuracy when compared with the k mean and dbscan algorithms zhou et al 2016 zhang performed a few experiments of auv on the classification of the fuzzy qualitative state transformation type based on the gradient direction of system variables in a state transformation the results validated that the proposed method accurately describes fuzzy qualitative behaviour for different auv motions zhang et al 2013 however increases in the complexity of the system increase the combination of qualitative knowledge and thereby decrease the accuracy of the qualitative model davoodi et al 2017 when compared with qualitative models quantitative models are significantly better in terms of accurate measurement dearden built a software diagnosis model automatically in autosub 6000 that could be integrated with the hardware model to diagnose the complete system using a discrete fault diagnosis system livingstone 2 l2 the model aided in diagnosing real vehicle faults that could potentially lead to the loss of a vehicle dearden et al 2013 falkenberg demonstrated fault diagnosis on unmanned underwater vehicles using the residual signature of the detected faults and the change detection algorithm numerical simulations and sea trial data indicated results with an extremely favourable balance between detection and false alarm probabilities falkenberg et al 2014 liu proposed an improved grey prediction model for weak fault trend prediction of auv thruster by calculating the adjacent integral of the cumulative generating sequence based on the residual error sequence obtained from secondary prediction to modify original sequence forecast sequence the method ensured that the forecast results were adjustable liu 2016 although quantitative models adequately describe auv non linear systems there is a paucity of research given the complexity of auvs an auv is a complex system the modules of auv exhibit strong coupling and the marine environment also affects auv navigational states therefore an auv absolutely corresponds to a complex non linear system the qualitative and quantitative models do not fully satisfy the need to describe an auv system recently complex networks are proposed to describe complex non linear systems accurately and this aids in solving complex problems amaral and ottino 2016 the relationships between various parts of real complex systems are described by complex networks complex networks are constructed by considering the states of the system as nodes and transition between states as edges a better understanding of the essential characteristics of real systems is achieved by analysing the network structures therefore a complex network is widely used in several fields recently including economy medicine and tourism rend√≥n et al 2016 qing li l v 2016 jiang et al 2016 plumed et al 2016 the aforementioned studies indicate that complex networks can adequately describe the states of a complex system therefore in the present study complex networks are selected to describe auv navigational states the fluctuation patterns of small scale time segments are defined as nodes the transformations with time between different patterns are defined as the directional edge and the weight of an edge denotes the frequency of the transformation between the two patterns directed weighted complex networks are constructed based on the rule the topological statistics of complex networks are expected to change with differences in the navigational states therefore auv navigational states are precisely obtained by analysing the topological statistics of the network a high amount of noise exists in the original data and thus the projection density peaks clustering algorithm pro dpca is used to remove redundancy fluctuations in the data this ensures that complex networks better describe the navigational states of auv and the research is helpful to accurately monitor the navigation states of underwater vehicle it is of great significance to improve the health management of auv and fault diagnosis accuracy the remainder of the paper is organised as follows in section 2 an overview of experimental platform is introduced pro dpca and complex networks building approaches are introduced in section 3 section 4 focuses on the experiments and verifies the performance of the proposed algorithm using auv data at different depths finally the main conclusions of the study are presented in section 5 2 platform and experimental environment this research mainly focuses on accurate description of auv navigational states by analysing actual data from auv sensors the auv platform used in the study is sailfish 210 b which is a high performance device independently developed in our laboratory fig 1 the specifications of the auv are shown in table 1 additionally the auv equips an active intelligent perception mapping system and this effectively provides high quality investigation services in an unknown deep sea environment therefore navigation data of an auv is conveniently acquired based on the auv platform the auv is equipped with several navigational sensors including a gps digital compass ahrs and dvl in auv furthermore tcm 5 is a typical digital compass that offers angle data for sailfish auv it is sensitive to the influences of various electromagnetic and ferromagnetic interference despite features including light weight small size absence of error accumulation and several other advantages it is not possible to avoid the deviation between the true angle and measurement angle and this influences the accuracy of measurements a gps is a typical sensor used for navigation on water surfaces it provides both dynamic heading angles and accurate location information the ahrs 100 relies on three mems gyroscopes as opposed to using magnetic sensors when mems gyroscope measures angular velocity the capacitance changes based on the coriolis effect principle subsequently the angle is obtained by angular velocity integration guo et al 2018a b the heading velocity and depth data used in our experiments were respectively provided by ahrs dvl and ips the specifications of these navigation sensors are given in tables 2 4 the operating system of the auv is designed based on a moos platform the database of the entire auv corresponds to moos database moosdb and is embedded in an intelligent fusion module all the data should be sent to moosdb and utilised from the unit 3 approach 3 1 overview of the proposed approach in this study the main approach involves mapping auv navigational data to complex networks and to describe auv navigational states by analysing the fluctuation patterns of networks the process is shown in fig 2 when an auv is in operation ahrs provides data including heading pitch and roll based on the states of auv navigation subsequently all the data are input into moosdb to facilitate the subsequent analysis the data is converted into a symbol sequence via the symbolisation method however the marine environment is typically unstable and especially in long voyages surge acceleration deceleration and other factors inevitably result in noise dantas et al 2012 wang 2015 yan et al 2014 therefore an optimisation pre processing algorithm is used to reduce the adverse effects of the aforementioned noise subsequently a complex network is constructed finally various topological statistics of the networks are used to analyse the fluctuation patterns of data additionally the auv navigational states are described 3 2 pre processing algorithm the noise in auv actual data causes redundancy fluctuations in auv actual data and negatively affects the acquisition of turning points however a few turning points often contain critical changes of navigational states therefore an optimal pre processing algorithm pro dpca that retains the important turning points and removes the redundancy fluctuations is used in this study the algorithm includes the following three steps projection clustering and reconstruction 3 2 1 projection the long time series f 1 f 2 f i f n is considered as several short sequences with three lengths if the length of data is not a multiple of 3 it is added or cut off by a point without affecting the complete time series and each of the short sequences is projected into the two dimensional plane based on a mapping function as follows fig 3 where t i denotes the horizontal coordinates value of point i in the time series f i denotes the vertical coordinates value and u i v i are the coordinates after the projection 3 2 2 clustering clustering is based on the density peak clustering algorithm proposed by alex rodriguez and alessandro laio rodriguez and laio 2014 the main idea involves determining high density areas separated by the low density regions generally the clustering centre is surrounded by a few data points with low local density in a data set the distance between points with low local density and other points with high local density is always high therefore the ideal clustering effect is achieved by calculating the distance between the local density and high density point local density is defined as œÅ i and is as follows 3 œÅ i j œá d i j d c where œá x 1 0 i f i f x 0 o t h e r w i s e distance is defined as Œ¥ i as follows 4 Œ¥ i min j œÅ j œÅ i d i j a sample of clustering results is shown in fig 4 after clustering short sequences with small fluctuations are grouped into class one yellow points in fig 4 and those with larger fluctuations are classified into other classes based on the fluctuation patterns 3 2 3 reconstruction in 3 2 1 the original time series was divided into several fragments and the length of each fragment was 3 additionally the fragments are projected into two dimensional plane in this section the fragments are required to be restructured i e we put them from a two dimensional plane to a time series based on the clustering results the reconstruction function is as follows 5 z 3 i 2 3 i 1 3 i z 3 i 3 f 3 i 2 3 i 1 3 i c l a s s 1 o t h e r w e i s e where z denotes the time series after reconstruction and subsequently z 1 2 3 f 1 if the first point is classified as class1 the actual velocity data of an auv is discussed as an example the results of pro dpca are shown in fig 5 evidently it is superior in both aspects redundancy fluctuations are properly removed and most of the key turning points are simultaneously retained the pre processing algorithm aids in constructing a better complex network in the next section 3 3 complex networks construction after removing the noise in the actual data the processed data is used to construct the complex networks to determine the auv navigational states for the time series f 1 f 2 f i f n a few simple fluctuation patterns including increase h decrease l and invariant m are defined through a symbolisation based on the distance between the two adjacent points the fluctuation pattern process aids in examining the complexity of the data chen et al 2010 li et al 2008 6 s i h f i 1 f i 0 m f i 1 f i 0 l f i 1 f i 0 subsequently a sliding window length corresponding to n is defined to divide the symbol sequence into patterns the selection of n ensures that the fluctuation patterns exhibit the features of memory diversity and transitivity gao 2015 in summary the distance between the two adjacent points is transformed into a symbol sequence and the symbol sequence is subsequently divided into patterns thus we examine the changes in the fluctuation patterns with respect to time the process of defining the fluctuation patterns n 3 is shown in table 5 in table 5 the fluctuation patterns change with the sliding window therefore the sequence of the fluctuation patterns lml mlh lhh hhh is obtained and corresponds to the transformations in the fluctuation patterns with time lml mlh lhh hhh these nodes reflect the changes in the auv navigation states through the fluctuation pattern of the data there are different physical meanings for different kinds of data for example the node hhh represents a continuous increase in speed for the velocity data while the node lml represents the angle of the heading data and then decreases the laws of transformations reflect the auv navigational states hence the directed weight network is constructed to reveal the laws of the transformations the fluctuation patterns are defined as nodes of the network and the transformations are defined as edges as shown in fig 6 n 3 the weight of each edge corresponds to the frequency of transformation between the two types of pattern an et al 2014 by analysing the topological statistics in the complex networks the transformation laws of the fluctuation patterns are accurately and effectively mined 4 experiments 4 1 experiment background and data acquisition fixed navigation refers to navigation at a desired heading and is a common mission of auvs however given the influence of the marine environment an auv is unable to sail strictly at the desired heading the actual heading always repeatedly fluctuates near the desired heading through self adjustments of the auv control system xiong et al 2005 zhang 2009 the fluctuations near the desired heading change with differences in the marine environment therefore in the experiment heading data of an auv at different depths are used to analyse different auv navigational states the actual auv heading data is obtained through a series of experiments performed in the yellow sea as shown in fig 7 the experimental data were selected at different depths of 0 2 m and 3 4 m additionally auv maintained a speed of 1 m s when it obtained the heading data the velocity data is shown in fig 8 fig 9 demonstrates the depth data and fig 10 illustrates the heading data in this paper we mainly focus on the construction and analysis of complex networks for the heading data 4 2 construction of complex networks the pre processing algorithm is utilised to remove the noise three different pre processing algorithms are used in our paper for comparison since the proposed algorithm divides the time series into multiple segments of length 3 the medflit and paa algorithms with window 3 are selected for comparison then a complex network of data from different preprocessing algorithms is built pro dpca is used to pre process the actual heading data to remove noise fig 11 subsequently directed weighted complex networks are constructed by selecting different sliding window length n based on the approach in section3 fig 12 shows the complex networks at a depth of 0 2 m when n corresponds to 3 5 and 10 additionally fig 13 shows the results at depths of 3 4 m comparing figs 11 and 12 and 13 the results show that both algorithms can remove some small scale fluctuations to some extent as the window scale of paa and medflit becomes larger the smoothness of the data results is more obvious and the performance of paa algorithm is better than the medflit algorithm the pro dpca algorithm proposed in this paper smoothes out the cumbersome fluctuations and preserves the main fluctuations of the original data figs 14 17 show the topology diagram of the complex network constructed with data processed by different pre processing algorithms comparing the d e f of figs 12 and 13 it can be found that the medflit and paa algorithms perform almost the same in underwater 3 4 m area however the number of nodes in the paa algorithm network is less in the 0 2 m area the results of the medflit algorithm are not ideal especially when n 10 the number of nodes is too large this indicates that key nodes in the network are not easily discovered also in the network of the paa algorithm when n 10 the structure of the network is quite different from that of n 3 and n 5 which is messy the network constructed by the pre processing algorithm proposed in this paper has a more suitable number of nodes which can characterize auv navigation states better moreover when n is increased the network still retains a certain structure and has better robustness a detailed comparison between the different algorithms will be shown in the next section through the calculation of topological statistics in addition in the window selection of the pattern combination however not all sliding window lengths n are suitable for use in the present study therefore node strength is used to select an optimal n to ensure that the networks effectively describe the auv navigational states node strength is a comprehensive indicator of the information for a node in the directed weighted network node strength focuses on the number of nodes that are adjacent to a node and also the number of times that the node is connected therefore increases in the strength of a node increase the importance of the node in the network the nodes with higher strength are termed as key nodes that significantly affect the description of the auv navigational states node strength n s i is defined as follows 7 n s i j n œâ i j where n s i denotes the strength of node i n denotes the set of neighbours of nodes and œâ i j represents the weight between nodes i and j fig 18 shows the plot of strength values of nodes with respect to the rank r computed based on the networks in figs 14 and 15 rank r denotes the serial numbers that are sorted by their node strength values when n corresponds to 3 and 5 the strength of a few nodes exceeds 50 or even 70 the nodes are key nodes that are evidently observed however network exhibits homogeneity when the sliding window length increases to 10 thus the key nodes are not found easily therefore the sliding window lengths n 3 a n d n 5 are suitable in the experiments to determine the relationship between the structures of networks and auv navigational states various topological statistics are computed and analysed in the next section 4 3 topological statistics 4 3 1 proportion of key nodes in complex networks nodes with higher strength are key nodes key nodes represent important fluctuation patterns that determine auv navigational states therefore node strength and its proportion of key nodes at different depths of water are calculated and the results are shown in table 6 as shown in table 6 in the networks based on medflit algorithm and paa algorithm mmm node disappear and more lll and hhh nodes exist which means that these networks only can describe the fluctuation patterns of the rise and fall therefore they cannot reflect the differences between the navigation states of auv at different depths the reason is that these two algorithms cannot completely smooth out cumbersome fluctuations in terms of the network pre processed by the pro dpca algorithm irrespective of the type of depth the top three nodes of highest strength in the networks n 3 correspond to mmm hhh and lll although their respective proportions are different at the same depth the proportion of hhh and lll are almost equal the proportion of hhh is 0 1 and that of lll is 0 09 when the depth of water is 0 2 m and the same situation is observed at a depth of 3 4 m the phenomenon implies that when the depth is fixed the data fluctuates in a certain range and the amplitude of the rise and fall is almost identical this is consistent with the actual data the same is also true for the auv navigation and the actual heading continues to fluctuate near the desired heading conversely a comparison of the proportion of key nodes at different depths indicates that the proportion of node hhh at a depth of 3 4 m is approximately 3 times that at 0 2 m and the same situation is observed for node lll for the depth of 3 4 m the results indicate that the number of large scale repeat fluctuations is thrice that at 0 2 m and this is consistent with the original data fig 10 the aforementioned analysis indicates that the auv navigation states are mainly reflected by the key nodes of the complex networks additionally repeated large scale fluctuations in the heading data are accurately described by the proportion of the strength of key nodes in addition the above experimental results show that compared with medflit algorithm and paa algorithm the complex network constructed after data processing with the pro dpca algorithm proposed in this paper can better characterize the difference in navigation state of the auv therefore in the following experiments we will only focus on the topological analysis of the complex networks constructed based on the pro dpca algorithm proposed in this paper 4 3 2 self transformation probability of key nodes large scale repeats fluctuations of auv navigational states are depicted by the strength proportion of key nodes however the transformation between the nodes shows the details of the fluctuations specifically the self transformation of key nodes reflects the stability of the fluctuations the direct transformation between node i and node j is defined as p r i j as follows 8 p r i j œâ i j n s i where œâ i j denotes the weight between nodes i and j and n s i denotes the strength of the node i when i j the formula expresses the self transformation probability of nodes the self transformation probability of key nodes at different depths of water are calculated and the results are shown in table 7 as shown in table 7 the probability of self transformation for all the key nodes exceeds 50 the result implies that the pattern represented by the key nodes exhibits a high probability of maintaining a continuous state for example the self transformation hhh hhh denotes increases in the state of keeping fig 11 red box however self transformation of node hhh at the depth of 3 4 m significantly increases when compared with that at the depth of 0 2 m and the same situation is observed for the node lll the aforementioned situations indicate that the stability of the heading changes in the deep water exceeds that on the surface of water during the course of heading adjustment this is potentially because the impact of waves is more significant on the surface of water than in deep water therefore the heading must continue to swing for a short period of time thereby leading to a decrease in stability the aforementioned analysis indicates that self transformation probability of key nodes is an important indicator to analyse the stability of auv navigation states and this reveals the transformation of the same navigational states on a small time scale 4 3 3 average shortest path the analysis of self transformation probability of key nodes reveals the laws of transformation between the same patterns simultaneously the transformation between the different patterns are also important in complex networks the shortest path refers to the minimum number of edges required to connect any two nodes and is used to study the transformation between different nodes for a weighted complex network an improved dijkstra algorithm is used to calculate the shortest path first each weight of the network is normalised based on the average weight subsequently based on the reciprocal of normalised weights the shortest path of the weighted complex network is accurately calculated opsahl et al 2010 an example of calculating the shortest path is shown in fig 19 where l b c 1 2 3 1 67 thus the shortest path l i j is defined as follows 9 l i j m i n m n n m n a v g œâ n œâ m n where n denotes the set of nodes between node i to j œâ m n denotes the weight of edge from node m to n and l i j denotes the shortest path of nodes from i to j for a system the frequency of states changing is reflected by the average shortest path l of the complex network and the average shortest path is defined as follows 10 l 1 n n 1 i j l i j where n denotes the number of whole nodes in the network the shortest path l i j of each node of the complex networks at different depths of water is computed the minimum value of the shortest path is 1 and the maximum values are 19 3 at a depth of 0 2 m and 39 6 at depths of 3 4 m the average of shortest path is 6 32 at a depth of 0 2 m and 13 37 at depths of 3 4 m the aforementioned results indicate that the average shortest path in deep water is longer than that on the surface of water the reason is that when auv sails on the surface of water the changes in the navigational states fig 11 green circles are more frequent than that when it sails in deep water the transformation between different patterns are analysed by examining the shortest path the result indicates that the changes in the auv navigational states on the surface of water are more frequent than that in deep water this confirms the conclusion in section 4 3 2 from an alternate viewpoint 4 3 4 community division community division is another important part of complex networks research the study of community structure makes it easier to understand the function of networks discover the hidden rules of transformation between different patterns and even predict the behaviour of a network networks with a sliding window length of 5 are selected to analyse the community structure the fast newman fn algorithm was proposed by newman in 2003 and subsequently improved in 2006 newman 2004 2006 it is used to determine the community structures of the complex networks as shown in fig 20 the network constructed by heading data at a depth of 0 2 m fig 20 a is divided into three communities with an approximate number of nodes the nodes in community 1 denote the patterns that rarely contain m additionally the nodes in community 3 denote the patterns that rarely contain h the network constructed by heading data at depth of 3 4 m fig 20 b is divided into two communities nodes in community 1 represent the patterns without m evidently the number of nodes in community 1 are fewer than that in community 2 in summary the rule of transformation between different patterns is revealed as follows nodes that represent similar patterns are typically divided into a same community and they are easier to transform into each other conversely the nodes that connect different communities always correspond to the key nodes such as lllll node 1 in fig 20 a and b and hhhhh node 50 in fig 20 a and node 11 in fig 20 b based on the property another rule is revealed in which the key nodes exhibit the function of connecting different communities the rules are used to describe the change in auv navigational states the change in auv navigation states is a slow varying process the end of a major navigational state may indicate that auv converts to another type of navigational state the changing rules contribute to predicting auv navigational states over a period of time 5 conclusions in this study a new data analysis approach for auv navigation based on the complex networks was proposed to determine the navigational states of auv first an optimised pre processing algorithm was applied to remove the noise of actual data subsequently directed weighted complex networks of processed heading data at different depths were constructed finally various topological statistics of complex networks that describe the auv navigational states at different water depths were analysed in the experiments the experiments show the advantages of the pro dpca algorithm in describing the navigation states of auv and indicate that the networks can revealed the potential rules of the auv navigational states the conclusions were as follows 1 the key nodes of the complex networks that represented the key patterns of heading data described the main navigational states of an auv 2 the proportion of the strength of key nodes described the large scale repeats fluctuations of auv heading data there were more large scale repeats fluctuations in the deep water than that on the surface of water 3 the analysis of the self transition of key nodes and the shortest path depicted the transformation between the auv navigational states from a small scale viewpoint the results indicated that the changes in the auv navigational states on the surface of water are more frequent than that in deep water 4 the results of community division fully revealed the rules for changes in the auv navigational states a future study will focus on analysing other types of navigational data moreover navigational states in other different environments are considered to increase the reliability of auvs acknowledgement this study is partially supported by the national natural science foundation of china 41176076 31202036 51379198 and the high technology research and development program of china 2016yfc0301401 
22594,this paper presents a novel approach to the design of globally asymptotically stable position and assessment of an usbl aided integrated navigation based on condition adaptive gain extended kalman filter caekf for the deep water autonomous underwater vehicles auvs subject to uncertainties e g loss of usbl signal irregular and gross positioning error due to the influence of underwater observation conditions positioning gross error will often appear when exploiting usbl to assist auv navigation in ocean exploration aiming at this kind of problem a method of adding the conditional constraints and confidence assessment to ekf was put forward to filter the positioning value of usbl and which can make the filtering result more robust and smooth in addition in order to reduce positioning error for the deep water vehicle online an integrated navigation system is constructed by adding the acoustic navigation finally the long voyage of the sea trials data acquired in suitable sea trials performed in the south china sea verifying the robustness and practicability of the proposed methodology a very effective trade off between accuracy and computational load has been achieved and which demonstrated that the proposed algorithm outperforms standard navigation algorithms and other classical filtering approaches keywords autonomous underwater vehicle ultra short baseline condition adaptive confidence measure operator integrated navigation system 1 introduction the development of precise and robust navigation strategies for autonomous underwater vehicles is fundamental to reach the high level of performance required by complex underwater tasks allotta et al 2016a when the auv is performing tasks in the deep sea the navigation error will accumulate over time if it relies solely on its own inertial navigation system which brings difficulties to dynamic control for trajectory tracking and topographic position measurement the quality of the navigation system not only influences the result of the performed mission in terms of position error between the desired and the executed of the data acquired by the onboard sensors allotta et al 2016a in the case of small azimuth error and position error a stable and effective result can be obtained by using the trajectory tracking algorithm with back stepping controller rezazadegan et al 2013 2015 do et al 2004 qiao et al 2017 give a detailed dynamic analysis and in which an adaptive control law for 6 dof model is derived for the trajectory tracking problem considering uncertainties and disturbances but the global positioning system gps signal is not available underwater thus it is difficult to estimate deviation of actual and predetermined trajectory of auv in real time in addition due to the complexity of aquatic communication inclination and azimuth deviation often occur in usbl positioning which results in unstable performances including poor track accuracy and divergences therefore position and attitude estimation of auv must be performed before trajectory tracking and mission execution 1 1 review of previous work in order to get a more accurate position estimation for auv online aiding devices have been considered in the design of integrated navigation solutions and now the acoustic navigation system doppler velocity log dvl navigation system and inertial navigation system ins have become an important part of the autonomous unvehicle integrated navigation system there are mainly long baseline system lbl short baseline system sbl and ultra short baseline system usbl in the acoustic navigation system allotta et al 2016a 2016b chen 2014 ji et al 2012 li et al 2016 paull et al 2014 lbl navigation system avoids the azimuth measurements between auv and the underwater beacons because the complexity of underwater environments makes a great challenge to measuring azimuth relying on the underwater however acoustic transponders of lbl needs to be pre surveyed onto the sea floor of target areas which brings some difficulties to engineering application and affects the flexibility of autonomous underwater vehicle sbl needs to install many acoustic emission units in different position of the depot ship with a series of complex manipulations sbl becomes not popular and convenient while there are no such problems in usbl and it can locate auv for real time by measuring the oblique distance and azimuth of auv between the on board beacons it is widely used for the positioning and tracking of autonomous underwater vehicles but espectially when auv is far away from the on board beacons the errors of azimuth measurements are larger than the errors of range measurements li et al 2016 indeed the high accuracy needed by tasks which can even involve multiple vehicles make motion estimation a key factor in underwater autonomous navigation requiring precise and computationally lightweight estimation algorithms the quality of the navigation system not only influences the result of the performed mission in terms of position error between the desired and the executed path but also affects the outcome of the geographic referenced process of the data acquired by the on board sensors costanzi et al 2016 in addition to the intrinsic difficulties of the localization task the underwater environment poses additional limitations that further complicates the estimation process for instance the global position system gps signal is not available underwater making it very hard to estimate the vehicle position of the vehicle in real time allotta et al 2016a paull et al 2014 due to noisy measurements unknown and complex ocean environment and nonlinear nature of the range measurements positioning period and positioning results of usbl are not stable specifically of course there are many factors such as the measurement transmission delays for the computation of the auv position the nonlinear measurement equations the non constant sound speed in the explored zone and the effect of water currents li et al 2016 under normal circumstances usbl period is a fixed value e g 25 s but usbl signal will loss or update period will be extended in the case of errors arise a filtering solution is required in order to correctly estimate the position of the transponder in the vehicle coordinate frame and the inertial velocity of the vehicle morgado et al 2011 and the vast majority of the motion estimation filters which are used to eliminate abnormal errors such as the median filter the mean filter the clipping filter and kalman filter kf extended kalman filter ekf li et al 2016 modalavalasa et al 2015 zanoni and barros 2015 unscented kalman filter ukf allotta et al 2016a 2016b particle filter pf although all these methods have their own limitations method of target tracking by ekf using bearing and elevation measurements for underwater environment was proposed in paper modalavalasa et al 2015 the performance of this algorithm has been analyzed in simulation without considering the effects of complex seabed environments due to the latency of acoustic updates state estimators are implemented where the dead reckoning dr proprioceptive sensors provide the predictions and then acoustic measurements provide the updates literature li et al 2016 proposed a multi model ekf integrated navigation algorithm to filter outliers which exploits calculating the innovation between predicted measurement and actual measurement by dr and lbl an accurate tracking method using ekf to estimate auv position by super short baseline ssbl from the mother ship is proposed in watanabe et al 2009 which well compensates the random error of the ssbl and the inertial navigation system ins drift localization of an auv using graph based simultaneous localization and mapping slam algorithm were tested underwater paull et al 2014 lee et al 2013 bonin negreet al 2015 in which a graph structure was built using the landmark detection results by vision camera and dr data of the auv literature osborn et al 2016 presents a novel approach to water current compensation based on ekf for auv the noise covariance matrices are difficult to be determined and the fixed noise covariance matrices of ekf are hard to satisfy all situations to avoid such disadvantages shao et al 2016 applies adaptive extended kalman filter algorithm to auv which can adaptively adjust the measurement covariance matrix and the process noise covariance matrix by utilizing the latest measurement data from the gps literature waite 2004 published target tracking based on amendatory sage husa adaptive kf which can inhibit accumulation of error on target tracking and improve the filter precision in steady state and strengthen the stability and adaptability of filter furthermore it is difficult to establish the kinematic model and the measurement model accurately for the deep water vehicle in the underwater environment these methods just be worked for a few abnormal errors which obey a certain distribution law a large quantity of irregular usbl errors make the application of above methods difficult in addition how to quickly and effectively build or switch the error models with different distributions with low computational complexity in order to meet the real time requirement especially when the number of models in the models set is relatively large for the problems mentioned above this paper presents a novel approach to the design of globally asymptotically stable position and assessment of an usbl aided integrated navigation based on caekf for the deep water autonomous underwater vehicles subject to uncertainties 1 2 contributions of this paper this paper describes a method of a more accurate position prediction for auv under complex seabed terrain most significant contributions of this work include the following the caekf algorithm with conditional constraints can be applied to different sensors noise model by adjusting the corresponding constraints as for the harsh underwater environment even though ekf ukf integrated navigation system is adopted it is also difficult to establish accurate auv kinematic model and error model specially when usbl signal is lost or gross adaptive conditional constraints solve this problem successfully and which can make the filtering results convergent method of confidence assessment was introduced to the improved self adapting filter to make the positioning trajectory smooth which can further optimize the filtering results according to the gauss probability distribution between ekf heuristic knowledge and current estimation results the algorithm integrates multi sensor information and an integrated navigation system for auv was established which performs well on the aspects of positioning accuracy and energy consumption at the initial phase of this research activity a preliminary validation of the proposed filtering algorithm of usbl navigation has been executed offline on the data acquired by the submerged dragon 2 auv sailing in south china sea during the tests the auv navigates in inertial navigation or dr meanwhile auv is monitored by supply ship with usbl navigation system the presented algorithm is verified by offline data obtained in this process and related parameters in the algorithm are adjusted according to the model of usbl in the end better results had been achieved which outperforms other classical filtering approaches the obtained results are encouraging in the near future the proposed navigation algorithm will be implemented online in the water during experimental campaigns the paper is organized as follows section 2 describes the submerged dragon ii auv and vehicle modelling the proposed filter algorithm design and main contributions of the paper are presented in section 3 where the filter structure is brought in detail simulation and sea trail results and performance comparison with traditional solutions are discussed in section 4 and finally section 5 provides some concluding remarks 2 auv description and kinematic model the submerged dragon ii auv is a 4500 m class auv 3 5 m long 1 5 m high weight 1 5 tons which has four main propellers with rudders and one side thruster from surface it looks like a small yellow fish as shown in fig 1 the submerged dragon ii auv is equipped with four main propellers mounted on the steering gears shown in fig 5 and a lateral auxiliary thruster which makes the vehicle more flexible to accomplish tasks the position of the propellers and of the lateral thruster on the auv is reported in fig 2 the sensors set available for the submerged dragon ii auv includes inertial measurement unit imu ultra short baseline usbl electromagnetic compass ec depth measuring device dm global positioning system gps doppler velocity log dvl 2 1 dynamic and kinematic model of auv the whole process of auv sailing can be divided into non powered diving phase and navigation in the horizontal plane phase after the auv arrives at a designated area it performs non powered diving into the predetermined depth and then performing the task along the pre planed track in the horizontal plane of this depth which is a common mode adopted by most auv as shown in fig 3 the fixed inertial frame o n x n y n z n has its origin on the surface and its axes pointing north east and down ned reference frame the body frame o b x b y b z b is centered in the centre of gravity of the auv with the x axis pointing in the direction of the forward motion of the vehicle the y axis pointing in the direction of the right motion of the vehicle z axis completing a right handed reference frame the supply ship frame o s x s y s z s which equipped with acoustic transmitter of usbl to conveniently describe the auv model two suitable reference frames are used roberts et al 2003 as shown in fig 4 the model of the auv is expressed in terms of the following vectors 1 œÅ œÅ 1 t œÅ 2 t t œÅ 1 l Œª h t œÅ 2 œï Œ∏ Œ≥ t 2 ŒΩ ŒΩ 1 t ŒΩ 2 t t ŒΩ 1 w œï w Œ∏ w Œ≥ t ŒΩ 2 v f v r v d t 3 a a f a r a d t s œÅ t v t a t t where œÅ includes the position œÅ 1 and the orientation œÅ 2 of the vehicle expressed in the inertial frame the position consists of latitude longitude and deep the angles are the heading the pitch and the roll which measured by ec and imu ŒΩ is composed of the angular velocities ŒΩ 1 and the liner velocities ŒΩ 2 liner velocities are the forward speed the right speed and the vertical downward speed angular velocities are the heading anguar velocity the pitch anguar velocity and the roll anguar velocity corresponding to the orientation œÅ 2 a is the liner accelerated velocities of the auv expressed in the body frame s is the state vetor consisting of 15 state variables the dynamics of the auv is governed by the following equations 4 m d v c d v v d d v v g d œÅ œë d v u where m d is the mass matrix c d v and d d v are respectively the centrifugal and coriolis matrix and the damping effects matrix g d Œ∑ is the vector of gravitational and buoyancy effects and œë v u d is the vector of the resultant force and moment acting on the vehicle being u the control inputs i e the rotational speed of the motors related to the delivered thrusts allotta et al 2016a 2017 the vehicle kinematic equations in imu operating mode are expressed as follows 5 œÅ j œÅ 2 v i m u j œÅ 2 o 1 3 a i m u t t t i m u 6 j œÅ 2 c b n œÅ 2 o 3 3 o 3 3 r b n œÅ 2 7 q n b t 1 2 œâ v 1 t q n b t 8 œâ v 1 v 1 ÀÜ v 1 v 1 t 0 v 1 ÀÜ 0 w Œ≥ w Œ∏ w Œ≥ 0 w œï w Œ∏ w œï 0 where t i m u is inertial period of auv r b n is the rotation matrix between the inertial and the auv frame c b n is the transformation matrix between angular velocity and the time derivation of the chosen angles o is zero matrice q is a quaternion representing the attitude of the vehicle œâ v 1 is the hamiltonian operator v 1 ÀÜ is angular velocity antisymmetric matrix in this period t i m u the nonlinear system can be approximated as linear meanwhile discrete system and establish earth ellipsoid model to convert the cartesian coordinates to earth spherical coordinates the model of dead reckoning dr used by most auv with dvl expressed like in eq 5 then the following equations can be obtained in earth spherical coordinates 9 Œ≥ k 1 b Œ≥ k b r b n œÅ 2 g d v f d v l v r d v l v d i m u t t d v l Œµ 10 Œ≥ k b l k Œª k h k t g d d i a g g 1 g 2 1 11 g 1 œÄ 180 1 r n k cos l k g 2 œÄ 180 1 r m k 12a r m k r e 1 2 e 3 e sin 2 l k 12b r n k r e 1 e sin 2 l k where Œ≥ b Œµ v 1 d v l r m r n r e r p e are respectively position system error matrix of auv velocitys measured by dvl in the body frame o b x b y b z b meridian radius of curvature of the circle prime vertical radius of curvature of the circle long axis short axis ellipsoidal rate of earth g d is a diagonal matrix 13 Œ≥ k b Œ≥ k s g d Œæ k Œª k Œ∂ k 14 Œª k d i a g cos Œµ k cos Œº k 0 15 Œæ k 2 cos 2 Œµ k Œæ k 2 cos 2 Œº k d k s 2 Œæ k 2 16 Œ∂ k d i a g Œ∂ k n Œ∂ k e d k b d k s where Œ≥ k s is the position of supply ship in the supply ship frame Œª k and Œ∂ k are diagonal matrix Œæ k Œµ k Œº k Œ∂ k Œ∂ k n Œ∂ k e d k b d k s are respectively oblique distance height angle azimuth from supply ship to auv usbl positioning offset value acoustic transmission error in the north and east deep of auv and supply ship measuresed by dm vehicle kinematics model with imu dvl and usbl have been established then the design of filtering algorithm to realize the positioning of vehicle is convenient and necessary 2 2 sensor modelling this section deals with the modelling of the sensors mounted on the submerged dragon ii auv illustrating the mathematical models used to describe their function usbl working frequency 0 1 hz the usbl transducer measures the position of a transmitting compatible modern with respect to itself which is governed by the following equations waite 2004 allotta et al 2017 17 œÅ 1 m u s b l œÅ 1 Œ¥ œÅ 1 m u s b l with added Œ¥ œÅ 1 m u s b l measurement noise ec working frequency 100 hz which is composed of a three axis accelerometer a three axis magnetometer measuring heading angle model was established with the relation between magnetometer and earth s magnetic field 18 œï m e c arctan y m o f f s e t x m o f f s e t Œ¥ m e c where x m o f f s e t y m o f f s e t are respectively magnetic field values in two directions with compensation Œ¥ m e c is measurement noise dvl working frequency 10 hz this sensor measures the liner velocity of the vehicle allotta et al 2016a rigby et al 2006 the following model has been used 19 v 2 m v 2 b v 2 Œ¥ v 2 where the measured quantity v 2 m is the sum of the true value v 2 of the bias error b v 2 and of the measurement noise Œ¥ v 2 imu working frequency 100 hz the mounted inertial measurement unit is composed of a three axis accelerometer a three axis gyroscope accelermeter measures the proper acceleration of the vehicle gyroscope measures the angular velocity of the auv biased by the gravitational acceleration g e the measure is expressed in the body frame as follows allotta et al 2016a rigby et al 2006 20 a m r n b œÅ 1 g e b a Œ¥ a 21 v 1 m v 1 b v 1 Œ¥ v 1 where b a b v 1 and Œ¥ a Œ¥ v 1 are respectively added bias and measurement noise the gyroscoped bias considerably varies over time it has to be estimated and compensated by ec in real time 3 navigation filter design this section introduces the proposed improved extended kalman filter design method integrated navigation design method and the main contributions of the paper the sensors e g dvl imu dm usbl installed in the vehicle for navigation have different accuracy and credibility integrating reasonably these information will be beneficial to improve the accuracy of auv navigation system however these sensors are not synchronous and the output signals of these sensors are often mixed with noise when they work further more initial start up time and frequency of these sensors are not the same what bring difficulties to data fusion therefore previous processing and time synchronization for these sensors are required before taking multiple sensors information fusion and constructing an integrated navigation system 3 1 usbl time synchronization metrical data of sensors often have measurement or calculation errors and outliers due to timing jitter amplitude fluctuation carrier rotation and narrow transmission paths of the sampling pulses etc which can easily lead to measurements that deviate greatly from expected or true values the various sensors on the submersible cause the occurrence of outliers due to external interference the mistakes introduced by manual operation or wrong time recording and unstable when working usbl is a positioning sensor that works underwater positioning signal passes through the special underwater acoustic channel it will undergo refraction and reflection therefore some positioning signals will be interpreted when they are transmitted to the receiver of acoustic communication machine installed on supply ship usbl is not as stable as gps it often appears no positioning signal in a short or long time under the special underwater conditions in addition the multi sensors are not synchronized during the working time the reasons are as follows i the start up time of each sensor is different ii the sampling frequency of each sensor is different their pulse repetition period and the scanning period are different iii the measured data from different sensors are usually not obtained at the same time during their scanning process this section mainly achieves time synchronization between usbl with dvl which is expressed by the following equations 22 Œ≥ k 1 u s b l Œ≥ k u s b l r b n œÅ 2 v 2 o t u s b l t d v l œÉ where t u s b l t d v l are respectively working period of usbl and dvl v 2 o are optimized velocitys by caekf œÉ is noise matrix set t i m u t d v l are equal in engineering applications generally and set Œ¥ t t u s b l t d v l Œ¥ t is called compensation step length in time synchronization then usbl system can be described by a set of equations in the form 23 u k 1 u s b l Œ± u s b l r b n œÅ 2 0 0 r b n œÅ 2 g u u k u s b l 24 u k u s b l œÅ 1 v 2 o t 25 g u d i a g g d i 3 3 26 Œ± u s b l i 3 3 i 3 3 Œ¥ t o 3 3 i 3 3 where u k u s b l is synchronous state matrix of usbl and imu g u is a diagonal matrix i is identity matrix in order to facilitate the calculation and reduce the calculation period this paper conduct a vector sum of all velocities in t u s b l which as the new input of prediction system then the dimension of the space is reduced expressed by following equation 27 v 2 n e w 1 t u s b l v 2 i œÅ 2 r b n œÅ 2 3 2 condition adaptive gain extended kalman filter design and integrated navigation system design in this section the conventional classical extended kalman filter algorithm was improved proposed condition adaptive gain extended kalman filter algorithm caekf of adding correlated descriptors to achieve multi sensor fusion and outliers elimination in the integrated navigation system the autonomous navigation system have inertial navigation system and dead reckoning system the dm ec and usbl system are the auxiliary navigation system which constitute a multisource measurement system the autonomous navigation is carried out when the auv is not receiving the metrical data of these sensors in order to prevent the autonomous navigation error accumulate over time and get a more accurate position for the deep water vehicle online an integrated navigation is constructed by adding the acoustic navigation system the autonomous navigation system is corrected by the auxiliary navigation subsystem constantly take the velocities of dvl the depths of dm the angles of ec and the positions of usbl as the high precision filter measurements filtering the autonomous navigation system respectively such filtering can restrain the divergence of autonomous navigation system and avoid the navigation system errors changing abruptly when subsystem noises become large such as the wide range of usbl fluctuations and mutations as shown in fig 6 and fig 7 this kind of gross error is rare but once it exists it will bring wrong judgment to navigation system and it might even diverge the system seriously as for the harsh underwater environment even though ekf integrated navigation system is adopted it is also difficult to establish accurate auv kinematic model and error model specially when usbl signal is lost or gross therefore the traditional model of ekf algorithm was improved based on probability distribution theory take the state variables denoted in eq 3 in account the state space in the fixed inertial frame o n x n y n z n can be expressed roughly by following equation 28 s k 1 a s s k Œ¥ k 29 a s i 3 3 r b n œÅ 2 g d l t s 5 r b n œÅ 2 g d l t s i 3 3 c b n œÅ 2 t s i 3 3 i 3 3 r b n œÅ 2 t s i 3 3 where s k is 15 dimensional state vector containing the kinematic quantities describing the motion of the auv a s is state transition matrix Œ¥ k is state noise matrix and equation of state observation is defined ss shown below 30 Œ∂ k 1 h Œ∂ k œÖ k 31 h d i a g i 3 3 i 3 3 o 3 3 p 3 3 o 3 3 32 p 3 3 d i a g 1 1 0 where Œ∂ k is 8 dimensional observation vector made up of metrical data from multiple sensors l Œª from usbl h from dm œï Œ∏ Œ≥ from ec v f v r from dvl it can be seen as r b n œÅ 2 and g d l contain cosine of the state variables the state space expression is a nonlinear system but the observation expression is a linear system so linearization of the expression of nonlinear states is required the first order taylor approximation is the most commonly used method just like ekf set eq 29 is f s and 33 a s a 11 s o 3 3 o 3 3 a 14 s a 15 s o 3 3 a 22 s a 23 s o 3 3 o 3 3 o 3 3 o 3 3 a 33 s o 3 3 o 3 3 o 3 3 o 3 3 o 3 3 a 44 s a 45 s o 3 3 o 3 3 o 3 3 o 3 3 a 55 s jacobian matrix can be obtained as follows 34 f f s s f 11 f 12 o 3 3 f 14 f 15 o 3 3 f 22 f 23 o 3 3 o 3 3 o 3 3 o 3 3 i 3 3 o 3 3 o 3 3 o 3 3 f 42 o 3 3 i 3 3 f 44 o 3 3 o 3 3 o 3 3 o 3 3 f 55 35 f 11 i 3 3 a 14 s a 15 s œÅ 1 36 f 12 a 14 s a 15 s œÅ 2 f 14 a 14 s f 15 a 15 s 37 f 22 i 3 3 a 23 s œÅ 2 f 23 a 23 s 38 f 42 a 44 s œÅ 2 f 45 a 44 s 39 f 33 i 3 3 f 55 i 3 3 so covariance synchronization equation and state equation in the caekf can be expressed by following equation 40 s k f k s k 1 41 p k f p k 1 f t q where p q are respectively covariance matrix process error matrix of system then kalman gain and state update equation can be expressed by follows 42 k g k p k h k t h k p k h k t r 43 s k s k Œ∫ k k g k z k h s k 44 p k i 15 k g k h k p k where k g is kalman gain r is observation noise matrion z k is 8 dimensional observation vector h is observation matrix of system and the calculation method of Œ∫ k and Œ≤ k as following equations 45 Œ∫ k c e Œ≤ k Œ± œÑ Œ± 46 Œ≤ k z k w s h k s k t z k w s h k s k k 1 Œ≤ k Œ∑ Œ≤ k 1 z k w s h k s k t z k w s h k s k 1 Œ∑ k 1 Œ∫ k is condition adaptive gain Œ± is the adjustable initial error it can be adjusted according to the filter demand and specific error model of sensors œÑ and c are filter coefficient Œ≤ k is the confidence estimator making the localized trajectory smooth which can further optimize the filtering results according to the gauss probability distribution between ekf heuristic knowledge and current estimation results w s is weight driven matrix Œ∑ is a forgetting factor which can adjust the proportion of historical experience and current estimates in order to prevent the system divergence this paper adds a constraint condition to filter as shown in fig 8 gauss white noise is the error distribution model of standard ekf the addition of colored noise will inevitably lead to the divergence of filtering system in this paper according to the characteristics of usbl positioning values constraints are added to the colored noise area for one thing when the system has little error drift condition adaptive gain can be approximated as k g using the classical ekf to filter out these outliers for another when the system has a few gross errors floating or more and no rule abnormal standard ekf is not useful and proposed caekf navigation algorithm in this paper becomes effective and necessary under this circumstance the prediction part of the filter becomes predominant if compared to the correction part and caekf approach in terms of robustness turns out to be promising to assure lower estimation errors in complex navigation and cooperation tasks in the integrated navigation system the imu measured the angular rate and acceleration information of carrier by using peg top and accelerometer after integral calculation the speed and position information of carrier can be acquired f1 is a complementary filter using acceleration component of imu and magnetometer component of ec to correct system attitude error f2 is local subfilter for velocity and outputs the credible precise and local optimal estimation of navigation parameter error gps positioning signals are acquired by submarines on or out of the water the time synchronization calculation and compensation calculation can be carried out by the dvl using dr algorithm or by the imu when the data loss or gross error occur of subsystem sensors local filters for subsystems also can use proposed caekf before of which the initial covariance and error matrix are obtained by experience finally through the fusion of local optimum estimation of sub filters then get the global optimal estimation of navigation system the main system is the autonomous navigation system with high fault tolerance and error accumulation such as inertial navigation system and dvl system as the subsystem ec dm and usbl have the characteristics of small cumulative error and low fault tolerance the filter structure established in this paper as shown in fig 9 4 numerical results and performance evaluation the performance of the proposed caekf algorithm was assessed in simulation using nonlinear motion model and sea trial data of vehicle 4 1 simulation using nonlinear motion model in the simulation experiment set suitable initial values for caekf related parameters using positioning model of usbl described in eq 13 and eq 23 dr navigation model by dvl ec and dm and inertial navigation model described in eq 9 to set up the corresponding state space equation and considering the gross error and instability of usbl positioning values the random colored noise process is added to the model the caekf algorithm and the standard ukf algorithm are respectively applied to track and filter this model the next part is to explain and compare the two algorithms it is composed of the prediction and correction scheme shown in algorithm 1 2 algorithm 1 caekf algorithm image 1 algorithm 2 ukf algorithm image 2 in algorithm 2 sigma denotes the corresponding operations on a set of s i g m a points w m and w c are the weights for calculating mean and covariance respectively q and r are the covariance matrices of process and measurement noise assumed as zero mean stationary white noises with zero cross correlation set initial location is œÅ 1 0 0 10 the initial forward velocity is v f 0 8 m s the initial rightward velocity is v r 0 5 m s the initial down velocity is v d 0 01 m s the initial dm error is 0 05 m the initial ec error is 0 1 the œï œÄ 2 Œ∏ œÄ 30 Œ≥ œÄ 20 w œï 0 09 r a d s w Œ∏ w Œ≥ 0 002 r a d s and set adaptive parameters Œ∑ 1 2 œÑ 1 Œ± 0 01 2 c 0 5 then simulation results shown as figs 10 14 in fig 10 the green yellow triangular line denotes the auv s real trajectory of nonlinear system the pink cross line denotes the usbl locating values with abnormal errors the yellow blue square line denotes the auv s trajectory by the standard ukf navigation algorithm and the black purple circle line denotes the trajectory by this paper proposed caekf integrated navigation algorithm red yellow pentagram marker denotes starting point and green yellow diamond marker denotes terminal point as known from above when the abnormal occurs frequently and largely the standard ukf is difficult to achieve the desired effect while the proposed improved algorithm can solve this problem completely and achieve the ideal effect gross deviation in the process of auv positioning by usbl in fig 11 it can be seen that usbl positioning is quite accurate except for some gross errors caused by the sensor frequency or signal transmission figs 12 14 is the position estimation comparison between the two navigation filtering algorithms although the ukf filter works well it sometimes follows large errors it is difficult to have a convergent result it can be seen that caekf proposed in this paper has better filtering effect in terms of stability and precision as a whole 4 2 sea trials in order to verify the validity of this new navigation algorithm in this section the proposed navigation filter has been experimentally validated exploiting the data acquired by the sensors mounted on the vehicle during the execution of the autonomous mission in the south china sea by a mode of following 20 to 30 waypoints underwater shown as fig 15 the comparison between the navigation algorithms will analyzed in detail the auv is at the working depth of more than 1000 m and usbl positioning frequency in this kind of environmen is also unstable considering the accuracy and continuity of terrain position in underwater mission the real trajectory of the submarine needs to be estimated the velocity of auv was obtained by imu and dvl attitude was measured by imu and ec the gps is working when vehicle runs on the surface and usbl positioning system is working when vehicle carries out a task in the sea gps positioning information can be obtained by auv before diving into the sea or after floating out the sea surface french posidonia 6000 usbl system was used in the sea trial which shown as fig 16 the initial positioning error is set to 100 m positioning period is set to 24s and its period is unstable set the initial depth meter error is 30 m the initial error of electronic compass is set 0 1 and conduct parameter identification and correction for dvl to reduce the initial installation errors feng et al 2005 setting caekf parameters Œ± 0 001 2 Œ∑ 1 2 œÑ 1 and c 8 5 in this paper a series of navigational data that over a 20 h voyage was selected to test the proposed algorithms fortunately the reliability trajectories of auv navigation have been obtained and satisfactory results have been achieved shown as fig 22 and comparison of two navigation filtering algorithms as shown in figs 18 24 in fig 17 there are many gross errors in usbl positioning which are much larger than 200 m it can be seen that the initial usbl positioning data without filtering is irregular and extensive which easily affects the positioning accuracy and stability of the system figs 18 and 19 are shown separately the auv inertial navigation trajectory and the dead reckoning trajectory at the initial point the initial stage of the auv s voyage is a process of powerless submarine dive which is prone to the loss of usbl location from the figure it can be seen that the inertial navigation trajectory of the submarine is smooth and continuous as a whole in the initial stage it can be considered that the position estimation of the inertial navigation is accurate and valid in addition the dead reckoning without filtering is greatly affected by the initial point and the dead reckoning navigation trajectory and inertial navigation trajectory deviate greatly in the initial stage in figs 20 and 21 it shows the position estimation comparative results of standard ekf navigation algorithm and standard ukf navigation algorithm these two filtering algorithms are greatly influenced by usbl outliers and initial filtering values the filtering results always follow the changes of usbl outliers and the error is much larger than the cumulative error of inertial navigation fig 24 shows that ukf navigation algorithm is better than ekf navigation algorithm in terms of position estimation error the ukf navigation algorithm turns out to be more robust than the ekf one however due to the lack of adaptive conditions it is difficult to achieve an ideal result by adjusting the covariance distribution and empirical noise value figs 22 24 show the filtering effect of this paper proposed caekf algorithm with nice robustness which is less affected by the initial value although the positioning results are not stable and reliable when auv submerging powerlessly in the form of helix but when the vehicle enters the preset depth the filtering results are stable and convergent and its accuracy is obviously better than that of inertial navigation without filtering under this circumstance the prediction part of the filter becomes predominant if compared to the correction part when the auv navigates underwater the usbl dm ec and dvl play a key role in limiting divergence of position estimation errors although ukf does not have cumbersome steps to linearizing it is also constrained by the assumption of gauss white noise and has certain limitations in the selection of its filtering parameters it is easy to note that the result of the ukf strongly depends on the choice of the these parameters in this case the ukf filtering results do not perform well and sometimes usbl gross errors are tracked to solve this problem the condition adaptive gain is introduced in this study to increase the robustness of caekf without tracking gross errors of usbl and make the positioning trajectory convergent and smooth the results of sea trial data show that near the initial point vehicle in non powered spiral diving the position of auv is constantly changing and the initial position of vehicle is difficult to determine the navigation error will accumulate over time if it relies solely on its own inertial navigation system on the whole the proposed filtering algorithm in this paper has achieved an ideal effect avoiding the impact of the usbl abnormal errors and the disturbances of usbl sampling period on the auv navigation analysis and comparison of absolute error and relative error before and after filtering as shown in table 1 finally three sea trial navigation data are selected which have more than 100 000 rows of records the auv is at the working depth of more than 1000 m and usbl positioning frequency is also unstable in all records running the caekf algorithm in matlb and c environment respectively the running time is shown in table 2 which shows the fast and real time performance of the algorithm the position trajectory becomes clearer and more accurate after filtering by the proposed algorithm which is convenient for the next step of auv navigation location path planning and system optimization 5 conclusion in this paper the authors presented an innovative navigation system especially designed for auv for the harsh underwater environment it is hard to establish the accurate kinematic model of auv in order to obtain high accurate trajectory information for path navigation and path planning based on multi sensor data fusion theory and probability distribution theory this paper proposes the condition adaptive gain ekf integrated navigation system and which had been testified by multiple simulations and sea trails moreover this paper also introduces conditional constraints and confidence measure operator to the improved self adapting filter to realize the localized trajectory convergent and smooth and which makes this algorithm can be worked for different usbl noises finally the long voyage of the sea trials data verifying the feasibility of the proposed methodology better results has been achieved which demonstrated that the proposed algorithm performs well on the aspects of location error and energy consumption and turns out to be more robust than standard navigation algorithms and outperforms other classical filtering approaches but these are offline data from submerged dragon ii auv important further development are scheduled for the future this proposed algorithm will be simulated or tested online in the water and the algorithm needs to be perfected to satisfy the real time navigation requirement the particle filter pf is a commonly used and high precision algorithm in the field of robots but the difficulty of particle distribution selection and the huge number of particles bring pressure to the calculation time fast multi constraint adaptive particle filter algorithm may have higher accuracy in addition underwater visual slam algorithm paull et al 2014 lee et al 2013 bonin negreet al 2015 can be used to correct auv positioning errors to make up for the limitations of acoustic positioning further more multibeam scanning topographic map from supply ship on the water which uses gps for positioning can correct the position information of underwater survey topographic map from auv by terrain matching and the performance of these methods in terms of accuracy will be carefully investigated in different scenarios acknowledgments the aurhors would like to thank the anoymous reviewers for their valuable comments that have led to improvements in the quality and presentstion of this paper this work was supported by the national key r d program of china no 2017yfc03 06800 appendix a supplementary data the following are the supplementary data to this article multimedia component 1 multimedia component 1 multimedia component 2 multimedia component 2 multimedia component 3 multimedia component 3 multimedia component 4 multimedia component 4 multimedia component 5 multimedia component 5 multimedia component 6 multimedia component 6 multimedia component 7 multimedia component 7 multimedia component 8 multimedia component 8 multimedia component 9 multimedia component 9 multimedia component 10 multimedia component 10 multimedia component 11 multimedia component 11 multimedia component 12 multimedia component 12 multimedia component 13 multimedia component 13 multimedia component 14 multimedia component 14 multimedia component 15 multimedia component 15 multimedia component 16 multimedia component 16 appendix a supplementary data supplementary data to this article can be found online at https doi org 10 1016 j oceaneng 2019 106146 
22594,this paper presents a novel approach to the design of globally asymptotically stable position and assessment of an usbl aided integrated navigation based on condition adaptive gain extended kalman filter caekf for the deep water autonomous underwater vehicles auvs subject to uncertainties e g loss of usbl signal irregular and gross positioning error due to the influence of underwater observation conditions positioning gross error will often appear when exploiting usbl to assist auv navigation in ocean exploration aiming at this kind of problem a method of adding the conditional constraints and confidence assessment to ekf was put forward to filter the positioning value of usbl and which can make the filtering result more robust and smooth in addition in order to reduce positioning error for the deep water vehicle online an integrated navigation system is constructed by adding the acoustic navigation finally the long voyage of the sea trials data acquired in suitable sea trials performed in the south china sea verifying the robustness and practicability of the proposed methodology a very effective trade off between accuracy and computational load has been achieved and which demonstrated that the proposed algorithm outperforms standard navigation algorithms and other classical filtering approaches keywords autonomous underwater vehicle ultra short baseline condition adaptive confidence measure operator integrated navigation system 1 introduction the development of precise and robust navigation strategies for autonomous underwater vehicles is fundamental to reach the high level of performance required by complex underwater tasks allotta et al 2016a when the auv is performing tasks in the deep sea the navigation error will accumulate over time if it relies solely on its own inertial navigation system which brings difficulties to dynamic control for trajectory tracking and topographic position measurement the quality of the navigation system not only influences the result of the performed mission in terms of position error between the desired and the executed of the data acquired by the onboard sensors allotta et al 2016a in the case of small azimuth error and position error a stable and effective result can be obtained by using the trajectory tracking algorithm with back stepping controller rezazadegan et al 2013 2015 do et al 2004 qiao et al 2017 give a detailed dynamic analysis and in which an adaptive control law for 6 dof model is derived for the trajectory tracking problem considering uncertainties and disturbances but the global positioning system gps signal is not available underwater thus it is difficult to estimate deviation of actual and predetermined trajectory of auv in real time in addition due to the complexity of aquatic communication inclination and azimuth deviation often occur in usbl positioning which results in unstable performances including poor track accuracy and divergences therefore position and attitude estimation of auv must be performed before trajectory tracking and mission execution 1 1 review of previous work in order to get a more accurate position estimation for auv online aiding devices have been considered in the design of integrated navigation solutions and now the acoustic navigation system doppler velocity log dvl navigation system and inertial navigation system ins have become an important part of the autonomous unvehicle integrated navigation system there are mainly long baseline system lbl short baseline system sbl and ultra short baseline system usbl in the acoustic navigation system allotta et al 2016a 2016b chen 2014 ji et al 2012 li et al 2016 paull et al 2014 lbl navigation system avoids the azimuth measurements between auv and the underwater beacons because the complexity of underwater environments makes a great challenge to measuring azimuth relying on the underwater however acoustic transponders of lbl needs to be pre surveyed onto the sea floor of target areas which brings some difficulties to engineering application and affects the flexibility of autonomous underwater vehicle sbl needs to install many acoustic emission units in different position of the depot ship with a series of complex manipulations sbl becomes not popular and convenient while there are no such problems in usbl and it can locate auv for real time by measuring the oblique distance and azimuth of auv between the on board beacons it is widely used for the positioning and tracking of autonomous underwater vehicles but espectially when auv is far away from the on board beacons the errors of azimuth measurements are larger than the errors of range measurements li et al 2016 indeed the high accuracy needed by tasks which can even involve multiple vehicles make motion estimation a key factor in underwater autonomous navigation requiring precise and computationally lightweight estimation algorithms the quality of the navigation system not only influences the result of the performed mission in terms of position error between the desired and the executed path but also affects the outcome of the geographic referenced process of the data acquired by the on board sensors costanzi et al 2016 in addition to the intrinsic difficulties of the localization task the underwater environment poses additional limitations that further complicates the estimation process for instance the global position system gps signal is not available underwater making it very hard to estimate the vehicle position of the vehicle in real time allotta et al 2016a paull et al 2014 due to noisy measurements unknown and complex ocean environment and nonlinear nature of the range measurements positioning period and positioning results of usbl are not stable specifically of course there are many factors such as the measurement transmission delays for the computation of the auv position the nonlinear measurement equations the non constant sound speed in the explored zone and the effect of water currents li et al 2016 under normal circumstances usbl period is a fixed value e g 25 s but usbl signal will loss or update period will be extended in the case of errors arise a filtering solution is required in order to correctly estimate the position of the transponder in the vehicle coordinate frame and the inertial velocity of the vehicle morgado et al 2011 and the vast majority of the motion estimation filters which are used to eliminate abnormal errors such as the median filter the mean filter the clipping filter and kalman filter kf extended kalman filter ekf li et al 2016 modalavalasa et al 2015 zanoni and barros 2015 unscented kalman filter ukf allotta et al 2016a 2016b particle filter pf although all these methods have their own limitations method of target tracking by ekf using bearing and elevation measurements for underwater environment was proposed in paper modalavalasa et al 2015 the performance of this algorithm has been analyzed in simulation without considering the effects of complex seabed environments due to the latency of acoustic updates state estimators are implemented where the dead reckoning dr proprioceptive sensors provide the predictions and then acoustic measurements provide the updates literature li et al 2016 proposed a multi model ekf integrated navigation algorithm to filter outliers which exploits calculating the innovation between predicted measurement and actual measurement by dr and lbl an accurate tracking method using ekf to estimate auv position by super short baseline ssbl from the mother ship is proposed in watanabe et al 2009 which well compensates the random error of the ssbl and the inertial navigation system ins drift localization of an auv using graph based simultaneous localization and mapping slam algorithm were tested underwater paull et al 2014 lee et al 2013 bonin negreet al 2015 in which a graph structure was built using the landmark detection results by vision camera and dr data of the auv literature osborn et al 2016 presents a novel approach to water current compensation based on ekf for auv the noise covariance matrices are difficult to be determined and the fixed noise covariance matrices of ekf are hard to satisfy all situations to avoid such disadvantages shao et al 2016 applies adaptive extended kalman filter algorithm to auv which can adaptively adjust the measurement covariance matrix and the process noise covariance matrix by utilizing the latest measurement data from the gps literature waite 2004 published target tracking based on amendatory sage husa adaptive kf which can inhibit accumulation of error on target tracking and improve the filter precision in steady state and strengthen the stability and adaptability of filter furthermore it is difficult to establish the kinematic model and the measurement model accurately for the deep water vehicle in the underwater environment these methods just be worked for a few abnormal errors which obey a certain distribution law a large quantity of irregular usbl errors make the application of above methods difficult in addition how to quickly and effectively build or switch the error models with different distributions with low computational complexity in order to meet the real time requirement especially when the number of models in the models set is relatively large for the problems mentioned above this paper presents a novel approach to the design of globally asymptotically stable position and assessment of an usbl aided integrated navigation based on caekf for the deep water autonomous underwater vehicles subject to uncertainties 1 2 contributions of this paper this paper describes a method of a more accurate position prediction for auv under complex seabed terrain most significant contributions of this work include the following the caekf algorithm with conditional constraints can be applied to different sensors noise model by adjusting the corresponding constraints as for the harsh underwater environment even though ekf ukf integrated navigation system is adopted it is also difficult to establish accurate auv kinematic model and error model specially when usbl signal is lost or gross adaptive conditional constraints solve this problem successfully and which can make the filtering results convergent method of confidence assessment was introduced to the improved self adapting filter to make the positioning trajectory smooth which can further optimize the filtering results according to the gauss probability distribution between ekf heuristic knowledge and current estimation results the algorithm integrates multi sensor information and an integrated navigation system for auv was established which performs well on the aspects of positioning accuracy and energy consumption at the initial phase of this research activity a preliminary validation of the proposed filtering algorithm of usbl navigation has been executed offline on the data acquired by the submerged dragon 2 auv sailing in south china sea during the tests the auv navigates in inertial navigation or dr meanwhile auv is monitored by supply ship with usbl navigation system the presented algorithm is verified by offline data obtained in this process and related parameters in the algorithm are adjusted according to the model of usbl in the end better results had been achieved which outperforms other classical filtering approaches the obtained results are encouraging in the near future the proposed navigation algorithm will be implemented online in the water during experimental campaigns the paper is organized as follows section 2 describes the submerged dragon ii auv and vehicle modelling the proposed filter algorithm design and main contributions of the paper are presented in section 3 where the filter structure is brought in detail simulation and sea trail results and performance comparison with traditional solutions are discussed in section 4 and finally section 5 provides some concluding remarks 2 auv description and kinematic model the submerged dragon ii auv is a 4500 m class auv 3 5 m long 1 5 m high weight 1 5 tons which has four main propellers with rudders and one side thruster from surface it looks like a small yellow fish as shown in fig 1 the submerged dragon ii auv is equipped with four main propellers mounted on the steering gears shown in fig 5 and a lateral auxiliary thruster which makes the vehicle more flexible to accomplish tasks the position of the propellers and of the lateral thruster on the auv is reported in fig 2 the sensors set available for the submerged dragon ii auv includes inertial measurement unit imu ultra short baseline usbl electromagnetic compass ec depth measuring device dm global positioning system gps doppler velocity log dvl 2 1 dynamic and kinematic model of auv the whole process of auv sailing can be divided into non powered diving phase and navigation in the horizontal plane phase after the auv arrives at a designated area it performs non powered diving into the predetermined depth and then performing the task along the pre planed track in the horizontal plane of this depth which is a common mode adopted by most auv as shown in fig 3 the fixed inertial frame o n x n y n z n has its origin on the surface and its axes pointing north east and down ned reference frame the body frame o b x b y b z b is centered in the centre of gravity of the auv with the x axis pointing in the direction of the forward motion of the vehicle the y axis pointing in the direction of the right motion of the vehicle z axis completing a right handed reference frame the supply ship frame o s x s y s z s which equipped with acoustic transmitter of usbl to conveniently describe the auv model two suitable reference frames are used roberts et al 2003 as shown in fig 4 the model of the auv is expressed in terms of the following vectors 1 œÅ œÅ 1 t œÅ 2 t t œÅ 1 l Œª h t œÅ 2 œï Œ∏ Œ≥ t 2 ŒΩ ŒΩ 1 t ŒΩ 2 t t ŒΩ 1 w œï w Œ∏ w Œ≥ t ŒΩ 2 v f v r v d t 3 a a f a r a d t s œÅ t v t a t t where œÅ includes the position œÅ 1 and the orientation œÅ 2 of the vehicle expressed in the inertial frame the position consists of latitude longitude and deep the angles are the heading the pitch and the roll which measured by ec and imu ŒΩ is composed of the angular velocities ŒΩ 1 and the liner velocities ŒΩ 2 liner velocities are the forward speed the right speed and the vertical downward speed angular velocities are the heading anguar velocity the pitch anguar velocity and the roll anguar velocity corresponding to the orientation œÅ 2 a is the liner accelerated velocities of the auv expressed in the body frame s is the state vetor consisting of 15 state variables the dynamics of the auv is governed by the following equations 4 m d v c d v v d d v v g d œÅ œë d v u where m d is the mass matrix c d v and d d v are respectively the centrifugal and coriolis matrix and the damping effects matrix g d Œ∑ is the vector of gravitational and buoyancy effects and œë v u d is the vector of the resultant force and moment acting on the vehicle being u the control inputs i e the rotational speed of the motors related to the delivered thrusts allotta et al 2016a 2017 the vehicle kinematic equations in imu operating mode are expressed as follows 5 œÅ j œÅ 2 v i m u j œÅ 2 o 1 3 a i m u t t t i m u 6 j œÅ 2 c b n œÅ 2 o 3 3 o 3 3 r b n œÅ 2 7 q n b t 1 2 œâ v 1 t q n b t 8 œâ v 1 v 1 ÀÜ v 1 v 1 t 0 v 1 ÀÜ 0 w Œ≥ w Œ∏ w Œ≥ 0 w œï w Œ∏ w œï 0 where t i m u is inertial period of auv r b n is the rotation matrix between the inertial and the auv frame c b n is the transformation matrix between angular velocity and the time derivation of the chosen angles o is zero matrice q is a quaternion representing the attitude of the vehicle œâ v 1 is the hamiltonian operator v 1 ÀÜ is angular velocity antisymmetric matrix in this period t i m u the nonlinear system can be approximated as linear meanwhile discrete system and establish earth ellipsoid model to convert the cartesian coordinates to earth spherical coordinates the model of dead reckoning dr used by most auv with dvl expressed like in eq 5 then the following equations can be obtained in earth spherical coordinates 9 Œ≥ k 1 b Œ≥ k b r b n œÅ 2 g d v f d v l v r d v l v d i m u t t d v l Œµ 10 Œ≥ k b l k Œª k h k t g d d i a g g 1 g 2 1 11 g 1 œÄ 180 1 r n k cos l k g 2 œÄ 180 1 r m k 12a r m k r e 1 2 e 3 e sin 2 l k 12b r n k r e 1 e sin 2 l k where Œ≥ b Œµ v 1 d v l r m r n r e r p e are respectively position system error matrix of auv velocitys measured by dvl in the body frame o b x b y b z b meridian radius of curvature of the circle prime vertical radius of curvature of the circle long axis short axis ellipsoidal rate of earth g d is a diagonal matrix 13 Œ≥ k b Œ≥ k s g d Œæ k Œª k Œ∂ k 14 Œª k d i a g cos Œµ k cos Œº k 0 15 Œæ k 2 cos 2 Œµ k Œæ k 2 cos 2 Œº k d k s 2 Œæ k 2 16 Œ∂ k d i a g Œ∂ k n Œ∂ k e d k b d k s where Œ≥ k s is the position of supply ship in the supply ship frame Œª k and Œ∂ k are diagonal matrix Œæ k Œµ k Œº k Œ∂ k Œ∂ k n Œ∂ k e d k b d k s are respectively oblique distance height angle azimuth from supply ship to auv usbl positioning offset value acoustic transmission error in the north and east deep of auv and supply ship measuresed by dm vehicle kinematics model with imu dvl and usbl have been established then the design of filtering algorithm to realize the positioning of vehicle is convenient and necessary 2 2 sensor modelling this section deals with the modelling of the sensors mounted on the submerged dragon ii auv illustrating the mathematical models used to describe their function usbl working frequency 0 1 hz the usbl transducer measures the position of a transmitting compatible modern with respect to itself which is governed by the following equations waite 2004 allotta et al 2017 17 œÅ 1 m u s b l œÅ 1 Œ¥ œÅ 1 m u s b l with added Œ¥ œÅ 1 m u s b l measurement noise ec working frequency 100 hz which is composed of a three axis accelerometer a three axis magnetometer measuring heading angle model was established with the relation between magnetometer and earth s magnetic field 18 œï m e c arctan y m o f f s e t x m o f f s e t Œ¥ m e c where x m o f f s e t y m o f f s e t are respectively magnetic field values in two directions with compensation Œ¥ m e c is measurement noise dvl working frequency 10 hz this sensor measures the liner velocity of the vehicle allotta et al 2016a rigby et al 2006 the following model has been used 19 v 2 m v 2 b v 2 Œ¥ v 2 where the measured quantity v 2 m is the sum of the true value v 2 of the bias error b v 2 and of the measurement noise Œ¥ v 2 imu working frequency 100 hz the mounted inertial measurement unit is composed of a three axis accelerometer a three axis gyroscope accelermeter measures the proper acceleration of the vehicle gyroscope measures the angular velocity of the auv biased by the gravitational acceleration g e the measure is expressed in the body frame as follows allotta et al 2016a rigby et al 2006 20 a m r n b œÅ 1 g e b a Œ¥ a 21 v 1 m v 1 b v 1 Œ¥ v 1 where b a b v 1 and Œ¥ a Œ¥ v 1 are respectively added bias and measurement noise the gyroscoped bias considerably varies over time it has to be estimated and compensated by ec in real time 3 navigation filter design this section introduces the proposed improved extended kalman filter design method integrated navigation design method and the main contributions of the paper the sensors e g dvl imu dm usbl installed in the vehicle for navigation have different accuracy and credibility integrating reasonably these information will be beneficial to improve the accuracy of auv navigation system however these sensors are not synchronous and the output signals of these sensors are often mixed with noise when they work further more initial start up time and frequency of these sensors are not the same what bring difficulties to data fusion therefore previous processing and time synchronization for these sensors are required before taking multiple sensors information fusion and constructing an integrated navigation system 3 1 usbl time synchronization metrical data of sensors often have measurement or calculation errors and outliers due to timing jitter amplitude fluctuation carrier rotation and narrow transmission paths of the sampling pulses etc which can easily lead to measurements that deviate greatly from expected or true values the various sensors on the submersible cause the occurrence of outliers due to external interference the mistakes introduced by manual operation or wrong time recording and unstable when working usbl is a positioning sensor that works underwater positioning signal passes through the special underwater acoustic channel it will undergo refraction and reflection therefore some positioning signals will be interpreted when they are transmitted to the receiver of acoustic communication machine installed on supply ship usbl is not as stable as gps it often appears no positioning signal in a short or long time under the special underwater conditions in addition the multi sensors are not synchronized during the working time the reasons are as follows i the start up time of each sensor is different ii the sampling frequency of each sensor is different their pulse repetition period and the scanning period are different iii the measured data from different sensors are usually not obtained at the same time during their scanning process this section mainly achieves time synchronization between usbl with dvl which is expressed by the following equations 22 Œ≥ k 1 u s b l Œ≥ k u s b l r b n œÅ 2 v 2 o t u s b l t d v l œÉ where t u s b l t d v l are respectively working period of usbl and dvl v 2 o are optimized velocitys by caekf œÉ is noise matrix set t i m u t d v l are equal in engineering applications generally and set Œ¥ t t u s b l t d v l Œ¥ t is called compensation step length in time synchronization then usbl system can be described by a set of equations in the form 23 u k 1 u s b l Œ± u s b l r b n œÅ 2 0 0 r b n œÅ 2 g u u k u s b l 24 u k u s b l œÅ 1 v 2 o t 25 g u d i a g g d i 3 3 26 Œ± u s b l i 3 3 i 3 3 Œ¥ t o 3 3 i 3 3 where u k u s b l is synchronous state matrix of usbl and imu g u is a diagonal matrix i is identity matrix in order to facilitate the calculation and reduce the calculation period this paper conduct a vector sum of all velocities in t u s b l which as the new input of prediction system then the dimension of the space is reduced expressed by following equation 27 v 2 n e w 1 t u s b l v 2 i œÅ 2 r b n œÅ 2 3 2 condition adaptive gain extended kalman filter design and integrated navigation system design in this section the conventional classical extended kalman filter algorithm was improved proposed condition adaptive gain extended kalman filter algorithm caekf of adding correlated descriptors to achieve multi sensor fusion and outliers elimination in the integrated navigation system the autonomous navigation system have inertial navigation system and dead reckoning system the dm ec and usbl system are the auxiliary navigation system which constitute a multisource measurement system the autonomous navigation is carried out when the auv is not receiving the metrical data of these sensors in order to prevent the autonomous navigation error accumulate over time and get a more accurate position for the deep water vehicle online an integrated navigation is constructed by adding the acoustic navigation system the autonomous navigation system is corrected by the auxiliary navigation subsystem constantly take the velocities of dvl the depths of dm the angles of ec and the positions of usbl as the high precision filter measurements filtering the autonomous navigation system respectively such filtering can restrain the divergence of autonomous navigation system and avoid the navigation system errors changing abruptly when subsystem noises become large such as the wide range of usbl fluctuations and mutations as shown in fig 6 and fig 7 this kind of gross error is rare but once it exists it will bring wrong judgment to navigation system and it might even diverge the system seriously as for the harsh underwater environment even though ekf integrated navigation system is adopted it is also difficult to establish accurate auv kinematic model and error model specially when usbl signal is lost or gross therefore the traditional model of ekf algorithm was improved based on probability distribution theory take the state variables denoted in eq 3 in account the state space in the fixed inertial frame o n x n y n z n can be expressed roughly by following equation 28 s k 1 a s s k Œ¥ k 29 a s i 3 3 r b n œÅ 2 g d l t s 5 r b n œÅ 2 g d l t s i 3 3 c b n œÅ 2 t s i 3 3 i 3 3 r b n œÅ 2 t s i 3 3 where s k is 15 dimensional state vector containing the kinematic quantities describing the motion of the auv a s is state transition matrix Œ¥ k is state noise matrix and equation of state observation is defined ss shown below 30 Œ∂ k 1 h Œ∂ k œÖ k 31 h d i a g i 3 3 i 3 3 o 3 3 p 3 3 o 3 3 32 p 3 3 d i a g 1 1 0 where Œ∂ k is 8 dimensional observation vector made up of metrical data from multiple sensors l Œª from usbl h from dm œï Œ∏ Œ≥ from ec v f v r from dvl it can be seen as r b n œÅ 2 and g d l contain cosine of the state variables the state space expression is a nonlinear system but the observation expression is a linear system so linearization of the expression of nonlinear states is required the first order taylor approximation is the most commonly used method just like ekf set eq 29 is f s and 33 a s a 11 s o 3 3 o 3 3 a 14 s a 15 s o 3 3 a 22 s a 23 s o 3 3 o 3 3 o 3 3 o 3 3 a 33 s o 3 3 o 3 3 o 3 3 o 3 3 o 3 3 a 44 s a 45 s o 3 3 o 3 3 o 3 3 o 3 3 a 55 s jacobian matrix can be obtained as follows 34 f f s s f 11 f 12 o 3 3 f 14 f 15 o 3 3 f 22 f 23 o 3 3 o 3 3 o 3 3 o 3 3 i 3 3 o 3 3 o 3 3 o 3 3 f 42 o 3 3 i 3 3 f 44 o 3 3 o 3 3 o 3 3 o 3 3 f 55 35 f 11 i 3 3 a 14 s a 15 s œÅ 1 36 f 12 a 14 s a 15 s œÅ 2 f 14 a 14 s f 15 a 15 s 37 f 22 i 3 3 a 23 s œÅ 2 f 23 a 23 s 38 f 42 a 44 s œÅ 2 f 45 a 44 s 39 f 33 i 3 3 f 55 i 3 3 so covariance synchronization equation and state equation in the caekf can be expressed by following equation 40 s k f k s k 1 41 p k f p k 1 f t q where p q are respectively covariance matrix process error matrix of system then kalman gain and state update equation can be expressed by follows 42 k g k p k h k t h k p k h k t r 43 s k s k Œ∫ k k g k z k h s k 44 p k i 15 k g k h k p k where k g is kalman gain r is observation noise matrion z k is 8 dimensional observation vector h is observation matrix of system and the calculation method of Œ∫ k and Œ≤ k as following equations 45 Œ∫ k c e Œ≤ k Œ± œÑ Œ± 46 Œ≤ k z k w s h k s k t z k w s h k s k k 1 Œ≤ k Œ∑ Œ≤ k 1 z k w s h k s k t z k w s h k s k 1 Œ∑ k 1 Œ∫ k is condition adaptive gain Œ± is the adjustable initial error it can be adjusted according to the filter demand and specific error model of sensors œÑ and c are filter coefficient Œ≤ k is the confidence estimator making the localized trajectory smooth which can further optimize the filtering results according to the gauss probability distribution between ekf heuristic knowledge and current estimation results w s is weight driven matrix Œ∑ is a forgetting factor which can adjust the proportion of historical experience and current estimates in order to prevent the system divergence this paper adds a constraint condition to filter as shown in fig 8 gauss white noise is the error distribution model of standard ekf the addition of colored noise will inevitably lead to the divergence of filtering system in this paper according to the characteristics of usbl positioning values constraints are added to the colored noise area for one thing when the system has little error drift condition adaptive gain can be approximated as k g using the classical ekf to filter out these outliers for another when the system has a few gross errors floating or more and no rule abnormal standard ekf is not useful and proposed caekf navigation algorithm in this paper becomes effective and necessary under this circumstance the prediction part of the filter becomes predominant if compared to the correction part and caekf approach in terms of robustness turns out to be promising to assure lower estimation errors in complex navigation and cooperation tasks in the integrated navigation system the imu measured the angular rate and acceleration information of carrier by using peg top and accelerometer after integral calculation the speed and position information of carrier can be acquired f1 is a complementary filter using acceleration component of imu and magnetometer component of ec to correct system attitude error f2 is local subfilter for velocity and outputs the credible precise and local optimal estimation of navigation parameter error gps positioning signals are acquired by submarines on or out of the water the time synchronization calculation and compensation calculation can be carried out by the dvl using dr algorithm or by the imu when the data loss or gross error occur of subsystem sensors local filters for subsystems also can use proposed caekf before of which the initial covariance and error matrix are obtained by experience finally through the fusion of local optimum estimation of sub filters then get the global optimal estimation of navigation system the main system is the autonomous navigation system with high fault tolerance and error accumulation such as inertial navigation system and dvl system as the subsystem ec dm and usbl have the characteristics of small cumulative error and low fault tolerance the filter structure established in this paper as shown in fig 9 4 numerical results and performance evaluation the performance of the proposed caekf algorithm was assessed in simulation using nonlinear motion model and sea trial data of vehicle 4 1 simulation using nonlinear motion model in the simulation experiment set suitable initial values for caekf related parameters using positioning model of usbl described in eq 13 and eq 23 dr navigation model by dvl ec and dm and inertial navigation model described in eq 9 to set up the corresponding state space equation and considering the gross error and instability of usbl positioning values the random colored noise process is added to the model the caekf algorithm and the standard ukf algorithm are respectively applied to track and filter this model the next part is to explain and compare the two algorithms it is composed of the prediction and correction scheme shown in algorithm 1 2 algorithm 1 caekf algorithm image 1 algorithm 2 ukf algorithm image 2 in algorithm 2 sigma denotes the corresponding operations on a set of s i g m a points w m and w c are the weights for calculating mean and covariance respectively q and r are the covariance matrices of process and measurement noise assumed as zero mean stationary white noises with zero cross correlation set initial location is œÅ 1 0 0 10 the initial forward velocity is v f 0 8 m s the initial rightward velocity is v r 0 5 m s the initial down velocity is v d 0 01 m s the initial dm error is 0 05 m the initial ec error is 0 1 the œï œÄ 2 Œ∏ œÄ 30 Œ≥ œÄ 20 w œï 0 09 r a d s w Œ∏ w Œ≥ 0 002 r a d s and set adaptive parameters Œ∑ 1 2 œÑ 1 Œ± 0 01 2 c 0 5 then simulation results shown as figs 10 14 in fig 10 the green yellow triangular line denotes the auv s real trajectory of nonlinear system the pink cross line denotes the usbl locating values with abnormal errors the yellow blue square line denotes the auv s trajectory by the standard ukf navigation algorithm and the black purple circle line denotes the trajectory by this paper proposed caekf integrated navigation algorithm red yellow pentagram marker denotes starting point and green yellow diamond marker denotes terminal point as known from above when the abnormal occurs frequently and largely the standard ukf is difficult to achieve the desired effect while the proposed improved algorithm can solve this problem completely and achieve the ideal effect gross deviation in the process of auv positioning by usbl in fig 11 it can be seen that usbl positioning is quite accurate except for some gross errors caused by the sensor frequency or signal transmission figs 12 14 is the position estimation comparison between the two navigation filtering algorithms although the ukf filter works well it sometimes follows large errors it is difficult to have a convergent result it can be seen that caekf proposed in this paper has better filtering effect in terms of stability and precision as a whole 4 2 sea trials in order to verify the validity of this new navigation algorithm in this section the proposed navigation filter has been experimentally validated exploiting the data acquired by the sensors mounted on the vehicle during the execution of the autonomous mission in the south china sea by a mode of following 20 to 30 waypoints underwater shown as fig 15 the comparison between the navigation algorithms will analyzed in detail the auv is at the working depth of more than 1000 m and usbl positioning frequency in this kind of environmen is also unstable considering the accuracy and continuity of terrain position in underwater mission the real trajectory of the submarine needs to be estimated the velocity of auv was obtained by imu and dvl attitude was measured by imu and ec the gps is working when vehicle runs on the surface and usbl positioning system is working when vehicle carries out a task in the sea gps positioning information can be obtained by auv before diving into the sea or after floating out the sea surface french posidonia 6000 usbl system was used in the sea trial which shown as fig 16 the initial positioning error is set to 100 m positioning period is set to 24s and its period is unstable set the initial depth meter error is 30 m the initial error of electronic compass is set 0 1 and conduct parameter identification and correction for dvl to reduce the initial installation errors feng et al 2005 setting caekf parameters Œ± 0 001 2 Œ∑ 1 2 œÑ 1 and c 8 5 in this paper a series of navigational data that over a 20 h voyage was selected to test the proposed algorithms fortunately the reliability trajectories of auv navigation have been obtained and satisfactory results have been achieved shown as fig 22 and comparison of two navigation filtering algorithms as shown in figs 18 24 in fig 17 there are many gross errors in usbl positioning which are much larger than 200 m it can be seen that the initial usbl positioning data without filtering is irregular and extensive which easily affects the positioning accuracy and stability of the system figs 18 and 19 are shown separately the auv inertial navigation trajectory and the dead reckoning trajectory at the initial point the initial stage of the auv s voyage is a process of powerless submarine dive which is prone to the loss of usbl location from the figure it can be seen that the inertial navigation trajectory of the submarine is smooth and continuous as a whole in the initial stage it can be considered that the position estimation of the inertial navigation is accurate and valid in addition the dead reckoning without filtering is greatly affected by the initial point and the dead reckoning navigation trajectory and inertial navigation trajectory deviate greatly in the initial stage in figs 20 and 21 it shows the position estimation comparative results of standard ekf navigation algorithm and standard ukf navigation algorithm these two filtering algorithms are greatly influenced by usbl outliers and initial filtering values the filtering results always follow the changes of usbl outliers and the error is much larger than the cumulative error of inertial navigation fig 24 shows that ukf navigation algorithm is better than ekf navigation algorithm in terms of position estimation error the ukf navigation algorithm turns out to be more robust than the ekf one however due to the lack of adaptive conditions it is difficult to achieve an ideal result by adjusting the covariance distribution and empirical noise value figs 22 24 show the filtering effect of this paper proposed caekf algorithm with nice robustness which is less affected by the initial value although the positioning results are not stable and reliable when auv submerging powerlessly in the form of helix but when the vehicle enters the preset depth the filtering results are stable and convergent and its accuracy is obviously better than that of inertial navigation without filtering under this circumstance the prediction part of the filter becomes predominant if compared to the correction part when the auv navigates underwater the usbl dm ec and dvl play a key role in limiting divergence of position estimation errors although ukf does not have cumbersome steps to linearizing it is also constrained by the assumption of gauss white noise and has certain limitations in the selection of its filtering parameters it is easy to note that the result of the ukf strongly depends on the choice of the these parameters in this case the ukf filtering results do not perform well and sometimes usbl gross errors are tracked to solve this problem the condition adaptive gain is introduced in this study to increase the robustness of caekf without tracking gross errors of usbl and make the positioning trajectory convergent and smooth the results of sea trial data show that near the initial point vehicle in non powered spiral diving the position of auv is constantly changing and the initial position of vehicle is difficult to determine the navigation error will accumulate over time if it relies solely on its own inertial navigation system on the whole the proposed filtering algorithm in this paper has achieved an ideal effect avoiding the impact of the usbl abnormal errors and the disturbances of usbl sampling period on the auv navigation analysis and comparison of absolute error and relative error before and after filtering as shown in table 1 finally three sea trial navigation data are selected which have more than 100 000 rows of records the auv is at the working depth of more than 1000 m and usbl positioning frequency is also unstable in all records running the caekf algorithm in matlb and c environment respectively the running time is shown in table 2 which shows the fast and real time performance of the algorithm the position trajectory becomes clearer and more accurate after filtering by the proposed algorithm which is convenient for the next step of auv navigation location path planning and system optimization 5 conclusion in this paper the authors presented an innovative navigation system especially designed for auv for the harsh underwater environment it is hard to establish the accurate kinematic model of auv in order to obtain high accurate trajectory information for path navigation and path planning based on multi sensor data fusion theory and probability distribution theory this paper proposes the condition adaptive gain ekf integrated navigation system and which had been testified by multiple simulations and sea trails moreover this paper also introduces conditional constraints and confidence measure operator to the improved self adapting filter to realize the localized trajectory convergent and smooth and which makes this algorithm can be worked for different usbl noises finally the long voyage of the sea trials data verifying the feasibility of the proposed methodology better results has been achieved which demonstrated that the proposed algorithm performs well on the aspects of location error and energy consumption and turns out to be more robust than standard navigation algorithms and outperforms other classical filtering approaches but these are offline data from submerged dragon ii auv important further development are scheduled for the future this proposed algorithm will be simulated or tested online in the water and the algorithm needs to be perfected to satisfy the real time navigation requirement the particle filter pf is a commonly used and high precision algorithm in the field of robots but the difficulty of particle distribution selection and the huge number of particles bring pressure to the calculation time fast multi constraint adaptive particle filter algorithm may have higher accuracy in addition underwater visual slam algorithm paull et al 2014 lee et al 2013 bonin negreet al 2015 can be used to correct auv positioning errors to make up for the limitations of acoustic positioning further more multibeam scanning topographic map from supply ship on the water which uses gps for positioning can correct the position information of underwater survey topographic map from auv by terrain matching and the performance of these methods in terms of accuracy will be carefully investigated in different scenarios acknowledgments the aurhors would like to thank the anoymous reviewers for their valuable comments that have led to improvements in the quality and presentstion of this paper this work was supported by the national key r d program of china no 2017yfc03 06800 appendix a supplementary data the following are the supplementary data to this article multimedia component 1 multimedia component 1 multimedia component 2 multimedia component 2 multimedia component 3 multimedia component 3 multimedia component 4 multimedia component 4 multimedia component 5 multimedia component 5 multimedia component 6 multimedia component 6 multimedia component 7 multimedia component 7 multimedia component 8 multimedia component 8 multimedia component 9 multimedia component 9 multimedia component 10 multimedia component 10 multimedia component 11 multimedia component 11 multimedia component 12 multimedia component 12 multimedia component 13 multimedia component 13 multimedia component 14 multimedia component 14 multimedia component 15 multimedia component 15 multimedia component 16 multimedia component 16 appendix a supplementary data supplementary data to this article can be found online at https doi org 10 1016 j oceaneng 2019 106146 
